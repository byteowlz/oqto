import type { JsonValue } from "../../../backend/crates/oqto/bindings/serde_json/JsonValue";
// This file was generated by [ts-rs](https://github.com/Aleph-Alpha/ts-rs). Do not edit this file manually.
import type { CanonPart } from "./CanonPart";
import type { MessageRole } from "./MessageRole";
import type { ModelInfo } from "./ModelInfo";
import type { TokenUsage } from "./TokenUsage";

/**
 * A canonical message in a conversation.
 *
 * This is the unified message format that all agent types convert to.
 */
export type CanonMessage = {
	/**
	 * Unique message ID.
	 */
	id: string;
	/**
	 * Conversation/session ID this message belongs to.
	 */
	sessionId: string;
	/**
	 * Message role.
	 */
	role: MessageRole;
	/**
	 * Flattened text content (for search indexing).
	 */
	content: string;
	/**
	 * Structured content parts.
	 */
	parts: Array<CanonPart>;
	/**
	 * Creation timestamp (Unix milliseconds).
	 */
	createdAt: bigint;
	/**
	 * Completion timestamp (Unix milliseconds, for assistant messages).
	 */
	completed_at: bigint | null;
	/**
	 * Model used for this message.
	 */
	model: ModelInfo | null;
	/**
	 * Token usage.
	 */
	tokens: TokenUsage | null;
	/**
	 * Cost in USD.
	 */
	cost_usd: number | null;
	/**
	 * Parent message ID (for threading/branching).
	 */
	parent_id: string | null;
	/**
	 * Agent name/type that generated this message.
	 */
	agent: string | null;
	/**
	 * Additional metadata.
	 */
	metadata: JsonValue | null;
};

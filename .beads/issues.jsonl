{"id":"workspace-01x","title":"Show persona indicator in chat view","description":"Display persona avatar/name in chat header and message bubbles. User should know which persona they are talking to.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T12:26:44.547730557+01:00","updated_at":"2025-12-28T12:43:22.85838186+01:00","closed_at":"2025-12-28T12:43:22.85838186+01:00","dependencies":[{"issue_id":"workspace-01x","depends_on_id":"workspace-zln","type":"blocks","created_at":"2025-12-28T12:26:57.353345531+01:00","created_by":"wismut"}]}
{"id":"workspace-037","title":"MEDIUM: Directory deletion allows deleting root","description":"fileserver/src/handlers.rs:506-529 - delete_file endpoint can recursively delete entire directory trees including root directory if path is '.'. FIX: Check canonical_path != canonical_root before deletion.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:45:05.686491997+01:00","updated_at":"2025-12-16T06:08:55.220928536+01:00","closed_at":"2025-12-16T06:08:55.220928536+01:00"}
{"id":"workspace-0mn","title":"Frontend: Add new chat button to sidebar","description":"Add a 'New Chat' button in the sidebar to start a new opencode conversation/session. This creates a new chat within the current agent (not a new agent). Should be prominently placed at the top of the sidebar, consistent with the design system (no icons, text-based).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T11:51:07.886812+01:00","updated_at":"2025-12-17T14:14:20.120996+01:00","closed_at":"2025-12-17T14:14:20.120996+01:00"}
{"id":"workspace-0qc","title":"Replace Agents section with Personas in frontend","description":"Rename 'Agents' to 'Personas' in sidebar/navigation. Each repo that has a persona.toml is a persona. Show persona cards with name, description, avatar, color from persona.toml.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T12:26:40.671735382+01:00","updated_at":"2025-12-28T12:40:15.898780429+01:00","closed_at":"2025-12-28T12:40:15.898780429+01:00"}
{"id":"workspace-0w6","title":"Integrate byt for project scaffolding","description":"Integrate byt (byteowlz meta-tool) for project scaffolding within octo workspaces.\n\n## What is byt?\nbyt is the byteowlz meta-tool for cross-repo management, including project scaffolding from templates.\n\n## Features\n\n### 1. Project Scaffolding\n```bash\nbyt new myproject --template rust-cli\nbyt new myproject --template python-cli\nbyt new myproject --template go-cli\n```\n\n### 2. Available Templates\n- rust-cli: Single-binary Rust CLI\n- rust-workspace: Multi-crate Rust workspace\n- python-cli: Python CLI with uv\n- go-cli: Go CLI\n\n### 3. Agent Integration\n- Agent can scaffold new projects\n- Creates proper structure with AGENTS.md\n- Initializes git, adds standard files\n\n## Implementation\n\n### Container\n- Add byt binary to container image\n- Configure templates path or remote fetch\n- Add scaffolding skill\n\n### Skill Definition\n```yaml\n---\nname: scaffolding\ndescription: Create new projects from templates using byt\n---\nUse byt to scaffold new projects:\n- byt new \u003cname\u003e --template rust-cli\n- byt new \u003cname\u003e --template python-cli\n\nTemplates include proper project structure, AGENTS.md, and tooling config.\n```\n\n### Templates Location\nOptions:\n1. Bundle templates in container image\n2. Fetch from byteowlz/templates repo\n3. User-provided template directory\n\n## Dependencies\n- byt binary available\n- Template repository access","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T09:43:03.675169392+01:00","updated_at":"2025-12-29T09:05:11.639286613+01:00","closed_at":"2025-12-29T09:05:11.639286613+01:00"}
{"id":"workspace-10","title":"Remove rounded corners across frontend UI","description":"Remove all border radii from frontend components/theme to achieve square corners across UI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T10:25:51.612109+01:00","updated_at":"2025-12-12T11:14:16.273656+01:00","closed_at":"2025-12-12T11:14:16.273656+01:00"}
{"id":"workspace-11","title":"Flatten project cards: remove shadows and set white 10% opacity","description":"Projects UI: remove card shadows and give cards a white background at 10% opacity.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T11:00:59.710957+01:00","updated_at":"2025-12-12T11:03:41.697108+01:00","closed_at":"2025-12-12T11:03:41.697108+01:00"}
{"id":"workspace-11i","title":"Implement file preview components in frontend","description":"Build preview components for common file types: (1) Markdown renderer with syntax highlighting, (2) Image viewer with zoom/pan, (3) PDF viewer (pdf.js), (4) Code syntax highlighting for source files, (5) CSV/table viewer, (6) Plain text viewer. Integrate with file browser - click to preview.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T22:35:53.611901+01:00","updated_at":"2025-12-15T23:36:08.865315555+01:00","closed_at":"2025-12-15T23:36:08.865315555+01:00"}
{"id":"workspace-16p","title":"Security: EAVS virtual key stored temporarily in database before being cleared","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T21:13:23.572180526+01:00","updated_at":"2025-12-18T16:52:14.2447137+01:00","closed_at":"2025-12-18T16:52:14.2447137+01:00"}
{"id":"workspace-1c1","title":"Correctness: get_or_create_from_oidc does not actually link external_id to existing user","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:14:39.049337257+01:00","updated_at":"2025-12-29T09:10:48.74969505+01:00","closed_at":"2025-12-29T09:10:48.74969505+01:00"}
{"id":"workspace-1hu","title":"Orchestrator: Handle orphan containers and port conflicts","description":"The session orchestrator now handles two critical multi-user scenarios:\n\n## 1. Orphan Container Cleanup\n\n**Problem:** When the backend crashes or restarts, containers may be left running without corresponding database sessions. These 'orphan' containers hold ports and prevent new sessions from starting.\n\n**Solution:** Added startup cleanup that:\n- Detects containers with 'opencode-' prefix that have no matching database session\n- Safely removes orphan containers at server startup\n- Marks stale database sessions (whose containers no longer exist) as failed\n\n**Key methods in SessionService:**\n- `startup_cleanup()` - runs once at server start\n- `find_orphan_containers()` - identifies orphans by comparing running containers to DB\n- `cleanup_orphan_containers()` - stops and removes orphan containers\n- `cleanup_stale_sessions()` - marks DB sessions as failed if container is gone\n\n## 2. Port Allocation Race Condition\n\n**Problem:** When multiple users create sessions simultaneously:\n1. Both call `find_free_port_range()` and get the same ports\n2. Both try to create containers with those ports  \n3. One succeeds, one fails with port conflict\n\n**Solution:** Two-layer protection:\n\n### Layer 1: Database Unique Constraints (migration 20241217001)\n```sql\nCREATE UNIQUE INDEX idx_sessions_active_opencode_port \nON sessions(opencode_port) \nWHERE status IN ('pending', 'starting', 'running');\n```\n\n### Layer 2: Retry Logic in Service\n- `create_session()` now wraps `try_create_session()` in a retry loop\n- On unique constraint violation, retries with different port range\n- Max 5 retries with exponential backoff\n- `is_port_conflict_error()` detects constraint violations\n\n## Files Changed\n- `backend/src/session/service.rs` - cleanup methods and retry logic\n- `backend/src/main.rs` - calls `startup_cleanup()` on server start\n- `backend/migrations/20241217001_port_allocation.sql` - unique indexes on ports","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T21:27:19.250225892+01:00","updated_at":"2025-12-17T21:27:35.478105444+01:00","closed_at":"2025-12-17T21:27:35.478105444+01:00"}
{"id":"workspace-1om","title":"Performance: build_tree uses sync std::fs::read_dir in async context","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:13:43.354067343+01:00","updated_at":"2025-12-17T16:22:09.713922989+01:00","closed_at":"2025-12-17T16:22:09.713922989+01:00"}
{"id":"workspace-26u","title":"MEDIUM: No rate limiting on login endpoint","description":"backend/src/api/routes.rs:100 - The /auth/login endpoint has no rate limiting, allowing brute-force attacks on credentials. FIX: Add rate limiting middleware using tower::limit or dedicated rate-limiting crate.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:44:41.220150464+01:00","updated_at":"2025-12-29T09:07:52.427454315+01:00","closed_at":"2025-12-29T09:07:52.427454315+01:00"}
{"id":"workspace-2az","title":"Terminal WebSocket connection is slow (5-10 second delay)","description":"## Problem\nTerminal takes too long to connect after page load.\n\n## Likely Causes\n1. React Strict Mode double-invoke means first connection is aborted, second must complete\n2. ghostty-web init() may be slow (loading WASM)\n3. authToken not available immediately (login happens async in AppContext)\n\n## Investigation Needed\n- Add timing logs to identify which step is slow\n- Check if WASM init is cached properly\n- Check when authToken becomes available vs when effect runs\n\n## Related\n- workspace-86w (Strict Mode WebSocket issue)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T11:14:12.571667+01:00","updated_at":"2025-12-29T09:10:23.369379191+01:00","closed_at":"2025-12-29T09:10:23.369379191+01:00"}
{"id":"workspace-2jb2","title":"Add project name to chat metadata row","description":"In unified chat view, show project/directory name in the metadata row below each chat title (alongside timestamp)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:20:03.628579816+01:00","updated_at":"2025-12-29T15:18:15.293245936+01:00","closed_at":"2025-12-29T15:18:15.293245936+01:00"}
{"id":"workspace-2oao","title":"Remove 100 session limit from chat history","description":"The sidebar history is capped at 100 sessions. Need to increase or remove this limit to show all historical sessions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T04:21:22.16954725+01:00","updated_at":"2025-12-30T04:22:30.943047923+01:00","closed_at":"2025-12-30T04:22:30.943047923+01:00"}
{"id":"workspace-2qd","title":"Code Duplication: UserInfo struct duplicated in handlers.rs vs user/models.rs with different field names","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:13:57.052963861+01:00","updated_at":"2025-12-29T09:11:14.117063419+01:00","closed_at":"2025-12-29T09:11:14.117063419+01:00"}
{"id":"workspace-2w2","title":"User modes: Simplified, Light Coding, Terminal Terminator","description":"Three distinct user experience levels that control UI visibility and features.\n\nUser Modes:\n\n1. SIMPLIFIED (PowerPoint Juggler)\n   - File browser: Flat list, office files only (.docx, .xlsx, .pptx, .pdf)\n   - Terminal: Hidden, not connected\n   - Chat: Full access\n   - Model switcher: Hidden (use default model)\n   - Agents: Only 'main' agent visible\n\n2. LIGHT CODING (Engineer)  \n   - File browser: Full tree view, all files\n   - Terminal: Hidden by default, can be enabled\n   - Chat: Full access\n   - Model switcher: VISIBLE (dropdown in chat header)\n   - Agents: All agents visible\n\n3. TERMINAL TERMINATOR (CLI-Junky)\n   - File browser: Full tree view, all files\n   - Terminal: Visible and prominent\n   - Chat: Full access\n   - Model switcher: VISIBLE (dropdown in chat header)\n   - Agents: All agents visible, can create new\n\nImplementation:\n\n1. Store user_mode in user profile (backend)\n   - Add 'mode' column to users table\n   - Expose via GET /api/me\n   - Allow update via PATCH /api/me\n\n2. Frontend mode context\n   - UserModeContext providing current mode\n   - useUserMode() hook for components\n   - Mode-aware component rendering\n\n3. First login mode selection (workspace-p54)\n   - Modal on first login if mode not set\n   - Three cards explaining each mode\n   - Selected mode saved to profile\n\n4. Mode switcher in settings\n   - Allow changing mode anytime\n   - Settings page or user menu dropdown\n\n5. Component adaptations:\n   - FileBrowser: respect mode for view/filter\n   - Terminal: show/hide based on mode  \n   - ModelSwitcher: show for modes 2 \u0026 3\n   - AgentsList: filter based on mode","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T16:34:47.270544859+01:00","updated_at":"2025-12-29T09:12:34.640175708+01:00","closed_at":"2025-12-29T09:12:34.640175708+01:00"}
{"id":"workspace-34b","title":"URGENT: Fix live permission display on frontend","description":"Permission requests from the agent are not being displayed to users in the frontend. When opencode asks for permission (e.g., to run a command, edit a file), the user should see the request and be able to approve/deny. This is currently broken. \n\nInvestigation needed:\n- Check if opencode is sending permission events via SSE/WebSocket\n- Verify frontend is subscribed to the correct event stream\n- Check if the permission UI component exists but isn't being triggered\n- May need to add WebSocket support if not already present\n\nThis is blocking users from using permission-gated features.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-28T09:37:44.147757352+01:00","updated_at":"2025-12-28T09:58:01.807104942+01:00","closed_at":"2025-12-28T09:58:01.807104942+01:00"}
{"id":"workspace-35m","title":"Add i18n (internationalization) support to frontend","description":"Add internationalization support to the Next.js frontend. Currently no i18n library is installed. Consider using next-intl or react-i18next for translation support, locale switching, and localized content.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-12T12:06:35.886233+01:00","updated_at":"2025-12-16T21:09:27.47502484+01:00","closed_at":"2025-12-16T09:03:53.541386+01:00"}
{"id":"workspace-37i","title":"Deleting a chat from the context menu in the sidebar doesnt work","description":"The context menu for the chat sessions needs to add helpfull functionality","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T14:17:37.502724+01:00","updated_at":"2025-12-17T17:24:02.290477264+01:00","closed_at":"2025-12-17T17:24:02.290477264+01:00"}
{"id":"workspace-39d","title":"Update sidebar logo to new OCTO branding with theme support","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:39:50.832143+01:00","updated_at":"2025-12-17T20:40:02.157726+01:00","closed_at":"2025-12-17T20:40:02.157726+01:00"}
{"id":"workspace-3tb","title":"Update frontend config for terminal WebSocket URL","description":"Configure NEXT_PUBLIC_TERMINAL_WS_URL to attach to remote PTY via ttyd WebSocket","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T12:05:47.247636+01:00","updated_at":"2025-12-12T12:10:51.522483+01:00","closed_at":"2025-12-12T12:10:51.522483+01:00"}
{"id":"workspace-415","title":"Correctness: Unused code flagged by compiler warnings should be cleaned up or feature-gated","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:14:46.521913089+01:00","updated_at":"2025-12-29T09:10:33.515108852+01:00","closed_at":"2025-12-29T09:10:33.515108852+01:00"}
{"id":"workspace-45p","title":"Add WebSocket support for real-time events","description":"Add WebSocket support to the backend for real-time bidirectional communication.\n\n## Why WebSocket?\n\nCurrent SSE (Server-Sent Events) is one-way. We need bidirectional for:\n1. **Permission requests** - Agent asks, user responds\n2. **Live voice mode** - Continuous audio streaming both ways\n3. **Interrupt/cancel** - User can stop agent mid-execution\n4. **Real-time presence** - Multiple users/agents coordination\n\n## Implementation\n\n### Backend (Rust/Axum)\n```rust\n// New WebSocket endpoint\nGET /ws/session/:id -\u003e WebSocket upgrade\n\n// Message types\nenum WsMessage {\n    // Agent -\u003e User\n    PermissionRequest { id, tool, args, context },\n    AgentOutput { content, done },\n    StatusUpdate { status },\n    \n    // User -\u003e Agent  \n    PermissionResponse { id, allowed },\n    UserMessage { content },\n    Cancel { },\n    \n    // Both ways\n    Ping, Pong\n}\n```\n\n### Frontend\n- Add WebSocket client (native or socket.io-client)\n- Reconnection logic with exponential backoff\n- Message queue for offline/reconnecting state\n- Hook into existing event handling\n\n### Proxy Considerations\n- Backend proxies WS to container's opencode\n- Or: opencode exposes WS, backend just routes\n- Check opencode's WS capabilities\n\n## Dependencies\n- May unblock: Live voice mode, Permission display fix","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T09:39:21.975224942+01:00","updated_at":"2025-12-29T09:04:21.715771207+01:00","closed_at":"2025-12-29T09:04:21.715771207+01:00"}
{"id":"workspace-483","title":"Correctness: WebSocket proxy silently drops Ping/Pong messages instead of forwarding them","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:14:32.867946154+01:00","updated_at":"2025-12-29T09:10:58.90761198+01:00","closed_at":"2025-12-29T09:10:58.90761198+01:00"}
{"id":"workspace-4d69","title":"Add activity indicator for busy sessions in sidebar","description":"Added spinning loader icon next to session titles in the sidebar when an agent is actively working.\n\n## Changes\n- Added busySessions Set and setSessionBusy function to app-context.tsx\n- SSE events (session.busy/session.idle) update the global busy state\n- SessionsApp syncs local chat state to global context via setSessionBusy\n- Added Loader2 spinning icon in both mobile and desktop sidebar session lists in page.tsx\n\n## Implementation\n- Uses Loader2 icon from lucide-react with animate-spin class\n- Indicator appears next to session title when session ID is in busySessions Set\n- State is managed globally in AppContext for cross-component access","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T00:31:21.563274654+01:00","updated_at":"2025-12-31T00:31:35.208801616+01:00","closed_at":"2025-12-31T00:31:35.208801616+01:00"}
{"id":"workspace-4k1","title":"Backend: Add user_mode to user profile","description":"Store and expose user mode preference in the backend.\n\nDatabase:\n- Add 'mode' column to users table\n- Type: TEXT, nullable (null = not yet selected)\n- Values: 'simplified', 'light_coding', 'terminal_terminator'\n\nMigration:\nALTER TABLE users ADD COLUMN mode TEXT;\n\nAPI:\nGET /api/me\n  Response includes: { ..., mode: 'light_coding' | null }\n\nPATCH /api/me\n  Body: { mode: 'terminal_terminator' }\n  Validates mode is one of the allowed values\n\nFirst login detection:\n- If mode is null, frontend shows mode selection modal\n- After selection, PATCH /api/me with chosen mode","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T23:49:41.122622+01:00","updated_at":"2025-12-29T09:12:14.33455518+01:00","closed_at":"2025-12-29T09:12:14.33455518+01:00"}
{"id":"workspace-4vj","title":"LOW: Using Box\u003cdyn Error\u003e instead of anyhow in main","description":"fileserver/src/main.rs:55 - Main function returns Box\u003cdyn std::error::Error\u003e which loses type information. FIX: Use anyhow::Result or custom error type.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:41.773758025+01:00","updated_at":"2025-12-29T09:14:46.589629289+01:00","closed_at":"2025-12-29T09:14:46.589629289+01:00"}
{"id":"workspace-4yi","title":"Correctness: Delete session does not check if container still exists before returning success","description":"","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-16T21:14:42.004329099+01:00","updated_at":"2025-12-29T09:13:35.526158044+01:00","closed_at":"2025-12-29T09:13:35.526158044+01:00"}
{"id":"workspace-5gpd","title":"Standardize data storage location across modes","description":"Use /var/lib/octo/users/{user}/ as canonical data location. Set XDG_DATA_HOME in both Local and Docker modes to point here. Ensures history persists when switching modes. Alternative: bind-mount user's ~/.local/share/opencode/ into container with correct UID/GID.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:23:29.777549308+01:00","updated_at":"2025-12-30T13:41:00.493244985+01:00","closed_at":"2025-12-30T13:41:00.493244985+01:00"}
{"id":"workspace-5h0","title":"Implement Rust backend container orchestration via Podman","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-15T13:28:32.70242+01:00","updated_at":"2025-12-15T13:43:24.396292+01:00","closed_at":"2025-12-15T13:43:24.396292+01:00"}
{"id":"workspace-5h0.1","title":"Add Axum web framework and core dependencies","description":"Add axum, tokio, tower, serde, and other core dependencies to Cargo.toml for building the HTTP API server","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:28:43.236259+01:00","updated_at":"2025-12-15T13:34:14.605677+01:00","closed_at":"2025-12-15T13:34:14.605677+01:00","dependencies":[{"issue_id":"workspace-5h0.1","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:28:43.236917+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5h0.2","title":"Implement Podman container management module","description":"Create a podman module that wraps podman CLI to: create containers, start/stop containers, list running containers, get container logs, and stream container stats","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:28:54.703242+01:00","updated_at":"2025-12-15T13:36:08.776768+01:00","closed_at":"2025-12-15T13:36:08.776768+01:00","dependencies":[{"issue_id":"workspace-5h0.2","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:28:54.704111+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5h0.3","title":"Implement session management and state tracking","description":"Create session registry to track active sessions (container ID, ports, user, workspace path). Use SQLx with SQLite for persistent state storage","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:29:06.002283+01:00","updated_at":"2025-12-15T13:38:19.781818+01:00","closed_at":"2025-12-15T13:38:19.781818+01:00","dependencies":[{"issue_id":"workspace-5h0.3","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:29:06.002887+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5h0.4","title":"Implement HTTP/WebSocket proxy for container services","description":"Proxy requests from frontend to container services: HTTP proxy for opencode API (with SSE streaming support), WebSocket proxy for ttyd terminal","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:29:28.168755+01:00","updated_at":"2025-12-15T13:40:32.132644+01:00","closed_at":"2025-12-15T13:40:32.132644+01:00","dependencies":[{"issue_id":"workspace-5h0.4","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:29:28.169474+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5h0.5","title":"Implement REST API endpoints for session lifecycle","description":"Create API endpoints: POST /session (start container), DELETE /session/:id (stop container), GET /sessions (list active), GET /session/:id (status)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:29:38.676178+01:00","updated_at":"2025-12-15T13:40:43.47127+01:00","closed_at":"2025-12-15T13:40:43.47127+01:00","dependencies":[{"issue_id":"workspace-5h0.5","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:29:38.677063+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5h0.6","title":"Add serve subcommand to start the API server","description":"Add 'serve' subcommand to CLI that starts the Axum HTTP server with configurable host/port","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T13:29:49.478238+01:00","updated_at":"2025-12-15T13:43:13.509657+01:00","closed_at":"2025-12-15T13:43:13.509657+01:00","dependencies":[{"issue_id":"workspace-5h0.6","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:29:49.479034+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5h0.7","title":"Update frontend to use backend API for session management","description":"Update frontend to call backend API to start/stop sessions instead of connecting directly to containers. Backend returns session ID and proxies all requests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T13:29:59.330507+01:00","updated_at":"2025-12-15T17:43:44.8861558+01:00","closed_at":"2025-12-15T17:43:44.8861558+01:00","dependencies":[{"issue_id":"workspace-5h0.7","depends_on_id":"workspace-5h0","type":"parent-child","created_at":"2025-12-15T13:29:59.331019+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-5t8k","title":"Add backend mode configuration","description":"Config options: global mode = local | docker | auto. Per-user override: users.alice.mode = docker. Auto mode prefers local if /run/octo/agent-{user}.sock exists, otherwise docker.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T13:23:32.585153899+01:00","updated_at":"2025-12-30T13:41:10.690523584+01:00","closed_at":"2025-12-30T13:41:10.690523584+01:00"}
{"id":"workspace-5yn","title":"Performance: bd commands take ~10s due to daemon auto-start","description":"Sandbox-only perf issue: bd invocations can spend ~10s trying to auto-start/connect to the daemon when ~/.beads/registry.lock is not writable. Workaround: run bd with --no-daemon (direct mode) in sandboxed agent runners. Not changing repo config.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T16:04:40.941284143+01:00","updated_at":"2025-12-17T16:19:34.653191777+01:00","closed_at":"2025-12-17T16:12:28.754117771+01:00"}
{"id":"workspace-605","title":"Terminal shows 'Waiting...' even when connected","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T14:04:10.841796+01:00","updated_at":"2025-12-17T17:24:01.331998603+01:00","closed_at":"2025-12-17T17:24:01.331998603+01:00"}
{"id":"workspace-63u","title":"Consolidate polling intervals - replace multiple polling with single SSE connection","description":"High CPU/RAM on opencode (Node) caused by frontend repeatedly fetching full message history during active sessions (500ms interval + one fetch per SSE message event). Throttle/coalesce message refreshes and only poll when SSE unavailable.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T13:46:00.901065+01:00","updated_at":"2025-12-17T16:36:02.090483702+01:00","closed_at":"2025-12-17T16:36:02.090483702+01:00"}
{"id":"workspace-677","title":"LOW: Manual error conversion instead of From impl","description":"fileserver/src/handlers.rs:433-436,471-474 - Manually converting errors with .map_err() when a From impl could handle it. FIX: Add Multipart variant to FileServerError with #[from].","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:43.991370625+01:00","updated_at":"2025-12-29T09:14:41.510481596+01:00","closed_at":"2025-12-29T09:14:41.510481596+01:00"}
{"id":"workspace-6b5","title":"MEDIUM: Silent error ignoring in fileserver WalkDir","description":"fileserver/src/handlers.rs:327-330,348-351 - Errors from WalkDir and metadata retrieval silently ignored. Could hide real issues. FIX: At minimum log the errors with tracing::warn.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:45:16.517063841+01:00","updated_at":"2025-12-29T09:13:20.29673438+01:00","closed_at":"2025-12-29T09:13:20.29673438+01:00"}
{"id":"workspace-6f9","title":"Test SSE streaming in production environment","description":"In production, all services are behind the same domain via Caddy, so SSE should work without CORS issues.\n\nTasks:\n- Test that SSE events are properly streamed through Caddy proxy\n- Verify auth cookies are sent with SSE requests (same domain)\n- Replace polling with proper SSE if it works in prod\n- Test streaming performance with longer responses\n- Ensure connection recovery on network interruptions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T09:58:15.089587+01:00","updated_at":"2025-12-29T09:13:00.004275375+01:00","closed_at":"2025-12-29T09:13:00.004275375+01:00"}
{"id":"workspace-6hl","title":"MEDIUM: Blocking filesystem check in async context","description":"backend/src/session/service.rs:71 - std::path::Path::exists() is a blocking operation used in async function, can block the async runtime. FIX: Use tokio::fs::metadata instead.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:44:47.312467619+01:00","updated_at":"2025-12-29T09:08:02.581402116+01:00","closed_at":"2025-12-29T09:08:02.581402116+01:00"}
{"id":"workspace-6la","title":"Scheduled tasks / Cron system","description":"Add scheduled task execution for automated agent runs.\n\n## Features\n\n### 1. Task Scheduling\n- Cron-style scheduling (e.g., '0 9 * * *' for daily 9am)\n- One-time scheduled runs (run at specific datetime)\n- Recurring intervals (every 30m, every 2h)\n\n### 2. Task Types\n- **Agent runs**: Execute a prompt at scheduled time\n- **Maintenance**: Backup workspace, cleanup artifacts\n- **Notifications**: Daily summaries, reminders\n- **Webhooks**: Trigger external services\n\n### 3. Task Definition\n```toml\n[[tasks]]\nid = \"daily-standup\"\nschedule = \"0 9 * * 1-5\"  # 9am weekdays\npersona = \"govnr\"\nprompt = \"Review my calendar and prepare standup notes\"\ndeliver_to = \"session\"  # or email, webhook\n\n[[tasks]]\nid = \"weekly-cleanup\"\nschedule = \"0 0 * * 0\"  # Sunday midnight\naction = \"cleanup\"\noptions = { older_than_days = 7 }\n```\n\n### 4. UI Components\n- Task list with next run time\n- Create/edit task form\n- Run history with logs\n- Enable/disable toggle\n- Manual trigger button\n\n## Implementation\n\n### Backend\n```rust\n// New module: backend/src/scheduler/\nstruct ScheduledTask {\n    id: String,\n    user_id: String,\n    schedule: CronSchedule,\n    task_type: TaskType,\n    config: TaskConfig,\n    enabled: bool,\n    last_run: Option\u003cDateTime\u003e,\n    next_run: DateTime,\n}\n\nenum TaskType {\n    AgentRun { persona_id: String, prompt: String },\n    Maintenance { action: String },\n    Webhook { url: String, payload: Value },\n}\n```\n\n### Database\n```sql\nCREATE TABLE scheduled_tasks (\n    id TEXT PRIMARY KEY,\n    user_id TEXT NOT NULL,\n    name TEXT NOT NULL,\n    schedule TEXT NOT NULL,\n    task_type TEXT NOT NULL,\n    config TEXT NOT NULL,  -- JSON\n    enabled BOOLEAN DEFAULT true,\n    last_run_at TEXT,\n    next_run_at TEXT,\n    created_at TEXT NOT NULL,\n    FOREIGN KEY (user_id) REFERENCES users(id)\n);\n\nCREATE TABLE task_runs (\n    id TEXT PRIMARY KEY,\n    task_id TEXT NOT NULL,\n    started_at TEXT NOT NULL,\n    completed_at TEXT,\n    status TEXT NOT NULL,  -- running, success, failed\n    output TEXT,\n    error TEXT,\n    FOREIGN KEY (task_id) REFERENCES scheduled_tasks(id)\n);\n```\n\n### Scheduler Service\n- Background tokio task checking next_run times\n- Spawn agent sessions for AgentRun tasks\n- Execute maintenance actions\n- Record run history\n\n### API Endpoints\n```\nGET    /api/tasks              # List user's tasks\nPOST   /api/tasks              # Create task\nGET    /api/tasks/:id          # Get task details\nPUT    /api/tasks/:id          # Update task\nDELETE /api/tasks/:id          # Delete task\nPOST   /api/tasks/:id/run      # Trigger immediate run\nGET    /api/tasks/:id/runs     # Get run history\n```\n\n## Cron Library\nUse `cron` or `tokio-cron-scheduler` crate for parsing and scheduling.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T09:43:34.619562105+01:00","updated_at":"2025-12-29T09:05:16.720694153+01:00","closed_at":"2025-12-29T09:05:16.720694153+01:00"}
{"id":"workspace-6ot","title":"Integrate A2UI (Artifact-to-UI) support","description":"Add A2UI support for rendering agent-generated artifacts in a visual canvas.\n\n## What is A2UI?\nA2UI (Artifact-to-UI) is a protocol for agents to generate visual artifacts (HTML/CSS/JS) that render in a dedicated canvas/iframe.\n\n## Features\n\n### 1. A2UI Canvas Component\n- Sandboxed iframe for rendering agent artifacts\n- PostMessage bridge for communication\n- Live reload on artifact updates\n\n### 2. Artifact Types\n- HTML pages (static or interactive)\n- Charts/visualizations (D3, Chart.js)\n- Diagrams (Mermaid, Excalidraw)\n- Forms and UI prototypes\n- Markdown previews\n\n### 3. Agent Integration\n- Agent writes to designated artifacts directory\n- Frontend watches for changes\n- Auto-renders new/updated artifacts\n\n### 4. UI Layout\n- Split view: Chat + Artifact canvas\n- Artifact selector (when multiple)\n- Full-screen artifact mode\n- Download/export artifacts\n\n## Implementation\n\n### Backend\n- Serve artifacts directory via fileserver\n- WebSocket notifications for artifact changes\n\n### Frontend\n- A2UICanvas component with iframe\n- Artifact file watcher (via fileserver /ws/watch)\n- PostMessage protocol handler\n\n### Container\n- Artifacts directory: `~/workspace/.artifacts/`\n- Agent writes HTML/assets here\n- Fileserver serves with correct MIME types\n\n## Reference\n- Clawdis Canvas implementation\n- Claude Artifacts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T09:41:20.825589136+01:00","updated_at":"2025-12-29T09:04:56.418558315+01:00","closed_at":"2025-12-29T09:04:56.418558315+01:00"}
{"id":"workspace-6ue","title":"MEDIUM: String-based error type matching is fragile","description":"backend/src/api/error.rs:146-158 - Converting anyhow errors by matching on string contents is fragile and non-idiomatic. FIX: Use anyhow::Error::downcast_ref to check for specific error types.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:44:59.900915682+01:00","updated_at":"2025-12-29T09:08:44.534483714+01:00","closed_at":"2025-12-29T09:08:44.534483714+01:00"}
{"id":"workspace-72t","title":"MEDIUM: No input validation on session workspace path","description":"backend/src/session/service.rs:67-73 - The workspace path from user input only checked for existence. Path traversal attacks could mount sensitive directories like /etc, /root. FIX: Validate workspace_path is within allowed directories using canonicalize comparison.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:44:43.545234916+01:00","updated_at":"2025-12-29T09:07:57.501443906+01:00","closed_at":"2025-12-29T09:07:57.501443906+01:00"}
{"id":"workspace-770","title":"Correctness: Session container startup spawned in background with no way to await or check result","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T21:14:30.710690487+01:00","updated_at":"2025-12-18T16:52:04.152839973+01:00","closed_at":"2025-12-18T16:52:04.152839973+01:00"}
{"id":"workspace-7dk","title":"LOW: Unnecessary lifetime parameter","description":"backend/src/auth/middleware.rs:16-25 - The function token_from_cookie_header uses explicit lifetime parameter that could be elided. FIX: Let the compiler infer lifetimes where possible.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:25.61877956+01:00","updated_at":"2025-12-29T09:15:34.855471997+01:00","closed_at":"2025-12-29T09:15:34.855471997+01:00"}
{"id":"workspace-7mz","title":"Integrate mmry for agent memory","description":"Integrate mmry (byteowlz memory system) for persistent agent memory across sessions.\n\n## What is mmry?\nmmry is a local-first memory system for humans and AI agents. It provides semantic search, categorization, and cross-session memory persistence.\n\n## Features\n\n### 1. Per-User Memory Store\n- Each user gets a dedicated mmry store\n- Memory persists across sessions\n- Agent can add/search memories\n\n### 2. Agent Integration\n- Install mmry in container\n- Add memory skill for agent usage\n- Auto-context injection on session start\n\n### 3. Memory Operations\n```bash\nmmry add \"learned insight\" -c category -t tag1,tag2\nmmry search \"query\" --limit 10\nmmry ls --limit 20\n```\n\n### 4. Session Context\nOn session start:\n- Search relevant memories for current task\n- Inject as context in AGENTS.md or system prompt\n\n## Implementation\n\n### Container\n- Add mmry binary to container image\n- Configure store path: `~/.local/share/mmry/`\n- Add memory skill: `.opencode/skill/memory/SKILL.md`\n\n### Backend\n- Mount mmry data directory\n- Persist across container restarts\n\n### Skill Definition\n```yaml\n---\nname: memory\ndescription: Store and retrieve persistent memories across sessions\n---\nUse mmry to remember important information:\n- mmry add \"insight\" -c category\n- mmry search \"query\"\n- mmry ls --limit 10\n\nCategories: decisions, preferences, learnings, context\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T09:42:47.210345907+01:00","updated_at":"2025-12-29T09:05:06.572534097+01:00","closed_at":"2025-12-29T09:05:06.572534097+01:00"}
{"id":"workspace-7nb","title":"MEDIUM: Database pool size may be too small","description":"backend/src/db/mod.rs:33-34 - SQLite pool limited to 5 connections. While SQLite has write lock limitations, only 5 connections may bottleneck under concurrent read load. FIX: Consider increasing for read operations or make configurable.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:44:49.447184652+01:00","updated_at":"2025-12-29T09:08:07.657712487+01:00","closed_at":"2025-12-29T09:08:07.657712487+01:00"}
{"id":"workspace-7pu","title":"MEDIUM: Repeated root path validation pattern","description":"fileserver/src/handlers.rs:131-133,142-144,152-154,461-467 - Pattern of canonicalizing root and checking if path starts with it repeated multiple times. FIX: Create dedicated is_within_root() validation function.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:45:11.78431715+01:00","updated_at":"2025-12-29T09:13:25.371925761+01:00","closed_at":"2025-12-29T09:13:25.371925761+01:00"}
{"id":"workspace-7rz","title":"MEDIUM: Duplicate user query boilerplate","description":"backend/src/user/repository.rs:62-66,81-85,100-104,119-123,143-147 - User column list repeated in every query. FIX: Define column list as const USER_COLUMNS.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:44:53.229567482+01:00","updated_at":"2025-12-29T09:08:34.380483605+01:00","closed_at":"2025-12-29T09:08:34.380483605+01:00"}
{"id":"workspace-7va","title":"Refactor podman module to support both Docker and Podman runtimes","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T11:47:36.679674+01:00","updated_at":"2025-12-16T12:09:48.669609+01:00","closed_at":"2025-12-16T12:09:48.669609+01:00"}
{"id":"workspace-7va.1","title":"Rename podman module to container module","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:47:45.992354+01:00","updated_at":"2025-12-16T12:07:09.710265+01:00","closed_at":"2025-12-16T12:07:09.710265+01:00","dependencies":[{"issue_id":"workspace-7va.1","depends_on_id":"workspace-7va","type":"parent-child","created_at":"2025-12-16T11:47:45.993027+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-7va.2","title":"Add ContainerRuntime enum (Docker/Podman) and config option","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:47:46.995833+01:00","updated_at":"2025-12-16T12:07:20.628569+01:00","closed_at":"2025-12-16T12:07:20.628569+01:00","dependencies":[{"issue_id":"workspace-7va.2","depends_on_id":"workspace-7va","type":"parent-child","created_at":"2025-12-16T11:47:46.996485+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-7va.3","title":"Handle Docker vs Podman differences (volume :Z suffix, etc)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:47:48.88077+01:00","updated_at":"2025-12-16T12:07:25.77908+01:00","closed_at":"2025-12-16T12:07:25.77908+01:00","dependencies":[{"issue_id":"workspace-7va.3","depends_on_id":"workspace-7va","type":"parent-child","created_at":"2025-12-16T11:47:48.881382+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-7va.4","title":"Update backend config.toml with container runtime setting","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T11:47:49.654327+01:00","updated_at":"2025-12-16T12:08:37.702232+01:00","closed_at":"2025-12-16T12:08:37.702232+01:00","dependencies":[{"issue_id":"workspace-7va.4","depends_on_id":"workspace-7va","type":"parent-child","created_at":"2025-12-16T11:47:49.655115+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-7va.5","title":"Update compose file comments and documentation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:47:50.029422+01:00","updated_at":"2025-12-16T12:09:43.614618+01:00","closed_at":"2025-12-16T12:09:43.614618+01:00","dependencies":[{"issue_id":"workspace-7va.5","depends_on_id":"workspace-7va","type":"parent-child","created_at":"2025-12-16T11:47:50.030355+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-85i","title":"Correctness: opencode_events SSE handler is stub that only sends keepalives, not actual events","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:14:34.421388636+01:00","updated_at":"2025-12-29T09:10:53.826436205+01:00","closed_at":"2025-12-29T09:10:53.826436205+01:00"}
{"id":"workspace-86w","title":"Fix React Strict Mode double-invoke breaking WebSocket connections in GhosttyTerminal","description":"## Problem\nThe GhosttyTerminal React component fails to establish WebSocket connections reliably due to React 18 Strict Mode double-invoking effects.\n\n## Symptoms\n- Console shows 'Terminal: connecting...' appearing 2-3 times\n- Firefox error: 'can't establish a connection to the server'\n- Error: 'connection was interrupted while the page was loading'\n- Terminal stuck on 'Connecting...' status\n\n## Root Cause\nReact Strict Mode (development only) intentionally double-invokes:\n1. Effect runs, creates WebSocket (state: CONNECTING)\n2. Cleanup runs immediately, closes socket\n3. Effect runs again, creates new WebSocket\n4. Both sockets interfere or the cleanup timing corrupts state\n\n## What We've Tried (All Failed)\n1. `setupDoneRef` to skip second invocation - doesn't work because cleanup resets it\n2. `connectingRef` to track connection state - race condition with async\n3. Checking `socketRef.current.readyState` - socket is CONNECTING not OPEN\n4. Separating terminal init and WebSocket into different effects - still double-invokes\n5. Single combined effect with `cancelled` flag - cleanup still interrupts connection\n\n## Evidence WebSocket Works\n```bash\n# This works perfectly outside React:\nbun run test-ws.ts  # -\u003e Connected! Message received...\n```\n\n## Files Involved\n- frontend/components/terminal/ghostty-terminal.tsx\n- frontend/components/app-context.tsx (provides authToken)\n- backend/src/api/proxy.rs (WebSocket proxy to ttyd)\n\n## Acceptance Criteria\n- [ ] Terminal connects successfully on page load\n- [ ] Only one WebSocket connection is created\n- [ ] Works in both development (Strict Mode) and production\n- [ ] Reconnects properly when authToken changes","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T11:13:40.561482+01:00","updated_at":"2025-12-17T11:19:33.762786+01:00","closed_at":"2025-12-17T11:19:33.762786+01:00"}
{"id":"workspace-8hj","title":"Add fileserver binary to container build pipeline","description":"Build fileserver Rust binary for x86_64-unknown-linux-gnu target and include in container Dockerfile. Update entrypoint to use fileserver instead of Python http.server fallback.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T22:35:40.547257+01:00","updated_at":"2025-12-15T23:34:47.548153502+01:00","closed_at":"2025-12-15T23:34:47.548153502+01:00"}
{"id":"workspace-8pn","title":"Security: Container runtime uses shell command execution without sanitizing image names","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T21:13:28.815704523+01:00","updated_at":"2025-12-16T22:10:15.086687654+01:00","closed_at":"2025-12-16T22:10:15.086687654+01:00"}
{"id":"workspace-8qs","title":"Idiomatic: Excessive use of clone() on Arc - Arc::clone(\u0026x) preferred for clarity","description":"","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-16T21:14:19.820189365+01:00","updated_at":"2025-12-29T09:15:55.147480512+01:00","closed_at":"2025-12-29T09:15:55.147480512+01:00"}
{"id":"workspace-8vv8","title":"Context Window Gauge: Dynamic model limits from models.dev","description":"Implemented dynamic context window limits for the ContextWindowGauge component by integrating with models.dev API.\n\n## Changes\n\n### New Hook: `/frontend/hooks/use-models-dev.ts`\n- Fetches model data from `https://models.dev/api.json`\n- Cached for 1 hour with TanStack Query (staleTime: 1hr, gcTime: 24hr)\n- Exports:\n  - `useModelsDevData()` - fetches all model data\n  - `useModelContextLimit(providerID, modelID, defaultLimit)` - returns context limit for specific model\n  - `getContextLimit()` - helper function for direct lookups\n\n### Updated: `/frontend/apps/sessions/index.tsx`\n- `tokenUsage` memo now extracts `providerID` and `modelID` from most recent assistant message\n- Added `contextLimit` using `useModelContextLimit()` hook\n- Both desktop and mobile ContextWindowGauge instances use dynamic `maxTokens={contextLimit}`\n\n## How It Works\n1. Messages loaded -\u003e extract providerID/modelID from latest assistant message\n2. Hook fetches models.dev data (cached) -\u003e looks up `providers[providerID].models[modelID].limit.context`\n3. Returns actual context limit or falls back to 200,000 tokens\n\n## Example Context Limits\n- Claude Opus/Sonnet: 200,000 tokens\n- DeepSeek V3: 163,840 tokens\n- Qwen Max: 32,768 tokens\n- Gemini Pro: 2,097,152 tokens (2M)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T14:39:04.708503011+01:00","updated_at":"2025-12-31T14:39:31.468993272+01:00","closed_at":"2025-12-31T14:39:31.468993272+01:00"}
{"id":"workspace-8zn","title":"Source map error in ghostty-web WebAssembly","description":"Source map error: Error: URL constructor: is not a valid URL in ghostty-web WebAssembly.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-15T16:24:04.909531308+01:00","updated_at":"2025-12-15T18:41:44.532144713+01:00","closed_at":"2025-12-15T18:41:44.532144713+01:00"}
{"id":"workspace-917","title":"Add horizontal margins inside terminal content","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:04:11.479235+01:00","updated_at":"2025-12-29T09:10:13.215902748+01:00","closed_at":"2025-12-29T09:10:13.215902748+01:00"}
{"id":"workspace-92j","title":"Idiomatic: let _ = user pattern to silence unused variable - use underscore prefix instead","description":"","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-16T21:14:21.839669417+01:00","updated_at":"2025-12-29T09:16:00.223371644+01:00","closed_at":"2025-12-29T09:16:00.223371644+01:00"}
{"id":"workspace-96q","title":"HIGH: CORS allows any origin in backend API","description":"backend/src/api/routes.rs:20-23 - CORS is configured with allow_origin(Any), allow_methods(Any), allow_headers(Any). This allows any website to make authenticated requests to the API. FIX: Configure specific allowed origins, especially in production.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T23:44:20.976064116+01:00","updated_at":"2025-12-16T06:08:17.332724053+01:00","closed_at":"2025-12-16T06:08:17.332724053+01:00"}
{"id":"workspace-97k","title":"Implement proper SSE client with reconnection logic","description":"The current polling implementation works but is not optimal. Once SSE works in production, implement proper SSE client.\n\nTasks:\n- Create SSE client that falls back to polling if SSE fails\n- Implement exponential backoff for reconnection\n- Handle connection drops gracefully without losing messages\n- Add connection status indicator in UI (connected/reconnecting)\n- Consider using EventSource polyfill for better browser support","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-17T09:59:00.589926+01:00","updated_at":"2025-12-29T09:10:28.43853482+01:00","closed_at":"2025-12-29T09:10:28.43853482+01:00"}
{"id":"workspace-98bw","title":"Evaluate rootless Podman as default container runtime","description":"Docker socket is effectively root-equivalent. Rootless Podman provides container isolation without root powers. Evaluate as default for container mode. Current octo already has runtime abstraction for Docker/Podman.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:23:34.636837007+01:00","updated_at":"2025-12-30T13:23:34.636837007+01:00"}
{"id":"workspace-99m","title":"Security: File upload loads entire file into memory before size check","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:13:32.25327459+01:00","updated_at":"2025-12-29T09:11:19.193880832+01:00","closed_at":"2025-12-29T09:11:19.193880832+01:00"}
{"id":"workspace-9aa","title":"AI Agent Workspace Platform - V1 Implementation","description":"Complete V1 implementation of the AI Agent Workspace Platform. This epic encompasses all work needed to deliver a functional single-VPS deployment with: Rust control plane API, Next.js frontend with auth, Podman container orchestration, SQLite database, and local/Azure storage abstraction. See PRD.md for full requirements.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T23:20:57.17859+01:00","updated_at":"2025-12-29T09:06:29.495737013+01:00","closed_at":"2025-12-29T09:06:29.495737013+01:00"}
{"id":"workspace-9aa.1","title":"Infrastructure \u0026 Deployment","description":"Ansible playbooks for VPS provisioning, Caddy reverse proxy configuration, container image definitions, and CI/CD pipeline setup.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T23:21:09.03858+01:00","updated_at":"2025-12-29T09:05:39.434446732+01:00","closed_at":"2025-12-29T09:05:39.434446732+01:00","dependencies":[{"issue_id":"workspace-9aa.1","depends_on_id":"workspace-9aa","type":"parent-child","created_at":"2025-12-08T23:21:09.039031+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.1.1","title":"Create Ansible playbook for VPS base setup","description":"Playbook to provision a fresh VPS: install Podman (rootless), create ai-platform user, configure firewall, install system dependencies. Target: Debian/Ubuntu.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:20.709979+01:00","updated_at":"2025-12-29T09:05:44.507594585+01:00","closed_at":"2025-12-29T09:05:44.507594585+01:00","dependencies":[{"issue_id":"workspace-9aa.1.1","depends_on_id":"workspace-9aa.1","type":"parent-child","created_at":"2025-12-08T23:21:20.710572+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.1.2","title":"Create Ansible playbook for application deployment","description":"Playbook to deploy application binaries, systemd service files for backend, configure environment variables, and set up auto-restart policies.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:22.109749+01:00","updated_at":"2025-12-29T09:05:49.578145307+01:00","closed_at":"2025-12-29T09:05:49.578145307+01:00","dependencies":[{"issue_id":"workspace-9aa.1.2","depends_on_id":"workspace-9aa.1","type":"parent-child","created_at":"2025-12-08T23:21:22.110261+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.1.3","title":"Configure Caddy reverse proxy","description":"Caddyfile configuration for: SSL termination, routing /api/* to Rust backend, routing /* to Next.js, WebSocket upgrade support for terminal connections.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:21:23.61811+01:00","updated_at":"2025-12-16T21:09:27.482441724+01:00","closed_at":"2025-12-16T09:03:48.714472+01:00","dependencies":[{"issue_id":"workspace-9aa.1.3","depends_on_id":"workspace-9aa.1","type":"parent-child","created_at":"2025-12-08T23:21:23.618624+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.1.4","title":"Set up GitLab CI/CD pipeline","description":"GitLab CI configuration: test stage (cargo test, bun test), build stage (compile binaries, build container images), deploy stage (webhook trigger to VPS for auto-pull and restart).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:21:25.887461+01:00","updated_at":"2025-12-29T09:05:54.653904059+01:00","closed_at":"2025-12-29T09:05:54.653904059+01:00","dependencies":[{"issue_id":"workspace-9aa.1.4","depends_on_id":"workspace-9aa.1","type":"parent-child","created_at":"2025-12-08T23:21:25.887885+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.1.5","title":"Create docker-compose/podman-compose for local development","description":"Compose file to spin up local dev environment: backend, frontend, SQLite volume, and a test agent container. Should work with both docker-compose and podman-compose.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:27.887912+01:00","updated_at":"2025-12-16T21:09:27.483238692+01:00","closed_at":"2025-12-16T09:03:47.793784+01:00","dependencies":[{"issue_id":"workspace-9aa.1.5","depends_on_id":"workspace-9aa.1","type":"parent-child","created_at":"2025-12-08T23:21:27.888383+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2","title":"Backend Control Plane","description":"Rust API server using Axum: session orchestration, Podman container management, HTTP/WebSocket proxying, database layer (SQLite via sqlx), storage abstraction (local/Azure), and observability endpoints.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T23:21:10.531552+01:00","updated_at":"2025-12-29T09:06:04.366476346+01:00","closed_at":"2025-12-29T09:06:04.366476346+01:00","dependencies":[{"issue_id":"workspace-9aa.2","depends_on_id":"workspace-9aa","type":"parent-child","created_at":"2025-12-08T23:21:10.531965+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.1","title":"Refactor backend from CLI to Axum web server","description":"Transform current CLI template into an Axum-based HTTP server. Keep CLI structure for admin commands but add 'serve' command that starts the API server. Add axum, tower, tokio dependencies.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:21:33.906643+01:00","updated_at":"2025-12-15T23:23:40.135323471+01:00","closed_at":"2025-12-15T23:23:40.135323471+01:00","dependencies":[{"issue_id":"workspace-9aa.2.1","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:33.907124+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.10","title":"Implement session management API","description":"REST endpoints: POST /api/sessions (start), DELETE /api/sessions/{id} (stop), GET /api/sessions (list user sessions), GET /api/sessions/{id} (status). Include template selection parameter.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:51.848866+01:00","updated_at":"2025-12-16T21:09:27.48391431+01:00","closed_at":"2025-12-16T09:03:51.690785+01:00","dependencies":[{"issue_id":"workspace-9aa.2.10","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:51.849368+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.10","depends_on_id":"workspace-9aa.2.5","type":"blocks","created_at":"2025-12-08T23:23:17.965325+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.10","depends_on_id":"workspace-9aa.2.8","type":"blocks","created_at":"2025-12-08T23:23:17.997129+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.11","title":"Implement admin observability endpoints","description":"PARTIAL: /admin/sessions and /admin/users endpoints exist. /health endpoint exists. Missing: SSE metrics stream, CPU/RAM/container stats collection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:21:54.074518+01:00","updated_at":"2025-12-25T23:54:45.028397379+01:00","closed_at":"2025-12-25T23:54:45.028397379+01:00","dependencies":[{"issue_id":"workspace-9aa.2.11","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:54.074978+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.11","depends_on_id":"workspace-9aa.2.5","type":"blocks","created_at":"2025-12-08T23:23:18.672155+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.11","depends_on_id":"workspace-9aa.2.8","type":"blocks","created_at":"2025-12-08T23:23:18.723163+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.12","title":"Add structured logging and error handling","description":"Implement tracing with tracing-subscriber for structured JSON logs. Consistent error types with thiserror. Request ID propagation. Log to journald-compatible format.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:21:55.941584+01:00","updated_at":"2025-12-16T21:09:27.485108937+01:00","closed_at":"2025-12-16T09:03:52.413285+01:00","dependencies":[{"issue_id":"workspace-9aa.2.12","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:55.942143+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.2","title":"Implement SQLite database layer with sqlx","description":"Set up sqlx with SQLite: migrations system, connection pooling, compile-time query checking. Schema for: users, projects, sessions, agent_templates. Include migration files.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:21:35.846028+01:00","updated_at":"2025-12-15T23:23:41.594608854+01:00","closed_at":"2025-12-15T23:23:41.594608854+01:00","dependencies":[{"issue_id":"workspace-9aa.2.2","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:35.846499+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.3","title":"Implement storage abstraction layer","description":"Trait-based storage abstraction with two implementations: LocalStorage (filesystem, for dev) and AzureBlobStorage (for prod). Operations: upload, download, list, delete, sync workspace to/from local.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:37.832516+01:00","updated_at":"2025-12-15T14:07:51.857923889+01:00","closed_at":"2025-12-15T14:07:51.85792622+01:00","dependencies":[{"issue_id":"workspace-9aa.2.3","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:37.833062+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.4","title":"Implement Podman container management","description":"Podman integration via podman CLI or varlink API: create container, start/stop, attach volumes, inject environment variables, get logs, get stats. Handle rootless mode. Abstract behind ContainerRuntime trait.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:21:39.941304+01:00","updated_at":"2025-12-15T23:23:43.064311624+01:00","closed_at":"2025-12-15T23:23:43.064311624+01:00","dependencies":[{"issue_id":"workspace-9aa.2.4","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:39.941769+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.5","title":"Implement session orchestration service","description":"Session lifecycle management: create session (validate user, sync workspace, generate AGENTS.md, start container), track active sessions, stop session (kill container, sync back to storage), handle timeouts and cleanup.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:21:42.094574+01:00","updated_at":"2025-12-15T23:34:16.362640992+01:00","closed_at":"2025-12-15T23:34:16.362640992+01:00","dependencies":[{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:42.095026+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.2.1","type":"blocks","created_at":"2025-12-08T23:23:14.115666+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.2.2","type":"blocks","created_at":"2025-12-08T23:23:14.147493+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.2.3","type":"blocks","created_at":"2025-12-08T23:23:14.178127+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.2.4","type":"blocks","created_at":"2025-12-08T23:23:14.20601+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.4.1","type":"blocks","created_at":"2025-12-08T23:23:39.180883+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.5","depends_on_id":"workspace-9aa.4.6","type":"blocks","created_at":"2025-12-08T23:23:39.818338+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.6","title":"Implement HTTP proxy for opencode API","description":"Proxy endpoint /api/session/{id}/code/* that forwards requests to container port 8080. Must support streaming responses (SSE/chunked transfer) for chat completions. Validate session ownership.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:45.58313+01:00","updated_at":"2025-12-16T21:09:27.485706886+01:00","closed_at":"2025-12-16T09:03:49.389715+01:00","dependencies":[{"issue_id":"workspace-9aa.2.6","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:45.583612+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.6","depends_on_id":"workspace-9aa.2.1","type":"blocks","created_at":"2025-12-08T23:23:15.037703+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.6","depends_on_id":"workspace-9aa.2.5","type":"blocks","created_at":"2025-12-08T23:23:15.070061+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.7","title":"Implement WebSocket proxy for terminal","description":"WebSocket endpoint /api/session/{id}/term that proxies to container port 9090 (ttyd). Handle connection upgrade, bidirectional message forwarding, connection cleanup on session end.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:46.512976+01:00","updated_at":"2025-12-16T21:09:27.486271085+01:00","closed_at":"2025-12-16T09:03:50.2449+01:00","dependencies":[{"issue_id":"workspace-9aa.2.7","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:46.513359+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.7","depends_on_id":"workspace-9aa.2.1","type":"blocks","created_at":"2025-12-08T23:23:15.845985+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.7","depends_on_id":"workspace-9aa.2.5","type":"blocks","created_at":"2025-12-08T23:23:15.876517+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.8","title":"Implement authentication middleware","description":"JWT validation middleware for API routes. Support two modes: OIDC token validation (prod) and dev-bypass with configurable test users. Extract user info and inject into request extensions.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:21:48.223605+01:00","updated_at":"2025-12-15T14:07:51.842879761+01:00","closed_at":"2025-12-15T14:07:51.842882441+01:00","dependencies":[{"issue_id":"workspace-9aa.2.8","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:48.224094+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.2.9","title":"Implement user and project management API","description":"REST endpoints: GET/POST /api/users (admin), GET /api/users/me, GET/POST/DELETE /api/projects, GET /api/projects/{id}. Include role-based access control (user, admin).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:21:50.291412+01:00","updated_at":"2025-12-16T21:09:27.486802604+01:00","closed_at":"2025-12-16T09:03:50.967385+01:00","dependencies":[{"issue_id":"workspace-9aa.2.9","depends_on_id":"workspace-9aa.2","type":"parent-child","created_at":"2025-12-08T23:21:50.291891+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.9","depends_on_id":"workspace-9aa.2.1","type":"blocks","created_at":"2025-12-08T23:23:16.939499+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.9","depends_on_id":"workspace-9aa.2.2","type":"blocks","created_at":"2025-12-08T23:23:16.969919+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.2.9","depends_on_id":"workspace-9aa.2.8","type":"blocks","created_at":"2025-12-08T23:23:16.999582+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3","title":"Frontend Application","description":"Next.js application with OIDC authentication (+ dev bypass), workspace picker, agent gallery, split-pane session view (chat, file tree, terminal, preview), admin dashboard, and i18n support (en/de).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T23:21:11.959428+01:00","updated_at":"2025-12-29T09:06:09.444877605+01:00","closed_at":"2025-12-29T09:06:09.444877605+01:00","dependencies":[{"issue_id":"workspace-9aa.3","depends_on_id":"workspace-9aa","type":"parent-child","created_at":"2025-12-08T23:21:11.959978+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.1","title":"Set up Next.js project structure and routing","description":"Reorganize app directory structure: (auth) group for login, (dashboard) group for authenticated routes, api routes for BFF pattern. Set up middleware for auth redirects.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:22:00.714997+01:00","updated_at":"2025-12-15T23:24:09.653207534+01:00","closed_at":"2025-12-15T23:24:09.653207534+01:00","dependencies":[{"issue_id":"workspace-9aa.3.1","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:00.715373+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.10","title":"Implement session view - terminal panel","description":"xterm.js terminal connected via WebSocket to /api/session/{id}/term. Support resize, copy/paste, scrollback. Conditionally hidden for non-tech templates (Research Assistant).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:17.393018+01:00","updated_at":"2025-12-15T23:36:02.761715498+01:00","closed_at":"2025-12-15T23:36:02.761715498+01:00","dependencies":[{"issue_id":"workspace-9aa.3.10","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:17.393437+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.10","depends_on_id":"workspace-9aa.3.12","type":"blocks","created_at":"2025-12-08T23:23:26.74978+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.11","title":"Implement session view - preview panel","description":"Safe iframe/sandbox for previewing documents: PDF viewer, HTML preview, image display. Used primarily for Research Assistant template instead of terminal.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:22:19.120366+01:00","updated_at":"2025-12-15T23:36:02.770144609+01:00","closed_at":"2025-12-15T23:36:02.770144609+01:00","dependencies":[{"issue_id":"workspace-9aa.3.11","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:19.120858+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.11","depends_on_id":"workspace-9aa.3.12","type":"blocks","created_at":"2025-12-08T23:23:26.780102+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.12","title":"Implement resizable split-pane layout","description":"Use react-resizable-panels for split-pane session view. Persist panel sizes. Support different layouts per template (chat+editor+terminal vs chat+preview).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:21.078607+01:00","updated_at":"2025-12-15T23:36:02.779459329+01:00","closed_at":"2025-12-15T23:36:02.779459329+01:00","dependencies":[{"issue_id":"workspace-9aa.3.12","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:21.079095+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.13","title":"Implement admin dashboard - overview","description":"Admin-only route /admin. Overview page: active sessions count, total users, system health. Cards linking to detailed views.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:22:22.628807+01:00","updated_at":"2025-12-15T23:36:02.79240683+01:00","closed_at":"2025-12-15T23:36:02.79240683+01:00","dependencies":[{"issue_id":"workspace-9aa.3.13","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:22.629186+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.13","depends_on_id":"workspace-9aa.3.4","type":"blocks","created_at":"2025-12-08T23:23:28.681762+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.13","depends_on_id":"workspace-9aa.3.16","type":"blocks","created_at":"2025-12-08T23:23:28.710886+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.14","title":"Implement admin dashboard - sessions list","description":"Table of all active sessions: user, project, template, duration, resource usage. Actions: view details, force-terminate. Real-time updates via SSE.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:22:24.430151+01:00","updated_at":"2025-12-15T23:36:02.804626492+01:00","closed_at":"2025-12-15T23:36:02.804626492+01:00","dependencies":[{"issue_id":"workspace-9aa.3.14","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:24.430585+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.14","depends_on_id":"workspace-9aa.3.13","type":"blocks","created_at":"2025-12-08T23:23:28.737446+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.15","title":"Implement admin dashboard - metrics charts","description":"Real-time charts using recharts: CPU usage, memory usage, network I/O, container count. Data from SSE /api/admin/metrics endpoint.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:22:25.820498+01:00","updated_at":"2025-12-15T23:36:02.814540901+01:00","closed_at":"2025-12-15T23:36:02.814540901+01:00","dependencies":[{"issue_id":"workspace-9aa.3.15","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:25.8209+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.15","depends_on_id":"workspace-9aa.3.13","type":"blocks","created_at":"2025-12-08T23:23:28.765531+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.16","title":"Create API client and React Query setup","description":"Set up TanStack Query for data fetching. Create typed API client functions for all backend endpoints. Handle loading states, errors, and optimistic updates.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:22:27.42383+01:00","updated_at":"2025-12-15T23:23:53.063505089+01:00","closed_at":"2025-12-15T23:23:53.063505089+01:00","dependencies":[{"issue_id":"workspace-9aa.3.16","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:27.424359+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.2","title":"Implement OIDC authentication with dev bypass","description":"DEFERRED: OIDC auth postponed. V1 uses invite code + JWT auth (see workspace-vj3). OIDC will be V2 feature for enterprise SSO integration.","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-08T23:22:03.028072+01:00","updated_at":"2025-12-29T09:06:50.974852119+01:00","closed_at":"2025-12-29T09:06:50.974852119+01:00","dependencies":[{"issue_id":"workspace-9aa.3.2","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:03.028588+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.3","title":"Set up internationalization (i18n) with next-intl","description":"Configure next-intl for en/de locales. Create translation files structure. Auto-detect locale from Accept-Language header. Persist preference in user profile. Wrap all static text in translation functions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:04.968134+01:00","updated_at":"2025-12-15T23:35:51.695882711+01:00","closed_at":"2025-12-15T23:35:51.695882711+01:00","dependencies":[{"issue_id":"workspace-9aa.3.3","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:04.968654+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.4","title":"Create shared layout with navigation","description":"Main app layout: sidebar navigation (workspaces, settings), header with user menu and language switcher, responsive design. Use Shadcn sidebar component.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:06.976929+01:00","updated_at":"2025-12-15T23:35:51.707117936+01:00","closed_at":"2025-12-15T23:35:51.707117936+01:00","dependencies":[{"issue_id":"workspace-9aa.3.4","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:06.977362+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.4","depends_on_id":"workspace-9aa.3.1","type":"blocks","created_at":"2025-12-08T23:23:22.931604+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.4","depends_on_id":"workspace-9aa.3.2","type":"blocks","created_at":"2025-12-08T23:23:22.963176+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.5","title":"Implement workspace picker page","description":"Grid view of user's projects/workspaces. Cards showing: project name, last accessed, template type. Actions: open, create new, delete. Fetch from /api/projects.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:08.943082+01:00","updated_at":"2025-12-15T23:35:51.717377173+01:00","closed_at":"2025-12-15T23:35:51.717377173+01:00","dependencies":[{"issue_id":"workspace-9aa.3.5","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:08.9435+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.5","depends_on_id":"workspace-9aa.3.4","type":"blocks","created_at":"2025-12-08T23:23:23.767186+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.5","depends_on_id":"workspace-9aa.3.16","type":"blocks","created_at":"2025-12-08T23:23:23.80108+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.6","title":"Implement agent gallery/selector","description":"Card-based agent template selection when starting a session. Show: template name, description, capabilities, restrictions. Highlight recommended template based on project type.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:10.633066+01:00","updated_at":"2025-12-15T23:35:51.73209216+01:00","closed_at":"2025-12-15T23:35:51.73209216+01:00","dependencies":[{"issue_id":"workspace-9aa.3.6","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:10.633488+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.6","depends_on_id":"workspace-9aa.3.4","type":"blocks","created_at":"2025-12-08T23:23:24.618384+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.6","depends_on_id":"workspace-9aa.3.16","type":"blocks","created_at":"2025-12-08T23:23:24.648151+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.7","title":"Implement session view - chat panel","description":"Left panel: streaming chat interface. Markdown rendering, code syntax highlighting, copy buttons. Input with file attachment support. Connect to /api/session/{id}/code/* endpoints.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:12.382246+01:00","updated_at":"2025-12-15T23:35:51.74171631+01:00","closed_at":"2025-12-15T23:35:51.74171631+01:00","dependencies":[{"issue_id":"workspace-9aa.3.7","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:12.382821+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.7","depends_on_id":"workspace-9aa.3.12","type":"blocks","created_at":"2025-12-08T23:23:25.592228+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.7","depends_on_id":"workspace-9aa.3.16","type":"blocks","created_at":"2025-12-08T23:23:25.622487+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.8","title":"Implement session view - file tree panel","description":"Right panel option: file tree explorer. Show workspace files, support expand/collapse folders, file icons by type. Click to open in editor or preview. Use react-arborist or similar.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:14.158834+01:00","updated_at":"2025-12-15T23:35:51.751483187+01:00","closed_at":"2025-12-15T23:35:51.751483187+01:00","dependencies":[{"issue_id":"workspace-9aa.3.8","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:14.159262+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.8","depends_on_id":"workspace-9aa.3.12","type":"blocks","created_at":"2025-12-08T23:23:26.690719+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.3.9","title":"Implement session view - code editor panel","description":"PARTIAL: Session view exists at frontend/apps/sessions/index.tsx. Code viewing works via react-syntax-highlighter (read-only). Missing: Monaco editor for actual code editing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:15.749764+01:00","updated_at":"2025-12-29T09:06:56.051109986+01:00","closed_at":"2025-12-29T09:06:56.051109986+01:00","dependencies":[{"issue_id":"workspace-9aa.3.9","depends_on_id":"workspace-9aa.3","type":"parent-child","created_at":"2025-12-08T23:22:15.750323+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.3.9","depends_on_id":"workspace-9aa.3.12","type":"blocks","created_at":"2025-12-08T23:23:26.722229+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4","title":"Agent Runtime \u0026 Templates","description":"Container image (Containerfile) with opencode, ttyd, and standard toolchain. Agent template configurations (AGENTS.md + opencode.json) for different personas: Coding Copilot, Research Assistant, Meeting Synth.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T23:21:14.716226+01:00","updated_at":"2025-12-29T09:06:14.521656444+01:00","closed_at":"2025-12-29T09:06:14.521656444+01:00","dependencies":[{"issue_id":"workspace-9aa.4","depends_on_id":"workspace-9aa","type":"parent-child","created_at":"2025-12-08T23:21:14.716662+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.1","title":"Create base agent-runtime Containerfile","description":"Containerfile for universal agent image. Base: debian:bookworm-slim. Install: opencode, ttyd, git, curl, ripgrep, python3, node, neovim, fd, yazi, tmux, pandoc, poppler-utils. Create non-root user. Expose ports 8080, 9090.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-08T23:22:34.804282+01:00","updated_at":"2025-12-15T23:34:41.980704561+01:00","closed_at":"2025-12-15T23:34:41.980704561+01:00","dependencies":[{"issue_id":"workspace-9aa.4.1","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:34.804644+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.2","title":"Create entrypoint script for container","description":"Bash entrypoint that: reads injected config, starts ttyd on port 9090 (tmux session), starts opencode HTTP server on port 8080, handles graceful shutdown signals.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:36.719843+01:00","updated_at":"2025-12-15T23:34:59.026548687+01:00","closed_at":"2025-12-15T23:34:59.026548687+01:00","dependencies":[{"issue_id":"workspace-9aa.4.2","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:36.720268+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.2","depends_on_id":"workspace-9aa.4.1","type":"blocks","created_at":"2025-12-08T23:23:33.371925+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.3","title":"Create Coding Copilot template configuration","description":"AGENTS.md + opencode.json for developer persona. Role: Senior Engineer. Tools enabled: shell, git, edit, write. Network: unrestricted. Include system prompt optimized for coding assistance.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:39.220316+01:00","updated_at":"2025-12-16T21:09:27.48853002+01:00","closed_at":"2025-12-16T09:04:05.923536+01:00","dependencies":[{"issue_id":"workspace-9aa.4.3","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:39.220773+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.3","depends_on_id":"workspace-9aa.4.1","type":"blocks","created_at":"2025-12-08T23:23:33.404134+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.4","title":"Create Research Assistant template configuration","description":"AGENTS.md + opencode.json for knowledge worker persona. Role: Analyst. Tools enabled: read, search, summarize. Block: bash, write_code. Network: restricted. System prompt for document analysis.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:40.955721+01:00","updated_at":"2025-12-16T21:09:27.489083039+01:00","closed_at":"2025-12-16T09:04:06.497875+01:00","dependencies":[{"issue_id":"workspace-9aa.4.4","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:40.956207+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.4","depends_on_id":"workspace-9aa.4.1","type":"blocks","created_at":"2025-12-08T23:23:33.43105+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.5","title":"Create Meeting Synth template configuration","description":"AGENTS.md + opencode.json for manager/secretary persona. Role: Secretary. Tools enabled: transcript parsing, summarization. Block: all exec. System prompt for meeting notes and action items.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:22:43.114973+01:00","updated_at":"2025-12-16T21:09:27.489630707+01:00","closed_at":"2025-12-16T09:04:07.282421+01:00","dependencies":[{"issue_id":"workspace-9aa.4.5","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:43.115465+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.5","depends_on_id":"workspace-9aa.4.1","type":"blocks","created_at":"2025-12-08T23:23:33.457947+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.6","title":"Implement template generation system in backend","description":"Backend module that generates final AGENTS.md from template + user-specific variables (name, project context). Uses Tera or similar templating. Injects into container at /workspace/.opencode/AGENTS.md.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T23:22:46.482514+01:00","updated_at":"2025-12-29T09:07:01.119289914+01:00","closed_at":"2025-12-29T09:07:01.119289914+01:00","dependencies":[{"issue_id":"workspace-9aa.4.6","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:46.482985+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.6","depends_on_id":"workspace-9aa.4.3","type":"blocks","created_at":"2025-12-08T23:23:34.297084+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.6","depends_on_id":"workspace-9aa.4.4","type":"blocks","created_at":"2025-12-08T23:23:34.330588+01:00","created_by":"daemon"}]}
{"id":"workspace-9aa.4.7","title":"Add byteowlz toolbox to container image","description":"Install custom tools in container: lst, mmry, sx, scrpr, tmpltr. Either compile from source during build or download pre-built binaries. Configure tool paths in AGENTS.md.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T23:22:49.727508+01:00","updated_at":"2025-12-29T09:07:06.196820158+01:00","closed_at":"2025-12-29T09:07:06.196820158+01:00","dependencies":[{"issue_id":"workspace-9aa.4.7","depends_on_id":"workspace-9aa.4","type":"parent-child","created_at":"2025-12-08T23:22:49.727881+01:00","created_by":"daemon"},{"issue_id":"workspace-9aa.4.7","depends_on_id":"workspace-9aa.4.1","type":"blocks","created_at":"2025-12-08T23:23:35.065766+01:00","created_by":"daemon"}]}
{"id":"workspace-9ak","title":"MEDIUM: HTTP client created per request (performance)","description":"backend/src/api/proxy.rs:98 - A new HTTP client is created for every proxy request. HTTP clients should be reused for connection pooling benefits. FIX: Store client in AppState or use lazy_static.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:44:45.569516115+01:00","updated_at":"2025-12-17T16:17:42.892509069+01:00","closed_at":"2025-12-17T16:17:42.892509069+01:00"}
{"id":"workspace-9cjp","title":"Implement Local backend with systemd user services","description":"Local multi-user backend: octo-agent runs as systemd user service (octo-agent@username). Exposes Unix socket at /run/octo/agent-{user}.sock. Agent reads user's opencode history and spawns opencode as that user. Implements AgentRPC interface.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T13:23:24.139098522+01:00","updated_at":"2025-12-30T13:40:40.419322143+01:00","closed_at":"2025-12-30T13:40:40.419322143+01:00"}
{"id":"workspace-9fiq","title":"Agent creator UI with form fields","description":"UI form to create/edit opencode agents: name, description, mode (primary/subagent), model selector, prompt editor, tools toggles, permissions config. Saves as .opencode/agent/*.md","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T12:50:11.396949217+01:00","updated_at":"2025-12-29T15:18:15.294583032+01:00","closed_at":"2025-12-29T15:18:15.294583032+01:00"}
{"id":"workspace-9oq","title":"Route fileserver requests through backend proxy with auth","description":"Update backend proxy layer to route fileserver requests (/sessions/{id}/files/*) through authenticated endpoints. Validate session ownership before proxying to container's fileserver port. Handle upload size limits at proxy level.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T22:36:09.421962+01:00","updated_at":"2025-12-15T23:35:16.885067071+01:00","closed_at":"2025-12-15T23:35:16.885067071+01:00"}
{"id":"workspace-9rz","title":"LOW: Inefficient string allocation for extension checks","description":"fileserver/src/handlers.rs:249,340 - Creating new String with format!('.{}', ...) for every file just to check extensions. FIX: Store extensions without dot in config, use OsStr comparison.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:36.592481971+01:00","updated_at":"2025-12-29T09:15:01.799799204+01:00","closed_at":"2025-12-29T09:15:01.799799204+01:00"}
{"id":"workspace-9to","title":"Code Duplication: SQL SELECT column list repeated in 6+ repository methods without a const or macro","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:13:54.982392244+01:00","updated_at":"2025-12-29T09:14:11.056600845+01:00","closed_at":"2025-12-29T09:14:11.056600845+01:00"}
{"id":"workspace-9uvd","title":"Show persona in chat history list","description":"Chat history should show which persona each conversation was with (avatar thumbnail or name badge).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T12:26:46.235978838+01:00","updated_at":"2025-12-29T09:09:52.91073672+01:00","closed_at":"2025-12-29T09:09:52.91073672+01:00","dependencies":[{"issue_id":"workspace-9uvd","depends_on_id":"workspace-zln","type":"blocks","created_at":"2025-12-28T12:26:58.307039024+01:00","created_by":"wismut"}]}
{"id":"workspace-9wu5","title":"Projects view: list workspace directories","description":"New Projects tab showing directories in workspace. Each project shows: name, session count, last active, default agent. Click to filter chats by project.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:20:16.516976694+01:00","updated_at":"2025-12-29T15:18:15.293794794+01:00","closed_at":"2025-12-29T15:18:15.293794794+01:00"}
{"id":"workspace-9xw","title":"SSE connection failure to opencode event API endpoint","description":"Firefox can't establish a connection to the server at http://archlinux:3000/api/opencode/event. SSE connection failing repeatedly.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T16:24:04.331333402+01:00","updated_at":"2025-12-15T17:43:14.958482083+01:00","closed_at":"2025-12-15T17:43:14.958482083+01:00"}
{"id":"workspace-a8n","title":"MEDIUM: Duplicate proxy error handling","description":"backend/src/api/proxy.rs:23-35,47-59,117-125 - Session lookup and inactive session checking duplicated across three proxy handlers. FIX: Extract to helper function get_active_session().","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:44:58.002995732+01:00","updated_at":"2025-12-29T09:08:39.456701545+01:00","closed_at":"2025-12-29T09:08:39.456701545+01:00"}
{"id":"workspace-aasa","title":"Per-chat agent working indicator","description":"Agent working indicator is currently global. Should be per-chat so switching chats shows correct state for each conversation.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T14:05:35.090311043+01:00","updated_at":"2025-12-29T14:10:56.399151755+01:00","closed_at":"2025-12-29T14:10:56.399151755+01:00"}
{"id":"workspace-acx","title":"Define default persona (govnr)","description":"Create the default persona that lives in a special 'govnr' subdirectory with:\n\n1. **Workdir structure:**\n   - Location: `~/workspace/.govnr/` or configurable via config.toml\n   - Contains general AGENTS.md with broad permissions and overview\n   - Acts as the 'governor' persona for general-purpose tasks\n\n2. **AGENTS.md content:**\n   - General coding assistant role\n   - Broad tool permissions (all standard tools enabled)\n   - No domain-specific restrictions\n   - References to available skills\n\n3. **Default permissions (opencode format):**\n   ```json\n   {\n     \"edit\": \"allow\",\n     \"bash\": \"ask\",\n     \"skill\": \"allow\",\n     \"webfetch\": \"allow\",\n     \"doom_loop\": \"ask\",\n     \"external_directory\": \"ask\"\n   }\n   ```\n\n4. **Config.toml integration:**\n   - Add `[agent]` section with:\n     - `workdir` - path to main agent working directory\n     - `default_persona` - name of default persona ('govnr')\n   - Add `[personas]` section for persona discovery paths\n\nThis persona is used when no specific persona is selected.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T09:37:59.932696227+01:00","updated_at":"2025-12-28T10:00:41.098686888+01:00","closed_at":"2025-12-28T10:00:41.098686888+01:00"}
{"id":"workspace-ahuw","title":"Define AgentRPC interface for unified local/docker backends","description":"Create a common AgentRPC interface that both Local and Docker backends implement: ListConversations(), GetConversation(id), StartSession(workdir, opts), Attach(session_id) -\u003e stream, StopSession(session_id), Health(). This abstraction allows octo-server to use identical code path regardless of backend.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T13:23:21.578250236+01:00","updated_at":"2025-12-30T13:40:30.16538074+01:00","closed_at":"2025-12-30T13:40:30.16538074+01:00"}
{"id":"workspace-bb6","title":"Fix KnightRiderSpinner 60fps animation - use CSS animations or requestAnimationFrame","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T13:46:01.621434+01:00","updated_at":"2025-12-17T16:48:20.466956341+01:00","closed_at":"2025-12-17T16:48:20.466956341+01:00"}
{"id":"workspace-bc0","title":"Create docker-compose with Traefik and internal network","description":"Update compose files to use Traefik as reverse proxy with internal network for container isolation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T12:05:45.928646+01:00","updated_at":"2025-12-12T12:10:13.40374+01:00","closed_at":"2025-12-12T12:10:13.40374+01:00"}
{"id":"workspace-bd08","title":"Lazy startup of opencode on message send","description":"OpenCode should only start when user sends a message, not when viewing history. The ensureOpencodeRunning() function needs to be called from the chat input component.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T04:21:51.214910888+01:00","updated_at":"2025-12-30T09:22:04.76385287+01:00","closed_at":"2025-12-30T09:22:04.76385287+01:00"}
{"id":"workspace-bp30","title":"Agents view: list and manage opencode agents","description":"New Agents tab showing available opencode agents. List agents from ~/.config/opencode/agent/ and .opencode/agent/. Show name, description, mode (primary/subagent). Can launch chat with any agent.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:20:29.240117033+01:00","updated_at":"2025-12-29T15:18:15.294200403+01:00","closed_at":"2025-12-29T15:18:15.294200403+01:00"}
{"id":"workspace-btb","title":"HIGH: Full file read into memory for downloads","description":"fileserver/src/handlers.rs:391-412 - The get_file handler reads entire file into memory with fs::read(). For large files this causes high memory usage and slow response times. FIX: Use streaming with tokio_util::io::ReaderStream and Body::from_stream().","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T23:44:32.657199101+01:00","updated_at":"2025-12-16T06:09:36.548145405+01:00","closed_at":"2025-12-16T06:09:36.548145405+01:00"}
{"id":"workspace-bxo","title":"Integrate fileserver API into frontend file browser","description":"Update frontend file-service.ts to use new Rust fileserver endpoints: GET /tree for directory listing, GET /file for content, POST /file for uploads, DELETE /file for deletion. Support both full and simple view modes via query param.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T22:34:56.303022+01:00","updated_at":"2025-12-15T23:35:31.147802893+01:00","closed_at":"2025-12-15T23:35:31.147802893+01:00"}
{"id":"workspace-c1h","title":"Persona system: Core architecture","description":"Implement persona selection system that lets users choose a persona for each chat session.\n\nA **Persona** combines four components:\n1. **Workdir** - Working directory with AGENTS.md (job description)\n2. **Permissions** - opencode built-in tool permissions configuration\n3. **Tools** - Available MCP tools and external integrations  \n4. **Skills** - Skills at `.opencode/skill/\u003cname\u003e/SKILL.md` (opencode discovery path)\n\n## Implementation Approach: TBD\n\n**Option 1: x-opencode-directory header (simpler if it works)**\n- Single opencode server per container\n- Pass directory per request via `x-opencode-directory` header\n- **BLOCKER**: Need to verify session behavior - see workspace-npk\n\n**Option 2: One opencode server per persona (current multi-agent approach)**\n- Multiple opencode instances on different ports\n- Each persona = separate opencode server in its directory\n- Already partially implemented in workspace-ivc\n\n**Decision**: Investigate x-opencode-directory first (workspace-npk), fall back to Option 2 if it doesn't work cleanly.\n\n## Data Model\n\n```\nPersona {\n  id: string\n  name: string\n  description: string\n  workdir: string           // path to persona directory\n  permissions: {\n    edit: 'allow' | 'ask' | 'deny'\n    bash: 'allow' | 'ask' | 'deny' | Record\u003cstring, 'allow'|'ask'|'deny'\u003e\n    skill: 'allow' | 'ask' | 'deny' | Record\u003cstring, 'allow'|'ask'|'deny'\u003e\n    webfetch: 'allow' | 'ask' | 'deny'\n    doom_loop: 'allow' | 'ask' | 'deny'\n    external_directory: 'allow' | 'ask' | 'deny'\n  }\n  tools: string[]           // enabled MCP tool names\n  color: string             // UI accent color\n  icon: string              // optional icon/emoji\n}\n```\n\n## Persona Directory Structure\n\n```\n~/workspace/personas/\n govnr/                  # Default general-purpose persona\n    AGENTS.md           # Job description\n    persona.toml        # Persona config (permissions, metadata)\n    .opencode/\n        opencode.json   # Permissions config\n        skill/          # Persona-specific skills\n            general-coding/SKILL.md\n doc-writer/\n     AGENTS.md\n     persona.toml\n     .opencode/\n         skill/\n             technical-writing/SKILL.md\n```\n\n## Dependencies\n- workspace-npk: Investigate x-opencode-directory behavior\n\n## Components\n- Backend: Persona registry, CRUD API, session binding\n- Frontend: Persona picker UI, per-chat persona display\n- Container: Depends on chosen approach","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-28T09:38:17.540990324+01:00","updated_at":"2025-12-29T09:03:41.57967385+01:00","closed_at":"2025-12-29T09:03:41.57967385+01:00"}
{"id":"workspace-c1h.1","title":"Persona system: Backend API","description":"Implement backend API for persona management.\n\n## Endpoints\n\n```\nGET    /api/personas              # List all personas for user\nGET    /api/personas/:id          # Get persona details\nPOST   /api/personas              # Create new persona\nPUT    /api/personas/:id          # Update persona\nDELETE /api/personas/:id          # Delete persona\n\nPOST   /api/sessions              # Add persona_id to create request\nGET    /api/sessions/:id          # Include current persona in response\nPATCH  /api/sessions/:id/persona  # Switch persona mid-session\n```\n\n## Database Schema\n\n```sql\nCREATE TABLE personas (\n  id TEXT PRIMARY KEY,\n  user_id TEXT NOT NULL,\n  name TEXT NOT NULL,\n  description TEXT,\n  workdir TEXT NOT NULL,\n  permissions TEXT NOT NULL,  -- JSON\n  tools TEXT,                 -- JSON array\n  skills TEXT,                -- JSON array  \n  color TEXT,\n  icon TEXT,\n  created_at TEXT NOT NULL,\n  updated_at TEXT NOT NULL,\n  FOREIGN KEY (user_id) REFERENCES users(id)\n);\n\n-- Add persona_id to sessions\nALTER TABLE sessions ADD COLUMN persona_id TEXT REFERENCES personas(id);\n```\n\n## Implementation\n- Add personas module to backend/src/\n- Persona service with CRUD operations\n- Scan workspace/personas/ for filesystem-based personas\n- Merge DB personas with filesystem personas","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:38:33.007514337+01:00","updated_at":"2025-12-29T08:56:07.111778729+01:00","closed_at":"2025-12-29T08:56:07.111778729+01:00","dependencies":[{"issue_id":"workspace-c1h.1","depends_on_id":"workspace-c1h","type":"parent-child","created_at":"2025-12-28T09:38:33.008142475+01:00","created_by":"wismut"}]}
{"id":"workspace-c1h.2","title":"Persona system: Frontend picker UI","description":"Implement persona selection UI in the frontend.\n\n## Components\n\n### 1. Persona Picker (New Chat)\n- Modal or dropdown when starting new chat\n- Shows persona cards with:\n  - Name and description\n  - Color accent indicator\n  - Permission summary (icons for shell/file/network)\n  - Skill count badge\n- Default selection: 'govnr' persona\n- Search/filter for many personas\n\n### 2. Persona Indicator (Active Chat)\n- Small badge in chat header showing current persona\n- Click to view persona details\n- Option to switch persona (creates new session or migrates)\n\n### 3. Persona Management Page\n- List all personas (system + custom)\n- Create new persona wizard\n- Edit persona (name, description, permissions)\n- Delete custom personas (can't delete system ones)\n\n## State Management\n- Add persona to session state\n- Fetch personas on app load\n- Cache persona list\n\n## API Integration\n- GET /api/personas on mount\n- Include persona_id in session create request\n- Display persona info from session response","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:38:48.215040352+01:00","updated_at":"2025-12-29T08:56:19.623486465+01:00","closed_at":"2025-12-29T08:56:19.623486465+01:00","dependencies":[{"issue_id":"workspace-c1h.2","depends_on_id":"workspace-c1h","type":"parent-child","created_at":"2025-12-28T09:38:48.21591621+01:00","created_by":"wismut"}]}
{"id":"workspace-c1h.3","title":"Persona system: Container injection","description":"Inject persona configuration into opencode requests via header.\n\n## Key Insight: No Container Changes Needed\n\nopencode supports `x-opencode-directory` header - we just need to add this header when proxying requests.\n\n## Implementation\n\n### Backend Proxy Update\n\nIn `backend/src/api/proxy.rs`, add the directory header:\n\n```rust\nasync fn proxy_to_opencode(\n    session: \u0026Session,\n    persona: Option\u003c\u0026Persona\u003e,\n    req: Request,\n) -\u003e Result\u003cResponse\u003e {\n    let mut headers = req.headers().clone();\n    \n    // Add persona workdir if set\n    if let Some(p) = persona {\n        headers.insert(\n            \"x-opencode-directory\",\n            HeaderValue::from_str(\u0026p.workdir)?\n        );\n    }\n    \n    // Forward to opencode...\n}\n```\n\n### Persona Directory Setup\n\nEach persona directory needs:\n```\n~/workspace/personas/\u003cname\u003e/\n AGENTS.md              # Read by opencode automatically\n persona.toml           # Our config (permissions, metadata)\n .opencode/\n     opencode.json      # Permissions config\n     skill/             # Persona-specific skills\n         \u003cskill-name\u003e/SKILL.md\n```\n\n### opencode.json per Persona\n\nGenerate or maintain per-persona opencode.json:\n```json\n{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \"permission\": {\n    \"edit\": \"allow\",\n    \"bash\": \"ask\",\n    \"skill\": \"allow\",\n    \"webfetch\": \"allow\",\n    \"doom_loop\": \"ask\",\n    \"external_directory\": \"ask\"\n  }\n}\n```\n\n### What We DON'T Need\n- ~~Multiple opencode servers~~\n- ~~Container restart on persona switch~~\n- ~~Environment variable injection~~\n- ~~entrypoint.sh changes~~\n\n## Benefits\n- Instant persona switching (no restart)\n- Simpler architecture\n- Less resource usage\n- Easier testing","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:39:04.663598319+01:00","updated_at":"2025-12-29T09:04:16.655137781+01:00","closed_at":"2025-12-29T09:04:16.655137781+01:00","dependencies":[{"issue_id":"workspace-c1h.3","depends_on_id":"workspace-c1h","type":"parent-child","created_at":"2025-12-28T09:39:04.664536417+01:00","created_by":"wismut"}]}
{"id":"workspace-c7l","title":"Configure Caddy for SSE proxy passthrough","description":"Caddy needs proper configuration to proxy SSE (Server-Sent Events) without buffering.\n\nTasks:\n- Add flush_interval directive to disable response buffering for /session/*/code/event routes\n- Configure proper timeouts for long-lived SSE connections\n- Test SSE streaming through Caddy with curl\n- Document Caddy SSE configuration in container/caddy/","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T09:58:38.412245+01:00","updated_at":"2025-12-29T09:12:54.93306416+01:00","closed_at":"2025-12-29T09:12:54.93306416+01:00"}
{"id":"workspace-c84","title":"Create Caddy configuration for dynamic container routing","description":"Set up Caddy reverse proxy with REST API for dynamic route management. Rust backend will call Caddy admin API to add/remove routes when spawning containers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T12:08:39.050861+01:00","updated_at":"2025-12-12T12:09:59.075826+01:00","closed_at":"2025-12-12T12:09:59.075826+01:00"}
{"id":"workspace-cbm","title":"LOW: Verbose pattern match could use if-let","description":"backend/src/user/service.rs:181-193 - Match with Some(user) if user.is_active is verbose. FIX: Use if let with guard or Option::filter.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:27.684812346+01:00","updated_at":"2025-12-29T09:15:39.925310994+01:00","closed_at":"2025-12-29T09:15:39.925310994+01:00"}
{"id":"workspace-cfg0","title":"Meta-agent sidebar for agent building","description":"AI assistant sidebar in agent creator that helps users build agents. User describes what they want, AI suggests prompt, tools, permissions. Can iterate and refine.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T12:50:22.399712951+01:00","updated_at":"2025-12-29T15:18:15.294990761+01:00","closed_at":"2025-12-29T15:18:15.294990761+01:00"}
{"id":"workspace-cjs","title":"Fix Dockerfile.arm64 parity + remove chsh","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-18T22:23:21.087422318+01:00","updated_at":"2025-12-18T22:23:48.209252137+01:00","closed_at":"2025-12-18T22:23:48.209252137+01:00","dependencies":[{"issue_id":"workspace-cjs","depends_on_id":"workspace-nk8","type":"discovered-from","created_at":"2025-12-18T22:23:21.104576454+01:00","created_by":"wismut"}]}
{"id":"workspace-crz","title":"Correctness: register handler validates invite then creates user then consumes - TOCTOU vulnerability","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T21:14:47.776219513+01:00","updated_at":"2025-12-16T22:06:19.214999687+01:00","closed_at":"2025-12-16T22:06:19.214999687+01:00"}
{"id":"workspace-cw5","title":"LOW: Minimum password length too short (6 chars)","description":"backend/src/user/service.rs:47-49 - Minimum password length is only 6 characters, too short for adequate security. FIX: Increase minimum to at least 8 characters, consider adding complexity requirements.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:18.222375838+01:00","updated_at":"2025-12-18T16:51:54.06840017+01:00","closed_at":"2025-12-18T16:51:54.06840017+01:00"}
{"id":"workspace-cyl","title":"API /api/opencode/event returning Internal Server Error","description":"Failed to load sessions: Error: Internal Server Error from /api/opencode/event endpoint.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T16:24:04.229090041+01:00","updated_at":"2025-12-15T17:42:57.329697099+01:00","closed_at":"2025-12-15T17:42:57.329697099+01:00"}
{"id":"workspace-czk","title":"LOW: Using to_string_lossy without handling invalid UTF-8","description":"fileserver/src/handlers.rs:235,315,353,398 - to_string_lossy() replaces invalid UTF-8 with replacement character. Could cause issues with non-UTF-8 filenames. FIX: Document limitation or reject non-UTF-8 explicitly.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:46.39054788+01:00","updated_at":"2025-12-29T09:14:36.434167536+01:00","closed_at":"2025-12-29T09:14:36.434167536+01:00"}
{"id":"workspace-d89","title":"Idiomatic: Replace manual string building with format! or write! macros in container command args","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:14:08.891575499+01:00","updated_at":"2025-12-29T09:13:50.761000954+01:00","closed_at":"2025-12-29T09:13:50.761000954+01:00"}
{"id":"workspace-dk5","title":"Fix skill locations to match opencode discovery paths","description":"Current skill locations don't match opencode's discovery paths.\n\n## Current (BROKEN)\n```\n~/workspace/skills/\u003cname\u003e/SKILL.md\n```\n\n## Required (opencode discovery paths)\n```\n.opencode/skill/\u003cname\u003e/SKILL.md        # Project-local\n~/.config/opencode/skill/\u003cname\u003e/SKILL.md  # Global\n.claude/skills/\u003cname\u003e/SKILL.md         # Claude-compatible\n```\n\n## Fix Required\n\n### 1. Move existing skills\nMove from:\n```\ncontainer/skel/workspace/skills/\ndata/home/default/workspace/skills/\n```\n\nTo:\n```\ncontainer/skel/.opencode/skill/\ndata/home/default/.opencode/skill/\n```\n\n### 2. Update container skeleton\n- Move skills to `.opencode/skill/` in skel\n- Ensure copied to user home on container start\n\n### 3. Update persona system\nPersonas should reference skills at the correct path:\n```\n~/workspace/personas/\u003cpersona\u003e/.opencode/skill/\u003cname\u003e/SKILL.md\n```\nOr use global skills at:\n```\n~/.config/opencode/skill/\u003cname\u003e/SKILL.md\n```\n\n### 4. Skill files to migrate\n- pdf, pptx, docx, xlsx\n- webapp-testing, web-artifacts-builder\n- slack-gif-creator, skill-creator\n- frontend-design, canvas-design, doc-coauthoring","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-28T09:42:02.915248193+01:00","updated_at":"2025-12-29T09:04:31.861082816+01:00","closed_at":"2025-12-29T09:04:31.861082816+01:00"}
{"id":"workspace-dku","title":"HIGH: Auth cookie missing Secure flag","description":"backend/src/api/handlers.rs:187-191 - The authentication cookie is set without the Secure flag, allowing it to be transmitted over unencrypted HTTP connections. FIX: Add Secure flag when in production mode.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T23:44:22.656486428+01:00","updated_at":"2025-12-16T06:08:15.32459614+01:00","closed_at":"2025-12-16T06:08:15.32459614+01:00"}
{"id":"workspace-dnv0","title":"Session lifecycle: idle timeout and LRU cleanup","description":"Implement automatic cleanup of workspace sessions: 1) Track last_activity_at timestamp per session, 2) Auto-stop sessions after configurable idle timeout (default 30min), 3) LRU cap to limit max concurrent sessions (default 3), stopping oldest idle when exceeded.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-30T09:12:21.412660061+01:00","updated_at":"2025-12-30T09:22:03.527730738+01:00","closed_at":"2025-12-30T09:22:03.527730738+01:00"}
{"id":"workspace-do4","title":"Idiomatic: Use From trait instead of into() calls for type conversions where possible","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:14:07.70110346+01:00","updated_at":"2025-12-29T09:13:55.837156408+01:00","closed_at":"2025-12-29T09:13:55.837156408+01:00"}
{"id":"workspace-dqo","title":"Idiomatic: Replace Vec\u003cString\u003e bind_values pattern with query builder or typed query approach","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:14:17.713891372+01:00","updated_at":"2025-12-29T09:11:09.039768301+01:00","closed_at":"2025-12-29T09:11:09.039768301+01:00"}
{"id":"workspace-e4c","title":"Security: proxy_request forwards all headers including potentially sensitive ones to containers","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:13:31.26961428+01:00","updated_at":"2025-12-29T09:11:24.267097344+01:00","closed_at":"2025-12-29T09:11:24.267097344+01:00"}
{"id":"workspace-e6k","title":"Implement user file injection via @filename references","description":"Allow users to reference files from their general workspace using @filename syntax. Orchestrator/control plane intercepts these references and copies files to container's /useruploads/ directory. Files become available to the agent session.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-15T22:35:09.814848+01:00","updated_at":"2025-12-29T09:09:04.816986335+01:00","closed_at":"2025-12-29T09:09:04.816986335+01:00"}
{"id":"workspace-eah","title":"LOW: Magic numbers without constants","description":"backend/src/session/service.rs:167 - Duration::from_secs(2) is a magic number for service startup wait time. FIX: Define as named constant CONTAINER_STARTUP_WAIT_SECS.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:29.471160204+01:00","updated_at":"2025-12-29T09:15:44.996562726+01:00","closed_at":"2025-12-29T09:15:44.996562726+01:00"}
{"id":"workspace-eeg","title":"Memoize markdown-renderer components to prevent expensive re-renders","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T13:46:02.560813+01:00","updated_at":"2025-12-17T16:48:21.668039988+01:00","closed_at":"2025-12-17T16:48:21.668039988+01:00"}
{"id":"workspace-egj","title":"Mobile UI optimizations: native app feel","description":"Comprehensive mobile UI improvements to make the frontend feel more like a native app.\n\n## Changes Made\n\n### Viewport \u0026 Touch Behavior (layout.tsx)\n- Added viewport meta with maximumScale=1, userScalable=false to prevent auto-zoom on input focus\n- Prevents pull-to-refresh with overscroll-behavior: none\n\n### Sidebar Compactness (page.tsx)\n- Reduced logo container from h-24 to h-20, logo from h-20 to h-14\n- Nav items: reduced spacing (space-y-2), padding (px-3 py-2.5), font size (text-xs)\n- New Chat button made smaller (size=sm, text-xs)\n- Bottom buttons padding reduced (pb-4 instead of pb-8)\n\n### Mobile Nav as Icon Row (page.tsx)\n- Top nav items displayed as horizontal icon row with labels below\n- More compact and native-app-like appearance\n\n### Mobile Header with Session Info (page.tsx)\n- Session title, readable ID, and date now displayed in the center of the mobile header bar\n- Falls back to logo when no session selected\n- Removed duplicate SessionHeader from mobile chat view\n\n### Chat Horizontal Scroll Prevention (markdown-renderer.tsx, globals.css, sessions/index.tsx)\n- Added wrapLongLines=true to SyntaxHighlighter\n- Code blocks: overflow-x hidden, word-break break-word, smaller font (0.75rem)\n- Message cards: overflow-hidden, reduced margins on mobile (ml-4 sm:ml-8)\n- CSS: markdown-content word wrapping, overscroll-behavior none, touch scrolling\n\n### Search Input Padding\n- Increased padding around magnifying glass icon in both mobile and desktop search bars\n\n### JAK Feature Removal\n- Removed SnowOverlay component and all JAK-related code\n- Removed Snowflake icon import and audio element\n\n### Admin Button Relocation\n- Moved Admin button from main nav to bottom row with Theme and Language toggles\n- Filtered out admin from main nav iteration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T04:24:06.586540273+01:00","updated_at":"2025-12-27T04:24:25.345655093+01:00","closed_at":"2025-12-27T04:24:25.345657882+01:00"}
{"id":"workspace-eje","title":"Correctness: Race condition between port allocation query and container creation","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:14:31.832382063+01:00","updated_at":"2025-12-29T09:11:03.972827547+01:00","closed_at":"2025-12-29T09:11:03.972827547+01:00"}
{"id":"workspace-eo1i","title":"Fix message flickering during polling updates","description":"Fixed assistant messages disappearing and reappearing when message parts were updated during agent work.\n\n## Root Cause\n1. loadMessages() was replacing the entire messages array without preserving object references\n2. MessageGroupCard key was based on startIndex which changed when message structure changed\n3. React was unmounting/remounting components unnecessarily\n\n## Fix\n- Added mergeMessages() function that preserves existing message object references when content hasn't changed\n- Only returns new object reference when message has actually been modified (new parts, text changes, tool state changes)\n- Changed MessageGroupCard key from `${group.role}-${group.startIndex}` to use first message ID (stable)\n- Both loadMessages() and polling effect now use the same merge function\n- Removed startTransition which could cause visual glitches\n\n## Files Changed\n- frontend/apps/sessions/index.tsx","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T00:32:15.411650192+01:00","updated_at":"2025-12-31T00:32:28.953028997+01:00","closed_at":"2025-12-31T00:32:28.953028997+01:00"}
{"id":"workspace-eq9","title":"Security: Weak JWT secret generation uses non-cryptographic PRNG","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T21:13:20.953694324+01:00","updated_at":"2025-12-16T21:59:02.817723232+01:00","closed_at":"2025-12-16T21:59:02.817723232+01:00"}
{"id":"workspace-er5","title":"React hydration mismatch due to Dark Reader browser extension","description":"A tree hydrated but some attributes of the server rendered HTML didn't match the client properties. Specifically, Dark Reader browser extension adds data-darkreader-mode and data-darkreader-scheme attributes to html element that weren't present on server.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T16:24:03.573953059+01:00","updated_at":"2025-12-15T17:44:17.329353041+01:00","closed_at":"2025-12-15T17:44:17.329353041+01:00"}
{"id":"workspace-f7j","title":"Enhance FileTreeView with collapsible folders, navigation, and state persistence","description":"Improved file browser: (1) Tree view with collapsible folders, (2) Breadcrumb navigation, (3) Go up/home buttons, (4) Double-click to navigate into folders, (5) State persistence when switching views (path, expanded folders, selection), (6) Image preview support","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T20:40:34.762722+01:00","updated_at":"2025-12-17T20:40:47.262535+01:00","closed_at":"2025-12-17T20:40:47.262535+01:00"}
{"id":"workspace-fv3","title":"LOW: Repeated SuccessResponse construction","description":"fileserver/src/handlers.rs:492-496,524-528,539-543,553-557 - Similar SuccessResponse construction patterns appear multiple times. FIX: Add constructor methods SuccessResponse::ok().","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:40.117045851+01:00","updated_at":"2025-12-29T09:14:51.658651338+01:00","closed_at":"2025-12-29T09:14:51.658651338+01:00"}
{"id":"workspace-gfo","title":"Fix podman JSON parsing for Created field returning integer instead of string","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T21:33:22.839682397+01:00","updated_at":"2025-12-17T21:33:27.471379302+01:00","closed_at":"2025-12-17T21:33:27.471379302+01:00"}
{"id":"workspace-gg16","title":"Integrate mmry memory system into Octo frontend","description":"Add a Memories tab to Octo UI allowing users to view, search, add, edit, and delete memories. Uses hub-spoke architecture: central mmry-service on host handles embeddings/reranking, per-user lean mmry instances maintain isolated databases. Backend proxies requests to user's mmry instance.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-31T09:56:05.82146616+01:00","updated_at":"2025-12-31T09:56:05.82146616+01:00"}
{"id":"workspace-gg16.1","title":"Host: Configure central mmry-service for embeddings","description":"Set up mmry-service on host with external_api enabled. Exposes /v1/embeddings and /v1/rerank endpoints. Configure GPU model (nomic-embed-text-v1.5). Add to systemd or docker-compose. Generate shared API key for user instances.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:56:16.527002968+01:00","updated_at":"2025-12-31T13:25:51.982858296+01:00","closed_at":"2025-12-31T13:25:51.982858296+01:00","dependencies":[{"issue_id":"workspace-gg16.1","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:56:16.527629067+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.2","title":"Per-user mmry instance management","description":"Octo backend spawns/manages lean mmry instance per user. Each user gets own SQLite database (~user/.local/share/mmry/ or container volume). Config delegates embeddings to host mmry-service. Track instance lifecycle similar to opencode/fileserver/ttyd.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:56:27.934294434+01:00","updated_at":"2025-12-31T09:56:27.934294434+01:00","dependencies":[{"issue_id":"workspace-gg16.2","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:56:27.935011013+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.3","title":"Backend: Add mmry proxy API routes","description":"Add Axum routes to proxy mmry operations to user's instance. Routes: GET/POST /api/sessions/{id}/memories, GET/PUT/DELETE /api/sessions/{id}/memories/{memory_id}, POST /api/sessions/{id}/memories/search. Determine store from session workspace. Handle auth.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:56:38.985395708+01:00","updated_at":"2025-12-31T09:56:38.985395708+01:00","dependencies":[{"issue_id":"workspace-gg16.3","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:56:38.986294466+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.4","title":"Frontend: React Query hooks for memories API","description":"Create TanStack Query hooks: useMemories, useMemorySearch, useCreateMemory, useUpdateMemory, useDeleteMemory. Handle pagination, optimistic updates, error states. Type definitions for Memory objects.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:56:48.983380862+01:00","updated_at":"2025-12-31T09:56:48.983380862+01:00","dependencies":[{"issue_id":"workspace-gg16.4","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:56:48.98411912+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.5","title":"Frontend: Memories tab UI components","description":"Build Memories tab with Radix UI components. MemoryList (paginated, sortable), MemorySearch (query input, mode selector, rerank toggle), MemoryCard (content, category, tags, importance, date), MemoryEditor (add/edit form with validation), StoreSelector (per-repo stores).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:57:00.37593998+01:00","updated_at":"2025-12-31T09:57:00.37593998+01:00","dependencies":[{"issue_id":"workspace-gg16.5","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:57:00.376665919+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.6","title":"Container mode: Add mmry to agent container image","description":"Add mmry binary to Dockerfile. Configure to delegate embeddings to host (host.docker.internal:8081 or host.containers.internal:8081). Per-container database in workspace volume. Expose mmry HTTP port (41823) alongside existing services.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T09:57:10.486638081+01:00","updated_at":"2025-12-31T13:24:43.224311172+01:00","closed_at":"2025-12-31T13:24:43.224311172+01:00","dependencies":[{"issue_id":"workspace-gg16.6","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:57:10.487797468+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.7","title":"Local mode: Per-user mmry service management","description":"For local mode, spawn mmry service per Linux user (similar to opencode). Use user's home directory for database. Generate user-specific config with remote embedding delegation. Add to session lifecycle (start/stop).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:57:20.465409706+01:00","updated_at":"2025-12-31T09:57:20.465409706+01:00","dependencies":[{"issue_id":"workspace-gg16.7","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:57:20.466002766+01:00","created_by":"wismut"}]}
{"id":"workspace-gg16.8","title":"Config: Add mmry settings to octo config.toml","description":"Add [mmry] section to octo config. Settings: host_service_url (central embeddings), host_api_key, per_user_port_base, default_model, dimension. Update config schema. Document in examples/config.toml.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-31T09:57:32.678017875+01:00","updated_at":"2025-12-31T09:57:32.678017875+01:00","dependencies":[{"issue_id":"workspace-gg16.8","depends_on_id":"workspace-gg16","type":"parent-child","created_at":"2025-12-31T09:57:32.678643684+01:00","created_by":"wismut"}]}
{"id":"workspace-gok","title":"Correctness: stop_session does not wait for container stop before marking stopped in DB","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:14:40.972714437+01:00","updated_at":"2025-12-29T09:10:38.59302428+01:00","closed_at":"2025-12-29T09:10:38.59302428+01:00"}
{"id":"workspace-hcl","title":"Add list virtualization for chat messages in sessions app","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T13:46:03.224484+01:00","updated_at":"2025-12-29T09:12:39.704489055+01:00","closed_at":"2025-12-29T09:12:39.704489055+01:00"}
{"id":"workspace-ht4","title":"Terminal WebSocket connects but immediately closes - stuck on connecting","description":"Terminal WebSocket could fail in the browser for two reasons: (1) startup race with ttyd (connection refused / 503 while pending) and (2) dev frontend running on :3001 not included in default CORS allowlist, causing WS upgrades from the browser Origin to be rejected. Fix: allow terminal WS during startup, retry ttyd connect, and include localhost/127.0.0.1:3001 in dev CORS defaults.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T11:22:59.90962+01:00","updated_at":"2025-12-17T12:16:13.679679+01:00","closed_at":"2025-12-17T11:55:21.084145+01:00"}
{"id":"workspace-idug","title":"Fix project session count mismatch","description":"Projects view shows 10 chats for govnr but sidebar shows 0. The session counts are not matching because projectSummaries uses chatHistory but the project filter may not be working correctly.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-30T04:21:31.895112667+01:00","updated_at":"2025-12-30T04:32:12.502388063+01:00","closed_at":"2025-12-30T04:32:12.502388063+01:00"}
{"id":"workspace-iqa","title":"Reorder sidebar navigation - Chats first","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T20:40:12.004178+01:00","updated_at":"2025-12-17T20:40:22.387795+01:00","closed_at":"2025-12-17T20:40:22.387795+01:00"}
{"id":"workspace-ivc","title":"Architecture: Support multiple opencode agents per container","description":"Each container runs multiple opencode serve instances. The MAIN agent runs in ~/workspace (the default). Additional agents live in ~/workspace/\u003cagent_name\u003e/ subdirectories, each with its own AGENTS.md and git context.\n\nArchitecture decisions:\n- Filesystem is source of truth (no manifest files needed)\n- Agent ID = directory name  \n- Agent color derived from directory name hash\n- Containers are long-lived (stop but don't remove)\n- Control plane manages agents via docker exec + opencode API\n\nHow it works:\n1. entrypoint.sh starts main agent on port 4096\n2. Control plane starts sub-agents via: docker exec -d \u003ccontainer\u003e bash -c 'cd ~/workspace/\u003cagent\u003e \u0026\u0026 opencode serve --port \u003cport\u003e'\n3. Control plane checks agent status via opencode API (GET /path)\n4. Control plane stops agents via: docker exec pkill -f 'opencode serve.*port \u003cport\u003e'\n\nPort mapping:\n- Main agent: 4096 (started by entrypoint)\n- Sub-agents: 4001, 4002, 4003... (started by control plane)\n\nNo extra scripts needed - just docker exec + opencode's native API.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T11:49:40.403611+01:00","updated_at":"2025-12-29T09:12:49.857393246+01:00","closed_at":"2025-12-29T09:12:49.857393246+01:00"}
{"id":"workspace-ivc.1","title":"Agent spawner service inside container","description":"Service that manages spawning additional opencode serve instances within a container. Allocates ports dynamically from a range (e.g., 41830-41899), tracks running agents, provides health checks. Could be a simple shell script or small Go/Rust binary.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T11:50:17.107626+01:00","updated_at":"2025-12-22T23:49:55.871299227+01:00","closed_at":"2025-12-18T22:54:27.631928+01:00","dependencies":[{"issue_id":"workspace-ivc.1","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-17T11:50:17.108257+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.10","title":"Frontend: Agent display and filtering in session sidebar","description":"Update session sidebar to show agent name and allow filtering.\n\nUI Changes:\n\n1. Session list item - add muted agent name:\n   \n    Greeting and quick ...          \n    2025/12/18 - 23:10  main          \u003c- muted text\n   \n\n2. Search bar - add filter dropdown:\n   \n     Suchen...                   \n   \n   \n   When filter active, show as pill:\n   \n     Suchen...    [research ]   \n   \n\n3. Filter dropdown contents:\n   - 'All' option (default)\n   - List of agent names from GET /session/{id}/agents\n   - Single select (radio style)\n\nImplementation:\n- Session model needs 'agent' field (agent name/id)\n- Fetch agent list for filter dropdown\n- Filter session list client-side when agent selected\n- Persist filter in URL or local state","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T22:55:54.370214+01:00","updated_at":"2025-12-29T09:10:03.054636068+01:00","closed_at":"2025-12-29T09:10:03.054636068+01:00","dependencies":[{"issue_id":"workspace-ivc.10","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:55:54.370934+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.11","title":"Frontend: Overhaul Agents section","description":"Redesign the Agents section to be the entry point for starting new agent sessions.\n\nCurrent flow (to change):\n  '+ Neuer Chat' -\u003e starts chat with main agent\n\nNew flow:\n  '+ Neuer Chat' -\u003e opens agent picker -\u003e select agent -\u003e starts chat\n\nAgents Section UI:\n\n1. Agent Cards/List view showing available agents:\n   \n    main                            \n    Default workspace agent           \u003c- from AGENTS.md first line or fallback\n    [Start Chat]                    \n   \n    deep-research                   \n    Deep research and analysis      \n    [Start Chat]                    \n   \n    doc-writer                      \n    Documentation specialist        \n    [Start Chat]                    \n   \n    + Create New Agent              \n   \n\n2. Agent status indicator:\n   - Running (green dot) - opencode serve is active\n   - Stopped (gray dot) - directory exists but not running\n   - Starting (spinner) - being started\n\n3. 'Start Chat' action:\n   - If agent not running, call POST /session/{id}/agents to start it\n   - Create new opencode session with that agent\n   - Navigate to chat view\n\n4. '+ Create New Agent' action:\n   - Opens modal with:\n     - Name input (becomes directory name)\n     - Description textarea (becomes AGENTS.md content)\n   - Creates directory via fileserver\n   - Starts agent via control plane\n   - Refreshes agent list\n\nData source:\n  GET /session/{id}/agents returns:\n  [\n    { id: 'main', directory: '~/workspace', status: 'running', port: 4096 },\n    { id: 'deep-research', directory: '~/workspace/deep-research', status: 'stopped', port: null },\n    ...\n  ]","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T22:56:09.223396+01:00","updated_at":"2025-12-29T09:09:57.983090482+01:00","closed_at":"2025-12-29T09:09:57.983090482+01:00","dependencies":[{"issue_id":"workspace-ivc.11","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:56:09.22404+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.12","title":"Hot-reload agents when new directory is created","description":"When a new agent directory is created at runtime, start its opencode serve without container restart.\n\nOptions:\n\nOption A: File watcher in entrypoint\n- Use inotifywait to watch ~/workspace/ for new directories\n- When new dir with AGENTS.md appears, spawn opencode serve\n- Requires inotify-tools in container\n\nOption B: API endpoint to start agent\n- POST /agents/{name}/start\n- Called by frontend after creating agent directory\n- Simpler, explicit control\n\nOption C: Periodic scan\n- Every N seconds, check for new agent dirs\n- Start any that aren't running\n- Simple but has delay\n\nRecommendation: Option B (explicit API)\n- Frontend creates directory\n- Frontend calls start endpoint\n- Immediate feedback\n- No background processes needed\n\nEndpoint implementation:\nPOST /start-agent\n{\n  \"directory\": \"/home/dev/workspace/doc-writer\"\n}\n\n- Validate directory exists and has AGENTS.md\n- Find next available port\n- Start opencode serve in background\n- Return port number","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T22:56:23.365705+01:00","updated_at":"2025-12-18T23:04:28.358404+01:00","closed_at":"2025-12-18T23:04:28.358404+01:00","dependencies":[{"issue_id":"workspace-ivc.12","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:56:23.366353+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.13","title":"Control plane: Agent management API","description":"Add endpoints to the control plane for managing opencode agent instances within a container.\n\nEndpoints:\n\nPOST /session/{id}/agents\n  Start a new agent in the container\n  Body: { \"directory\": \"doc-writer\" }  // relative to ~/workspace/\n  Implementation:\n    docker exec -d \u003ccontainer\u003e bash -c 'cd ~/workspace/doc-writer \u0026\u0026 opencode serve --port 4001 --hostname 0.0.0.0'\n  Returns: { \"id\": \"doc-writer\", \"port\": 4001, \"status\": \"starting\" }\n\nGET /session/{id}/agents\n  List all agents (running + available directories)\n  Implementation:\n    - Scan ~/workspace/*/ for directories with AGENTS.md or .git (via fileserver /tree or docker exec ls)\n    - For each known agent port, check if opencode is responding (GET http://container:port/path)\n  Returns: [{ \"id\": \"main\", \"port\": 4096, \"status\": \"running\", \"directory\": \"...\" }, ...]\n\nDELETE /session/{id}/agents/{agent_id}\n  Stop an agent\n  Implementation:\n    - Find process: docker exec \u003ccontainer\u003e pgrep -f 'opencode serve.*port 4001'\n    - Kill it: docker exec \u003ccontainer\u003e pkill -f 'opencode serve.*port 4001'\n  Returns: { \"stopped\": true }\n\nGET /session/{id}/agents/{agent_id}\n  Get agent status\n  Implementation:\n    - Try GET http://container:\u003cport\u003e/path\n    - If responds, running; if not, stopped\n  Returns: { \"id\": \"doc-writer\", \"port\": 4001, \"status\": \"running\" }\n\nPort allocation:\n  - main (workspace root) = 4096 (started by entrypoint)\n  - sub-agents = 4001, 4002, 4003... (control plane tracks which ports are in use)\n\nState tracking:\n  - Control plane keeps in-memory map of session_id -\u003e [(agent_id, port)]\n  - On restart, rediscover by scanning ports 4001-4099 for responding opencode instances\n  - Or just query opencode API on known ports","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T23:04:44.597191+01:00","updated_at":"2025-12-19T00:21:14.527796+01:00","closed_at":"2025-12-19T00:21:14.527796+01:00","dependencies":[{"issue_id":"workspace-ivc.13","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T23:04:44.597939+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.14","title":"Container: Agent helper script for control plane","description":"Add a simple helper script in the container that the control plane can call via docker exec to manage agents.\n\nScript: /usr/local/bin/agent-ctl\n\nUsage:\n  agent-ctl start \u003cdirectory\u003e [--port \u003cport\u003e]\n    Start opencode serve in given directory\n    Writes PID to /tmp/agents/\u003cname\u003e.pid\n    Returns JSON: { \"pid\": 1234, \"port\": 4001 }\n\n  agent-ctl stop \u003cname\u003e\n    Stop agent by name (reads PID from pidfile)\n    Returns JSON: { \"stopped\": true }\n\n  agent-ctl list\n    List running agents\n    Returns JSON array of agents with pid, port, directory\n\n  agent-ctl status \u003cname\u003e\n    Check if agent is running\n    Returns JSON: { \"running\": true, \"pid\": 1234, \"port\": 4001 }\n\nWhy a script instead of raw docker exec?\n- Cleaner interface for control plane\n- Handles PID tracking\n- Can do port allocation logic\n- Easier to test in isolation\n- Single place for agent lifecycle logic\n\nImplementation:\n- Bash script (simple, no dependencies)\n- PIDs stored in /tmp/agents/\u003cname\u003e.pid\n- Ports stored in /tmp/agents/\u003cname\u003e.port\n- Main agent (workspace root) always has id='main'","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T23:04:58.563107+01:00","updated_at":"2025-12-18T23:08:38.376178+01:00","closed_at":"2025-12-18T23:08:38.376178+01:00","dependencies":[{"issue_id":"workspace-ivc.14","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T23:04:58.563939+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.15","title":"Backend: Track agent per opencode session","description":"Each opencode session needs to know which agent it belongs to.\n\nCurrent state:\n- opencode sessions are tracked internally by opencode\n- We proxy to opencode via /session/{container_id}/code/*\n\nNew requirement:\n- Frontend needs to know which agent a session belongs to\n- Session list should show agent name\n- Filter by agent\n\nOptions:\n\nOption A: Store in opencode session metadata\n- opencode may support custom metadata per session\n- Check if we can pass/retrieve agent info\n\nOption B: Derive from session's working directory\n- Query opencode session info\n- Parse working directory to extract agent name\n- ~/workspace -\u003e 'main'\n- ~/workspace/deep-research -\u003e 'deep-research'\n\nOption C: Track mapping in control plane\n- When creating session, store (opencode_session_id, agent_id) mapping\n- Return agent info when listing sessions\n\nRecommendation: Option B (derive from directory)\n- No extra storage needed\n- opencode already knows its working directory\n- Just need to parse it when listing sessions\n\nImplementation:\n- When fetching session list from opencode, include 'path' or 'cwd' field\n- Parse to extract agent name\n- Include in session response to frontend","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T23:27:52.755798+01:00","updated_at":"2025-12-29T09:12:24.494023724+01:00","closed_at":"2025-12-29T09:12:24.494023724+01:00","dependencies":[{"issue_id":"workspace-ivc.15","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T23:27:52.756515+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.16","title":"Backend: Create agent directory and AGENTS.md","description":"Endpoint to create a new agent directory with AGENTS.md file.\n\nEndpoint:\nPOST /session/{id}/agents/create\nBody: {\n  \"name\": \"doc-writer\",\n  \"description\": \"Documentation and technical writing specialist\"\n}\n\nImplementation:\n1. Validate name (lowercase, alphanumeric, hyphens only)\n2. Check directory doesn't already exist\n3. Create directory: ~/workspace/{name}/\n4. Create AGENTS.md with content:\n   # {name}\n   \n   {description}\n5. Optionally: git init the directory\n6. Return: { \"id\": \"doc-writer\", \"directory\": \"/home/dev/workspace/doc-writer\" }\n\nCan be implemented via:\n- docker exec mkdir + echo (simple)\n- fileserver PUT /mkdir + POST /file (cleaner, already have the APIs)\n\nRecommendation: Use fileserver\n- PUT /mkdir?path=doc-writer to create directory\n- POST /file?path=doc-writer/AGENTS.md to write file\n- Control plane orchestrates both calls","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T23:28:06.077821+01:00","updated_at":"2025-12-19T00:28:41.781099+01:00","closed_at":"2025-12-19T00:28:41.781099+01:00","dependencies":[{"issue_id":"workspace-ivc.16","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T23:28:06.078502+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.2","title":"Agent directory structure convention","description":"Define the convention for agent subdirectories: workspace/\u003cagent_name\u003e/AGENTS.md for agent-specific instructions. Document how agents discover their root, how they're named, and what files they expect. Example: workspace/document_agent/ with its own AGENTS.md that says 'You are a documentation specialist...'","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T11:50:27.040995+01:00","updated_at":"2025-12-22T23:49:55.872199225+01:00","closed_at":"2025-12-18T22:54:28.627407+01:00","dependencies":[{"issue_id":"workspace-ivc.2","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-17T11:50:27.041952+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.3","title":"Backend API: Register and track sub-agents","description":"Extend the session model to track sub-agents. New endpoints: POST /sessions/{id}/agents (spawn sub-agent), GET /sessions/{id}/agents (list), DELETE /sessions/{id}/agents/{agent_id} (stop). Each sub-agent has: id, name, port, workdir, status, created_at.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T11:50:37.376621+01:00","updated_at":"2025-12-22T23:49:55.872954683+01:00","closed_at":"2025-12-18T22:54:29.41401+01:00","dependencies":[{"issue_id":"workspace-ivc.3","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-17T11:50:37.377248+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.4","title":"Frontend: Multi-agent session view","description":"Update session UI to show multiple agents. Tabbed interface or sidebar listing agents within a session. Each agent tab shows its own terminal/chat. Ability to spawn new agents from UI with name and optional AGENTS.md template.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:50:47.340567+01:00","updated_at":"2025-12-22T23:49:55.873532513+01:00","closed_at":"2025-12-18T22:56:42.341656+01:00","dependencies":[{"issue_id":"workspace-ivc.4","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-17T11:50:47.341238+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.5","title":"Proxy routing for sub-agents","description":"Update backend proxy to route to sub-agents. Routes like /session/{id}/agent/{agent_id}/code/* should proxy to the correct port. May need to query the agent registry or use a naming convention for container-internal routing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T11:50:57.455622+01:00","updated_at":"2025-12-22T23:49:55.874142161+01:00","closed_at":"2025-12-18T22:54:30.195816+01:00","dependencies":[{"issue_id":"workspace-ivc.5","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-17T11:50:57.456225+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.6","title":"Refactor container lifecycle: stop without remove","description":"Change session service to keep containers alive instead of removing them on stop.\n\nCurrent behavior (wasteful):\n- stop_session() -\u003e stop container -\u003e remove container\n- Next start -\u003e create brand new container (cold boot)\n\nNew behavior:\n- stop_session() -\u003e stop container (keep it)\n- start/resume -\u003e docker start (fast, warm caches)\n- delete_session() -\u003e stop + remove (explicit cleanup)\n\nChanges needed in backend/src/session/service.rs:\n1. stop_session(): Remove the remove_container() call\n2. Add resume_session() that does docker start on stopped container\n3. create_session(): Check if stopped container exists for user, restart it instead\n4. Add cleanup job for containers stopped \u003e N days (configurable)\n5. upgrade_session(): Only case that needs remove (new image)\n\nBenefits:\n- Faster restarts (docker start vs create+start)\n- Warm caches (opencode state, MCP servers initialized)\n- Agent processes preserved\n- Less container churn","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T22:54:46.725601+01:00","updated_at":"2025-12-18T23:59:31.67392+01:00","closed_at":"2025-12-18T23:59:31.67392+01:00","dependencies":[{"issue_id":"workspace-ivc.6","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:54:46.726291+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.7","title":"Update entrypoint.sh to start multiple agents","description":"Modify container/entrypoint.sh to scan workspace for agent subdirectories and start an opencode serve instance for each.\n\nDirectory structure:\n- ~/workspace/              -\u003e Main agent (port 4096, default)\n- ~/workspace/doc-writer/   -\u003e Agent on port 4001\n- ~/workspace/code-review/  -\u003e Agent on port 4002\n- etc.\n\nDetection logic:\n- Scan ~/workspace/*/ for directories containing AGENTS.md or .git\n- Skip regular files and non-agent directories\n- Main workspace always gets port 4096\n\nPort mapping:\n- Main agent: 4096 (already exposed)\n- Sub-agents: 4001, 4002, 4003... (alphabetical order)\n\nImplementation:\n1. Start main agent in ~/workspace on port 4096 (current behavior)\n2. Loop through ~/workspace/*/ directories\n3. If dir has AGENTS.md or .git, start opencode serve on next port\n4. Track PIDs for graceful shutdown\n5. Log which agents started on which ports\n\nExample output:\n  Starting main agent on port 4096 (~/workspace)\n  Starting agent 'doc-writer' on port 4001 (~/workspace/doc-writer)\n  Starting agent 'code-review' on port 4002 (~/workspace/code-review)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T22:55:11.309822+01:00","updated_at":"2025-12-18T23:04:27.600074+01:00","closed_at":"2025-12-18T23:04:27.600074+01:00","dependencies":[{"issue_id":"workspace-ivc.7","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:55:11.310621+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.8","title":"Add agent discovery endpoint to fileserver or backend","description":"Agent discovery now goes through the control plane, not fileserver.\n\nControl plane endpoint:\nGET /session/{id}/agents\n  Returns list of agents (running + available directories)\n\nResponse format:\n{\n  \"agents\": [\n    {\n      \"id\": \"main\",\n      \"name\": \"Main Workspace\",\n      \"directory\": \"/home/dev/workspace\",\n      \"port\": 4096,\n      \"color\": \"#3B82F6\",\n      \"status\": \"running\",\n      \"hasAgentsMd\": true,\n      \"hasGit\": true\n    },\n    {\n      \"id\": \"doc-writer\",\n      \"name\": \"doc-writer\", \n      \"directory\": \"/home/dev/workspace/doc-writer\",\n      \"port\": 4001,\n      \"color\": \"#10B981\",\n      \"status\": \"running\",\n      \"hasAgentsMd\": true,\n      \"hasGit\": true\n    },\n    {\n      \"id\": \"code-review\",\n      \"name\": \"code-review\",\n      \"directory\": \"/home/dev/workspace/code-review\",\n      \"port\": null,\n      \"color\": \"#F59E0B\",\n      \"status\": \"stopped\",\n      \"hasAgentsMd\": true,\n      \"hasGit\": false\n    }\n  ]\n}\n\nImplementation:\n- Control plane calls 'docker exec agent-ctl list' to get running agents\n- Also scans workspace subdirs (via fileserver or exec) for available but stopped agents\n- Merges both lists\n- Derives color from agent name hash (no storage needed)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T22:55:27.043157+01:00","updated_at":"2025-12-18T23:09:05.815154+01:00","closed_at":"2025-12-18T23:09:05.815154+01:00","dependencies":[{"issue_id":"workspace-ivc.8","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:55:27.043917+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivc.9","title":"Backend proxy routing for sub-agents","description":"Update backend to route requests to the correct agent port within a container.\n\nCurrent routing:\n  /session/{id}/code/* -\u003e container:4096\n\nNew routing:\n  /session/{id}/code/*                -\u003e container:4096 (main agent)\n  /session/{id}/agent/{name}/code/*   -\u003e container:400X (sub-agent)\n\nPort resolution:\n  - 'main' or empty -\u003e 4096\n  - other names -\u003e lookup port from agent list (4001 + index)\n\nImplementation in backend/src/api/proxy.rs or similar:\n1. Parse agent name from path\n2. If agent specified, resolve port (4001 + alphabetical index of agent name)\n3. Proxy to container_ip:resolved_port\n\nAlternative: Query /agents endpoint to get name-\u003eport mapping\n  - Cache for short duration (agents don't change often)\n  - Refresh on 404 (new agent may have been created)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T22:55:40.110677+01:00","updated_at":"2025-12-19T00:26:08.761889+01:00","closed_at":"2025-12-19T00:26:08.761889+01:00","dependencies":[{"issue_id":"workspace-ivc.9","depends_on_id":"workspace-ivc","type":"parent-child","created_at":"2025-12-18T22:55:40.111288+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-ivg","title":"Live voice mode","description":"Add live voice interaction mode for hands-free agent communication.\n\n## Features\n\n### 1. Voice Input\n- Browser microphone capture (MediaRecorder API)\n- Stream audio to backend via WebSocket\n- Speech-to-text processing (options):\n  - OpenAI Whisper API\n  - Local Whisper (in container)\n  - Browser Web Speech API (fallback)\n\n### 2. Voice Output  \n- Text-to-speech for agent responses\n- Options:\n  - Browser SpeechSynthesis API (free, basic)\n  - ElevenLabs API (quality, paid)\n  - OpenAI TTS (quality, paid)\n- Streaming TTS for faster response\n\n### 3. Voice Mode UI\n- Floating voice button (like Siri/Alexa)\n- Visual feedback during:\n  - Listening (pulsing indicator)\n  - Processing (thinking animation)\n  - Speaking (waveform)\n- Push-to-talk or wake word activation\n- Mute/unmute controls\n\n### 4. Conversation Flow\n- Voice input -\u003e STT -\u003e Agent -\u003e TTS -\u003e Voice output\n- Interrupt handling (user speaks while agent responds)\n- Conversation history synced with text chat\n\n## Dependencies\n- workspace-45p (WebSocket support)\n\n## Configuration\n- Voice provider selection in settings\n- Voice/language preferences\n- Wake word customization (future)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T09:39:40.391498547+01:00","updated_at":"2025-12-29T09:04:51.342645519+01:00","closed_at":"2025-12-29T09:04:51.342645519+01:00"}
{"id":"workspace-j0q","title":"Performance: ContainerRuntime clones the entire runtime for each session service operation","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:13:42.245113458+01:00","updated_at":"2025-12-29T09:14:26.294909745+01:00","closed_at":"2025-12-29T09:14:26.294909745+01:00"}
{"id":"workspace-jah","title":"Add download and ZIP endpoints to fileserver","description":"Backend support for file downloads: (1) GET /download endpoint for single file/directory download, (2) GET /download-zip endpoint for multi-file ZIP archive, (3) Content-Disposition: attachment header, (4) Directory downloads automatically create ZIP","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T20:41:23.506529+01:00","updated_at":"2025-12-17T20:41:35.547753+01:00","closed_at":"2025-12-17T20:41:35.547753+01:00"}
{"id":"workspace-jgh","title":"LOW: Manual Default impl could use derive","description":"backend/src/user/service.rs:311-323 - impl Default for UpdateUserRequest sets all fields to None, which could be derived. FIX: Add #[derive(Default)] to the struct definition.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:23.73469633+01:00","updated_at":"2025-12-29T09:15:29.774982339+01:00","closed_at":"2025-12-29T09:15:29.774982339+01:00"}
{"id":"workspace-jxj","title":"Create Traefik configuration for dynamic container routing","description":"Set up Traefik to route traffic to multiple containers by path/subdomain. Containers use internal Docker network with no host port exposure.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T12:05:44.82341+01:00","updated_at":"2025-12-12T12:08:48.4681+01:00","closed_at":"2025-12-12T12:08:48.4681+01:00"}
{"id":"workspace-ka70","title":"Per-chat draft text persistence","description":"Cache unsent text per chat session. When switching between chats, preserve draft text so user can return and continue typing where they left off.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:03:39.573467073+01:00","updated_at":"2025-12-29T14:10:51.335066898+01:00","closed_at":"2025-12-29T14:10:51.335066898+01:00"}
{"id":"workspace-kdxm","title":"persona.toml structure for agent + UI metadata","description":"Define persona.toml format: [metadata] (name, color, avatar), [agent] (mode, model, prompt, tools, permissions), [workspace] (default, mode). Maps 1:1 to builder UI. Backend parses and generates .opencode/agent/*.md from it.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:20:43.343100679+01:00","updated_at":"2025-12-29T15:18:15.295776629+01:00","closed_at":"2025-12-29T15:18:15.295776629+01:00"}
{"id":"workspace-kh1","title":"Code Duplication: Error handling pattern for container commands repeated in every ContainerRuntime method","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:13:57.975454291+01:00","updated_at":"2025-12-29T09:14:05.981108668+01:00","closed_at":"2025-12-29T09:14:05.981108668+01:00"}
{"id":"workspace-l4n","title":"Frontend: Add session management (stop/delete/upgrade)","description":"Add UI for managing workspace sessions:\n\n1. Stop session button (graceful shutdown)\n2. Delete session button (removes container and DB record)\n3. Upgrade session button (recreate with latest image)\n\nCurrently users have no way to:\n- Clean up old/failed sessions\n- Restart with a new container image\n- Free up resources from stopped sessions\n\nLocation: Settings panel or session dropdown menu\n\nAPI endpoints already exist:\n- POST /sessions/{id}/stop\n- DELETE /sessions/{id}\n- POST /sessions/{id}/upgrade (checks for new image)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T00:45:42.377554+01:00","updated_at":"2025-12-29T08:55:43.737403992+01:00","closed_at":"2025-12-29T08:55:43.737403992+01:00"}
{"id":"workspace-lc8","title":"Security: DevUser bcrypt hashing at default() runs on startup, causing slowdown and leaking timing","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T21:13:22.448148624+01:00","updated_at":"2025-12-16T22:02:30.917609598+01:00","closed_at":"2025-12-16T22:02:30.917609598+01:00"}
{"id":"workspace-lfu","title":"Frontend UI Architecture - Professional \u0026 Extensible App System","description":"Redesign the frontend architecture with a professional, icon-free aesthetic and a plugin-style 'app' system. Each sidebar entry represents a self-contained app with its own routes, components, and state. No emojis, no ugly icons - clean typography, subtle visual hierarchy, and enterprise-grade polish. Key goals: (1) Extensible app registry pattern for adding new sidebar apps, (2) Professional dark-first design system with semantic colors, (3) Responsive split-pane layouts with persistence, (4) Clean monospace typography with visual hierarchy through weight/spacing not icons.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-09T22:29:44.781733+01:00","updated_at":"2025-12-09T23:05:33.007194+01:00","closed_at":"2025-12-09T23:05:33.007194+01:00"}
{"id":"workspace-lfu.1","title":"Design System - Professional Color Palette \u0026 Typography","description":"Create a refined dark-first design system. Replace Lucide icons with text labels and subtle visual indicators. Define CSS custom properties for: (1) Base colors - dark backgrounds (210 10% 8-15%), muted foregrounds, accent teal/cyan, (2) Semantic colors - primary, secondary, muted, destructive with foreground pairs, (3) Sidebar-specific tokens, (4) Typography - JetBrains Mono or similar monospace, uppercase tracking for labels, normal for content, (5) Spacing scale (4px base), (6) Border radius (subtle 0.25-0.5rem). No emojis anywhere. Update globals.css with new tokens.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T22:29:59.438583+01:00","updated_at":"2025-12-09T23:05:31.280675+01:00","closed_at":"2025-12-09T23:05:31.280675+01:00","dependencies":[{"issue_id":"workspace-lfu.1","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:29:59.439005+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.10","title":"File Tree Component","description":"Build a file tree explorer component: (1) FileTree component using react-arborist or custom implementation, (2) TreeNode - folder/file differentiation via indentation and subtle visual cues (no file type icons), (3) Expand/collapse folders with smooth animation, (4) Click to select, double-click to open, (5) Context menu with text actions (Rename, Delete, New File, New Folder), (6) File type indication via name extension styling (e.g., .ts files slightly different color), (7) Search/filter files. Focus on clean typography hierarchy.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:40.360646+01:00","updated_at":"2025-12-15T23:23:55.872078139+01:00","closed_at":"2025-12-15T23:23:55.872078139+01:00","dependencies":[{"issue_id":"workspace-lfu.10","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:40.361069+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.10","depends_on_id":"workspace-lfu.1","type":"blocks","created_at":"2025-12-09T22:31:55.975578+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.11","title":"Terminal Component - xterm.js Integration","description":"Build terminal component with xterm.js: (1) Terminal component wrapping xterm.js, (2) WebSocket connection to backend terminal proxy, (3) Resize handling (fit addon), (4) Copy/paste support, (5) Scrollback buffer, (6) Custom theme matching design system (dark background, teal/cyan accents), (7) Connection status indicator (text: 'Connected'/'Disconnected', no icons), (8) Conditional rendering based on template permissions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:43.389734+01:00","updated_at":"2025-12-15T23:23:57.040612317+01:00","closed_at":"2025-12-15T23:23:57.040612317+01:00","dependencies":[{"issue_id":"workspace-lfu.11","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:43.390131+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.11","depends_on_id":"workspace-lfu.1","type":"blocks","created_at":"2025-12-09T22:31:56.008464+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.12","title":"Preview Panel Component","description":"Build a document preview panel for Research Assistant template: (1) PreviewPanel component with file type detection, (2) PDF viewer using react-pdf or pdfjs-dist, (3) Image preview with zoom controls (text buttons), (4) HTML preview in sandboxed iframe, (5) Markdown preview with same styling as chat, (6) Fallback text display for unknown types, (7) File info header showing name and size. Used instead of terminal for non-technical templates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:30:49.697571+01:00","updated_at":"2025-12-16T21:09:27.490296317+01:00","closed_at":"2025-12-16T09:04:04.035849+01:00","dependencies":[{"issue_id":"workspace-lfu.12","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:49.698114+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.13","title":"Resizable Split Pane System","description":"Implement resizable panel layouts: (1) Use react-resizable-panels library, (2) Create layout configurations per app/template (chat+editor+terminal, chat+preview, etc.), (3) PanelLayout component that renders configured panels, (4) Persist panel sizes in localStorage per layout, (5) Panel collapse/expand with double-click on handle, (6) Min/max size constraints, (7) Responsive behavior - stack vertically on mobile. Clean resize handles (subtle border, not bulky).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:53.117198+01:00","updated_at":"2025-12-15T23:24:06.720558888+01:00","closed_at":"2025-12-15T23:24:06.720558888+01:00","dependencies":[{"issue_id":"workspace-lfu.13","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:53.117711+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.14","title":"Status Bar Component","description":"Create a status bar for the sidebar footer and/or app shell bottom: (1) StatusBar component with platform health info, (2) Connection status (text: 'Online'/'Offline'), (3) Session count, uptime display, (4) Subtle pulsing dot for live status (CSS animation), (5) Expandable details on click/hover. Minimalist design - small text, muted colors, no icons.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:30:55.850152+01:00","updated_at":"2025-12-29T09:07:11.273142468+01:00","closed_at":"2025-12-29T09:07:11.273142468+01:00","dependencies":[{"issue_id":"workspace-lfu.14","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:55.850622+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.15","title":"Toast/Notification System","description":"Implement toast notifications: (1) Use sonner library already in shadcn, (2) Configure positioning (bottom-right), (3) Custom toast styles matching design system, (4) Variants: default, success, error, warning (color-coded borders, no icons), (5) Close button (text 'x' or small button), (6) Action buttons on toasts, (7) Toast queue management. Keep notifications subtle and professional.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:30:58.967712+01:00","updated_at":"2025-12-16T21:09:27.490848695+01:00","closed_at":"2025-12-16T09:04:02.393869+01:00","dependencies":[{"issue_id":"workspace-lfu.15","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:58.968205+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.16","title":"App State Management Pattern","description":"Define state management patterns for apps: (1) Each app has its own state slice/context, (2) AppStateProvider wrapper per app, (3) URL-based state for navigation (active workspace, session ID), (4) Local state for UI (panel sizes, collapse states), (5) Server state via TanStack Query (data fetching), (6) Zustand or Jotai for complex client state if needed. Document the pattern so new apps follow consistent state management.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:31:06.733189+01:00","updated_at":"2025-12-15T23:24:08.241724634+01:00","closed_at":"2025-12-15T23:24:08.241724634+01:00","dependencies":[{"issue_id":"workspace-lfu.16","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:06.733576+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.16","depends_on_id":"workspace-lfu.2","type":"blocks","created_at":"2025-12-09T22:31:56.454926+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.17","title":"Keyboard Shortcuts System","description":"Implement global keyboard shortcuts: (1) useHotkeys hook or similar, (2) Cmd/Ctrl+B - toggle sidebar, (3) Cmd/Ctrl+K - command palette (future), (4) Cmd/Ctrl+1/2/3 - switch between apps, (5) Escape - close modals/dialogs, (6) Shortcuts help modal (text-based list), (7) Prevent conflicts with terminal when focused. Document shortcuts in a discoverable way.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:31:09.35681+01:00","updated_at":"2025-12-29T09:07:16.340625915+01:00","closed_at":"2025-12-29T09:07:16.340625915+01:00","dependencies":[{"issue_id":"workspace-lfu.17","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:09.357263+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.18","title":"Empty States \u0026 Loading Patterns","description":"Create consistent empty and loading states: (1) EmptyState component - title, description, optional action button, (2) Loading skeleton patterns for cards, lists, panels, (3) Spinner component (simple CSS animation, no emoji), (4) Error state component - message, retry button, (5) Shimmer effect for loading content. All text-based, professional appearance, no sad face emojis or cartoon illustrations.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:31:11.408129+01:00","updated_at":"2025-12-16T21:09:27.491394994+01:00","closed_at":"2025-12-16T09:04:03.227074+01:00","dependencies":[{"issue_id":"workspace-lfu.18","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:11.408527+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.19","title":"Metrics Cards Component","description":"Create reusable metrics card components for admin dashboard: (1) MetricCard - label, value, optional trend indicator, (2) Progress bar variant for percentage metrics (CPU, Memory), (3) Trend indicator as text (+5%, -2%) with subtle color, (4) Compact and expanded variants, (5) Grid layout helpers for dashboard. Clean typography, values prominent, labels muted.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:31:14.198339+01:00","updated_at":"2025-12-29T09:07:21.423560382+01:00","closed_at":"2025-12-29T09:07:21.423560382+01:00","dependencies":[{"issue_id":"workspace-lfu.19","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:14.198784+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.2","title":"App Registry System - Core Architecture","description":"Implement a plugin-style app registry that allows new 'apps' to be added as sidebar entries. Create: (1) AppDefinition interface with id, label, component, routes, permissions, defaultState, (2) AppRegistry class with register(), getApp(), getAllApps(), (3) AppContext provider that wraps the app shell, (4) useApp() hook for accessing current app state, (5) apps/ directory structure where each app is a self-contained module. This enables adding new sidebar apps by simply registering them without modifying core shell code.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T22:30:02.680339+01:00","updated_at":"2025-12-15T23:23:44.865046292+01:00","closed_at":"2025-12-15T23:23:44.865046292+01:00","dependencies":[{"issue_id":"workspace-lfu.2","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:02.680744+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.20","title":"Data Table Component","description":"PARTIAL: frontend/components/ui/table.tsx has basic table primitives. Missing: DataTable component with TanStack Table, sorting, filtering, pagination.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:31:21.042391+01:00","updated_at":"2025-12-29T09:07:26.501932194+01:00","closed_at":"2025-12-29T09:07:26.501932194+01:00","dependencies":[{"issue_id":"workspace-lfu.20","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:21.042847+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.21","title":"Real-time Charts Component","description":"Create chart components for admin dashboard: (1) Use recharts library, (2) LineChart for time-series metrics (CPU, Memory over time), (3) Custom tooltip styling matching design system, (4) Legend positioning (text labels, no color squares with icons), (5) Responsive container, (6) Real-time data updates via SSE, (7) Axis styling - minimal, muted colors. Clean, professional chart aesthetic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:31:24.752017+01:00","updated_at":"2025-12-16T21:09:27.492574331+01:00","closed_at":"2025-12-16T09:04:04.626513+01:00","dependencies":[{"issue_id":"workspace-lfu.21","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:24.752437+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.22","title":"App Documentation Template","description":"Create documentation for how to add new apps: (1) README in apps/ directory explaining the pattern, (2) Example app template with all required files, (3) AppDefinition interface documentation, (4) State management guidelines, (5) Styling conventions (no icons, text-first), (6) Testing requirements. Make it easy for developers to add new sidebar apps without touching core shell code.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-09T22:31:28.675479+01:00","updated_at":"2025-12-29T09:07:47.359863118+01:00","closed_at":"2025-12-29T09:07:47.359863118+01:00","dependencies":[{"issue_id":"workspace-lfu.22","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:31:28.676015+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.3","title":"App Shell Layout - Sidebar \u0026 Main Content Area","description":"Build the core app shell layout: (1) Collapsible sidebar (expanded: 240px, collapsed: 48px) with keyboard shortcut (Cmd/Ctrl+B), (2) Sidebar sections - brand header, app navigation, status footer, (3) Main content area with top toolbar (breadcrumb, actions, notifications) and scrollable content, (4) Mobile drawer behavior via Sheet component, (5) Persist collapse state in cookie/localStorage. Use text labels instead of icons for navigation items. Active state shown via background highlight and text weight, not icons.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T22:30:06.967306+01:00","updated_at":"2025-12-15T23:23:46.136892651+01:00","closed_at":"2025-12-15T23:23:46.136892651+01:00","dependencies":[{"issue_id":"workspace-lfu.3","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:06.967725+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.3","depends_on_id":"workspace-lfu.1","type":"blocks","created_at":"2025-12-09T22:31:40.914239+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.3","depends_on_id":"workspace-lfu.2","type":"blocks","created_at":"2025-12-09T22:31:42.323321+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.4","title":"Navigation System - Text-Based Menu Items","description":"Create the sidebar navigation system using text labels instead of icons: (1) SidebarNav component with list of registered apps, (2) NavItem component - text label, optional badge count, active state via background/weight, (3) NavGroup for grouping related items with collapsible sections, (4) Tooltip support when sidebar is collapsed (show full label), (5) Keyboard navigation (up/down arrows, enter to select), (6) Visual indicators - subtle left border accent for active, muted text for inactive, hover states. Typography: uppercase, letter-spacing: 0.05em, font-weight: 500 normal / 600 active.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-09T22:30:14.299424+01:00","updated_at":"2025-12-15T23:23:47.3050593+01:00","closed_at":"2025-12-15T23:23:47.3050593+01:00","dependencies":[{"issue_id":"workspace-lfu.4","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:14.299832+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.4","depends_on_id":"workspace-lfu.1","type":"blocks","created_at":"2025-12-09T22:31:41.229696+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.4","depends_on_id":"workspace-lfu.2","type":"blocks","created_at":"2025-12-09T22:31:41.856785+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.5","title":"Workspaces App - Grid View \u0026 Actions","description":"Implement the Workspaces app as a self-contained module: (1) Register in AppRegistry with id='workspaces', (2) WorkspacesPage component - grid layout (1/2/3 cols responsive), (3) WorkspaceCard - project name (typography-driven, no icon), metadata (last modified, file count), action menu (text dropdown, no icon buttons), (4) Search/filter bar with text input, (5) 'New Workspace' button in toolbar, (6) Empty state with clear messaging. Card design: subtle border, hover lift effect, clean typography hierarchy.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:18.218699+01:00","updated_at":"2025-12-15T23:23:58.126566569+01:00","closed_at":"2025-12-15T23:23:58.126566569+01:00","dependencies":[{"issue_id":"workspace-lfu.5","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:18.219098+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.5","depends_on_id":"workspace-lfu.3","type":"blocks","created_at":"2025-12-09T22:31:48.086966+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.5","depends_on_id":"workspace-lfu.4","type":"blocks","created_at":"2025-12-09T22:31:48.123222+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.5","depends_on_id":"workspace-lfu.8","type":"blocks","created_at":"2025-12-09T22:31:54.94908+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.6","title":"Sessions App - Active Session Interface","description":"Implement the Sessions app for active AI sessions: (1) Register in AppRegistry with id='sessions', (2) SessionsPage with split-pane layout, (3) Left panel - Chat interface with streaming markdown, message list, input bar, (4) Right panel - Tabbed view (Files/Terminal/Preview) using text tabs not icon tabs, (5) Session header with workspace name, template, duration, end button, (6) Resizable panels with react-resizable-panels, persist sizes. Clean separation of concerns - chat logic, file tree, terminal should be independent components.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:22.189262+01:00","updated_at":"2025-12-15T23:23:59.486272523+01:00","closed_at":"2025-12-15T23:23:59.486272523+01:00","dependencies":[{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:22.189723+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu.3","type":"blocks","created_at":"2025-12-09T22:31:48.798376+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu.4","type":"blocks","created_at":"2025-12-09T22:31:48.836197+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu.9","type":"blocks","created_at":"2025-12-09T22:31:50.718647+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu.10","type":"blocks","created_at":"2025-12-09T22:31:50.75141+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu.11","type":"blocks","created_at":"2025-12-09T22:31:50.781605+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.6","depends_on_id":"workspace-lfu.13","type":"blocks","created_at":"2025-12-09T22:31:50.809401+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.7","title":"Admin App - Dashboard \u0026 Monitoring","description":"Implement the Admin app for platform monitoring: (1) Register in AppRegistry with id='admin', permissions=['admin'], (2) AdminPage with metrics overview, (3) Metrics cards - CPU, Memory, Active Sessions, Workers (no icons, just labels and values), (4) Real-time chart using recharts (line chart, clean styling), (5) Sessions table - ID, User, Workspace, Duration, Resources, Actions, (6) Text-based action buttons ('Terminate' not trash icon), (7) SSE connection for live metrics updates. Professional dashboard aesthetic.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:25.88859+01:00","updated_at":"2025-12-15T23:24:04.207403482+01:00","closed_at":"2025-12-15T23:24:04.207403482+01:00","dependencies":[{"issue_id":"workspace-lfu.7","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:25.889007+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.7","depends_on_id":"workspace-lfu.3","type":"blocks","created_at":"2025-12-09T22:31:49.415863+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.7","depends_on_id":"workspace-lfu.4","type":"blocks","created_at":"2025-12-09T22:31:49.448586+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.7","depends_on_id":"workspace-lfu.19","type":"blocks","created_at":"2025-12-09T22:31:54.310129+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.7","depends_on_id":"workspace-lfu.20","type":"blocks","created_at":"2025-12-09T22:31:54.343316+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.7","depends_on_id":"workspace-lfu.21","type":"blocks","created_at":"2025-12-09T22:31:54.375692+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.8","title":"Agent Template Selector - Clean Card UI","description":"Create the agent template selection modal/page: (1) AgentSelector component as Dialog or full page, (2) Template cards - name, description, persona label, capability tags, (3) No icons on cards - use typography and subtle color coding for persona types (Developer=primary, Analyst=secondary, etc.), (4) 'Start Session' button per card, (5) Responsive grid layout, (6) Highlight recommended template based on workspace type. Capability badges use subtle pill styling with semantic colors.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:33.744408+01:00","updated_at":"2025-12-15T23:24:05.429502881+01:00","closed_at":"2025-12-15T23:24:05.429502881+01:00","dependencies":[{"issue_id":"workspace-lfu.8","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:33.744867+01:00","created_by":"daemon"}]}
{"id":"workspace-lfu.9","title":"Chat Interface Component","description":"Build a reusable chat interface component: (1) ChatPanel component with message list, input area, (2) Message component - user/assistant variants, timestamp, (3) Markdown rendering with syntax highlighting for code blocks, (4) Streaming support with typing indicator (subtle animation, no emoji), (5) Copy button on code blocks (text 'Copy' not icon), (6) File attachment support in input, (7) Auto-scroll to bottom with scroll-to-bottom button when not at bottom. Clean message bubbles with subtle background differentiation.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:30:36.775455+01:00","updated_at":"2025-12-15T23:23:54.243302241+01:00","closed_at":"2025-12-15T23:23:54.243302241+01:00","dependencies":[{"issue_id":"workspace-lfu.9","depends_on_id":"workspace-lfu","type":"parent-child","created_at":"2025-12-09T22:30:36.775936+01:00","created_by":"daemon"},{"issue_id":"workspace-lfu.9","depends_on_id":"workspace-lfu.1","type":"blocks","created_at":"2025-12-09T22:31:55.93885+01:00","created_by":"daemon"}]}
{"id":"workspace-lkqj","title":"Fix chat pinning functionality","description":"Pinning a chat in sidebar currently does nothing. Should pin chat to top of list and persist across sessions.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-29T14:03:26.215810399+01:00","updated_at":"2025-12-29T14:10:46.227220476+01:00","closed_at":"2025-12-29T14:10:46.227220476+01:00"}
{"id":"workspace-ltxe","title":"Frontend: Use server-side syntax highlighting in PreviewView","description":"Update PreviewView.tsx to request ?highlight=true from fileserver and render the pre-highlighted HTML instead of using SyntaxHighlighter. This will make file previews instant on mobile. Depends on: workspace-x74g (completed)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:49:13.71132278+01:00","updated_at":"2025-12-28T19:52:26.130813279+01:00","closed_at":"2025-12-28T19:52:26.130813279+01:00"}
{"id":"workspace-lzt","title":"Command palette added to frontend","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T17:24:04.292287806+01:00","updated_at":"2025-12-17T17:24:08.381466909+01:00","closed_at":"2025-12-17T17:24:08.381466909+01:00"}
{"id":"workspace-mbz","title":"CRITICAL: Plaintext passwords stored for dev users","description":"backend/src/auth/config.rs:33-48 - Dev user passwords are stored in plaintext in configuration. If config is logged, committed, or leaked, credentials are exposed. FIX: Even in dev mode, hash passwords or use a different authentication mechanism for dev users.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-15T23:44:19.297412319+01:00","updated_at":"2025-12-16T06:08:14.657334389+01:00","closed_at":"2025-12-16T06:08:14.657334389+01:00"}
{"id":"workspace-me0","title":"opencode session names are still not the generated human readable names in the frontend. Its always called 'Workspace Session' but each session has a unique specific descriptive name","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T11:20:52.072896+01:00","updated_at":"2025-12-29T09:10:18.292014796+01:00","closed_at":"2025-12-29T09:10:18.292014796+01:00"}
{"id":"workspace-mot","title":"Throttle ResizeObserver in ghostty-terminal to prevent excessive fit() calls","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T13:46:04.328997+01:00","updated_at":"2025-12-17T16:48:22.494812464+01:00","closed_at":"2025-12-17T16:48:22.494812464+01:00"}
{"id":"workspace-mrri","title":"Refactor Persona to reference opencode agents","description":"Update Persona struct: agent_id (required, references opencode agent), default_workdir (optional path), workspace_mode (default_only|ask|any). Remove prompt/tools/permissions from persona - those live in opencode agent.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T12:50:33.626011511+01:00","updated_at":"2025-12-29T15:18:15.279205018+01:00","closed_at":"2025-12-29T15:18:15.279205018+01:00"}
{"id":"workspace-mswd","title":"Refactor Docker backend to use AgentRPC interface","description":"Move existing Docker/container logic behind AgentRPC interface. Container runs octo-agent + opencode inside. Expose socket via bind-mount to host at /run/octo/docker/agent-{user}.sock or loopback TCP. Maintains current isolation benefits.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T13:23:27.114532609+01:00","updated_at":"2025-12-30T13:40:49.78621613+01:00","closed_at":"2025-12-30T13:40:49.78621613+01:00"}
{"id":"workspace-mz4","title":"Security: Port range finder has no upper bound check before 65530 allowing very high port allocation","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:13:30.270803972+01:00","updated_at":"2025-12-29T09:11:29.344996875+01:00","closed_at":"2025-12-29T09:11:29.344996875+01:00"}
{"id":"workspace-mzz","title":"Frontend: Fix missing logo asset causing Next image 400","description":"Homepage referenced /Logo_Green-02.png (missing) and then used a malformed SVG which rendered incorrectly. Fix: serve a valid SVG from frontend/public and size it with square dimensions so it displays correctly in the header/sidebar.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T11:47:01.105302+01:00","updated_at":"2025-12-17T12:16:18.816328+01:00","closed_at":"2025-12-17T11:55:15.952686+01:00","dependencies":[{"issue_id":"workspace-mzz","depends_on_id":"workspace-ht4","type":"discovered-from","created_at":"2025-12-17T11:47:01.106773+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-n92","title":"LOW: Unused import warning suppression","description":"backend/src/api/mod.rs:12 - #[allow(unused_imports)] used instead of fixing the unused import. FIX: Remove unused imports or use them, don't suppress the warning.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:21.969259366+01:00","updated_at":"2025-12-29T09:15:24.69971995+01:00","closed_at":"2025-12-29T09:15:24.69971995+01:00"}
{"id":"workspace-nk8","title":"Container: Mount workspace as user home directory","description":"Mount user's personal directory as /home/dev in the container. Each user gets a persistent directory on the server that is mounted as the container's home.\n\n**Server directory structure:**\n/data/\n defaults/           # master copy of good defaults (.zshrc, .config/, etc.)\n users/\n     alice/          # mounted as /home/dev for alice's container\n        .zshrc\n        .config/\n        .local/\n        project/\n        AGENTS.md\n     bob/\n\n**First-time user setup (backend):**\n1. Create /data/users/{user_id}/\n2. Copy defaults: cp -r /data/defaults/. /data/users/{user_id}/\n3. Start container with mount: -v /data/users/{user_id}:/home/dev\n\n**Returning user:**\n- Directory already has their customizations, just mount it\n\n**Clean slate reset (user-triggered, backend):**\n1. Stop container\n2. rm -rf /data/users/{user_id}/*\n3. cp -r /data/defaults/. /data/users/{user_id}/\n4. Start container\n\n**Container image:**\n- /home/dev empty at build time\n- zsh as default shell\n- Entrypoint just starts services, no file copying or initialization\n- No /etc/skel/ needed\n\n**Backend changes:**\n- User directory provisioning on first session\n- API endpoint: POST /users/{id}/reset-environment\n- Config for paths: user_data_root (/data/users/), defaults_path (/data/defaults/)\n\n**Defaults directory contents:**\n- .zshrc (good zsh config)\n- .config/opencode/ (opencode defaults)\n- .config/starship/ (prompt config)\n- .gitconfig (sensible git defaults)\n- AGENTS.md (root agent instructions template)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T11:55:50.080861+01:00","updated_at":"2025-12-18T22:17:02.366438663+01:00","closed_at":"2025-12-18T22:17:02.366438663+01:00"}
{"id":"workspace-npk","title":"Investigate: x-opencode-directory behavior with sessions","description":"Before implementing personas with x-opencode-directory header, we need to verify behavior.\n\n## Questions to Answer\n\n1. **Session storage**: Are opencode sessions stored per-directory or globally?\n   - If per-directory: switching dirs = different session list (good for personas)\n   - If global: sessions from different dirs mixed together (confusing)\n\n2. **Session context**: When using x-opencode-directory, does the session:\n   - Remember which directory it was created in?\n   - Show files/edits from the correct directory?\n   - Apply the correct .opencode/opencode.json permissions?\n\n3. **Mid-session switching**: What happens if we send messages to the same session but with different x-opencode-directory values?\n   - Does it work at all?\n   - Does it cause confusion in file references?\n\n4. **Skills discovery**: Are skills re-discovered when directory changes?\n\n## How to Test\n\n1. Start opencode serve\n2. Create session in directory A\n3. Send message with x-opencode-directory pointing to directory B\n4. Check:\n   - Which AGENTS.md is read?\n   - Which skills are available?\n   - Which permissions apply?\n   - Where do file edits go?\n\n## Alternatives if x-opencode-directory doesn't work well\n\n**Option A: One opencode server per persona (current multi-agent approach)**\n- More resources but cleaner isolation\n- Already partially implemented\n\n**Option B: Restart opencode server on persona switch**\n- Single server but restart when persona changes\n- Slower switching but clean state\n\n**Option C: Symlink approach**\n- Keep single workdir but symlink AGENTS.md / .opencode/ based on persona\n- Hacky but might work\n\n## Action\nAsk in opencode Discord or test locally before implementing.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-28T09:47:35.209940117+01:00","updated_at":"2025-12-28T09:59:22.393708987+01:00","closed_at":"2025-12-28T09:59:22.393708987+01:00"}
{"id":"workspace-nsg5","title":"Refactor sidebar: Chats/Projects/Agents tabs","description":"Replace current sidebar with 3 tabs: 1) Chats - unified history across all projects with project name in metadata, 2) Projects - directory view (current Agents view), each can have default agent, 3) Agents - list/create/edit opencode agents","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T14:03:11.472782998+01:00","updated_at":"2025-12-29T15:18:15.292748226+01:00","closed_at":"2025-12-29T15:18:15.292748226+01:00"}
{"id":"workspace-onrt","title":"Multi-user architecture: AgentRPC abstraction","description":"Unify Local and Docker modes behind common AgentRPC interface. Enables multi-user local mode with proper isolation and file permissions. See oracle analysis for architecture details.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-30T13:23:46.311851806+01:00","updated_at":"2025-12-30T13:41:30.400365666+01:00","closed_at":"2025-12-30T13:41:30.400365666+01:00"}
{"id":"workspace-onrt.1","title":"AgentRPC API handlers and tests","description":"Implemented API handlers and integration tests for AgentRPC:\n\n## Endpoints Added\n- GET /agent/health - Health check\n- GET /agent/conversations - List conversations\n- GET /agent/conversations/{id} - Get conversation\n- GET /agent/conversations/{id}/messages - Get messages\n- POST /agent/sessions - Start session\n- POST /agent/sessions/{id}/messages - Send message\n- DELETE /agent/sessions/{id} - Stop session\n- GET /agent/sessions/{id}/url - Get session URL\n- GET /agent/sessions/{id}/events - SSE event stream\n\n## Tests\n- 11 new integration tests with MockAgentBackend\n- Tests cover all endpoints including auth requirements\n\n## Status\nCOMPLETED","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T14:36:31.460633037+01:00","updated_at":"2025-12-30T14:36:40.53824641+01:00","closed_at":"2025-12-30T14:36:40.53824641+01:00","dependencies":[{"issue_id":"workspace-onrt.1","depends_on_id":"workspace-onrt","type":"parent-child","created_at":"2025-12-30T14:36:31.461682645+01:00","created_by":"wismut"}]}
{"id":"workspace-onrt.2","title":"Auto Linux user creation implemented","description":"The control plane now automatically creates Linux users when starting sessions:\n\n1. **Platform users**: When a session starts, `ensure_user(user_id)` is called which:\n   - Ensures the shared group exists (e.g., 'octo')\n   - Creates the Linux user if needed (e.g., 'octo_alice')\n   - Returns the UID for process execution\n\n2. **Project users**: When starting a shared project session, `ensure_project_user(project_id, path)` is called which:\n   - Creates the project Linux user (e.g., 'octo_proj_myproject')\n   - Sets up the project directory with correct ownership\n   - All members run as this same user\n\n3. **Effective user resolution**: `effective_username(user_id, project_id)` determines which Linux user to use:\n   - If project_id is set -\u003e project user\n   - Otherwise -\u003e platform user's Linux user\n\nLocation: `backend/src/local/linux_users.rs`\n\nStatus: COMPLETED","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T15:36:01.973273226+01:00","updated_at":"2025-12-30T15:36:13.283555878+01:00","closed_at":"2025-12-30T15:36:13.283555878+01:00","dependencies":[{"issue_id":"workspace-onrt.2","depends_on_id":"workspace-onrt","type":"parent-child","created_at":"2025-12-30T15:36:01.975191402+01:00","created_by":"wismut"}]}
{"id":"workspace-ook","title":"Implement standalone Rust fileserver for container workdir access","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-15T22:07:52.194137+01:00","updated_at":"2025-12-15T22:15:09.095561+01:00","closed_at":"2025-12-15T22:15:09.095561+01:00"}
{"id":"workspace-ot3","title":"Architecture: Multi-user project collaboration via additional containers","description":"For multi-user collaboration on the same project, each user gets their own container with the shared workspace mounted. This provides isolation (each user has their own opencode instance, terminal, agent state) while sharing the codebase. Key considerations: (1) Workspace sync/locking strategy, (2) Per-user EAVS keys and budgets, (3) Container naming convention for user+project, (4) Frontend UI showing all collaborators on a project, (5) Potential for real-time awareness (who's editing what).","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T11:50:06.187482+01:00","updated_at":"2025-12-29T09:12:44.779663669+01:00","closed_at":"2025-12-29T09:12:44.779663669+01:00"}
{"id":"workspace-oux","title":"LOW: Blocking I/O in Config::from_file","description":"fileserver/src/config.rs:107-111 - Config::from_file uses std::fs::read_to_string which is blocking. While called at startup, inconsistent with rest of async codebase. FIX: Use tokio::fs::read_to_string.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:48.151772244+01:00","updated_at":"2025-12-29T09:14:31.366589744+01:00","closed_at":"2025-12-29T09:14:31.366589744+01:00"}
{"id":"workspace-p2e","title":"Fix startup-time proxy flakiness (502/WS)","description":"Frontend hits /session/:id/code/* while container services are still coming up; backend proxies return 502 on connect-refused and terminal WS proxy times out. Make startup connect errors surface as 503 (retryable) and extend WS startup grace.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-17T14:05:21.69827+01:00","updated_at":"2025-12-17T14:07:22.958703+01:00","closed_at":"2025-12-17T14:07:22.958703+01:00"}
{"id":"workspace-p54","title":"display user mode after first login","description":"Show mode selection modal on first login when user.mode is null.\n\nModal UI:\n\n           Choose Your Experience Level                   \n                                                          \n       \n     SIMPLIFIED        LIGHT CODING      TERMINAL  \n                                        TERMINATOR \n    Office files       Full file tree   Full access \n    Chat only          + Code editing   + Terminal  \n                       + Model choice   + Model     \n                                        + Agents    \n      [Select]           [Select]        [Select]   \n       \n                                                          \n  You can change this later in Settings                   \n\n\nTrigger:\n- After successful login/auth\n- Check if user.mode === null\n- If null, show modal (non-dismissable)\n- On selection, PATCH /api/me with mode\n- Then proceed to main app\n\nImplementation:\n- ModeSelectionModal component\n- Check in App root or auth callback\n- Block app access until mode selected","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T16:35:38.282909788+01:00","updated_at":"2025-12-29T09:12:29.565558765+01:00","closed_at":"2025-12-29T09:12:29.565558765+01:00"}
{"id":"workspace-q05","title":"HIGH: Unsanitized uploaded filename in fileserver","description":"fileserver/src/handlers.rs:437-455 - Uploaded filename from field.file_name() is used directly without sanitization. Attacker could upload file with malicious name like '../../../etc/passwd' or containing null bytes. FIX: Sanitize filename, remove path separators and null bytes.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T23:44:30.964304527+01:00","updated_at":"2025-12-16T06:08:53.796877529+01:00","closed_at":"2025-12-16T06:08:53.796877529+01:00"}
{"id":"workspace-qlu","title":"Idiomatic: Use thiserror for all error types instead of manual impl for ConfigValidationError","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:14:06.812568203+01:00","updated_at":"2025-12-29T09:14:00.905481932+01:00","closed_at":"2025-12-29T09:14:00.905481932+01:00"}
{"id":"workspace-qsz","title":"MEDIUM: Overly permissive CORS in fileserver","description":"fileserver/src/main.rs:95-99 - CORS allows ANY origin, ANY method, ANY header. Security risk if exposed to network. FIX: Add configuration option to restrict CORS or document security implications.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:45:03.847489556+01:00","updated_at":"2025-12-29T09:08:54.671551922+01:00","closed_at":"2025-12-29T09:08:54.671551922+01:00"}
{"id":"workspace-qu71","title":"Create persona detail/edit view","description":"Allow viewing and editing persona.toml fields (name, description, color) and AGENTS.md content from the UI.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T12:26:48.003816832+01:00","updated_at":"2025-12-29T09:09:47.839012416+01:00","closed_at":"2025-12-29T09:09:47.839012416+01:00","dependencies":[{"issue_id":"workspace-qu71","depends_on_id":"workspace-0qc","type":"blocks","created_at":"2025-12-28T12:26:59.255640059+01:00","created_by":"wismut"}]}
{"id":"workspace-qvx","title":"Implement dual-mode file browser UI (simple vs power user)","description":"PARTIAL: File tree view exists with tree/list/grid view modes, collapsible folders, navigation, upload/download, multi-select. Still missing: Dual-mode toggle (simple office files vs full power user), mode persistence per user in backend.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T22:35:24.086729+01:00","updated_at":"2025-12-29T09:09:09.894822819+01:00","closed_at":"2025-12-29T09:09:09.894822819+01:00"}
{"id":"workspace-qzc","title":"HIGH: Memory leak via Box::leak in podman module","description":"backend/src/podman/mod.rs:89,96,103,154,286 - Box::leak() is used to convert strings to \u0026'static str for command arguments. This memory is never freed, causing a memory leak proportional to the number of container operations. FIX: Use Vec\u003cString\u003e for owned data and collect refs for Command args.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T23:44:25.499147311+01:00","updated_at":"2025-12-16T06:08:56.657562975+01:00","closed_at":"2025-12-16T06:08:56.657562975+01:00"}
{"id":"workspace-r0a","title":"Fix ghostty-web terminal memory leak - clean up sessionConnections map entries","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T13:46:00.310966+01:00","updated_at":"2025-12-17T16:48:23.577054207+01:00","closed_at":"2025-12-17T16:48:23.577054207+01:00"}
{"id":"workspace-r9o","title":"MEDIUM: File size checked after full read (DoS vector)","description":"fileserver/src/handlers.rs:471-482 - Entire file is read into memory with field.bytes().await BEFORE checking size limit. Attacker could exhaust server memory. FIX: Use streaming with size limit or axum's DefaultBodyLimit.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:45:07.846056316+01:00","updated_at":"2025-12-29T09:08:59.740011728+01:00","closed_at":"2025-12-29T09:08:59.740011728+01:00"}
{"id":"workspace-rg4","title":"LOW: Repeated modified time extraction pattern","description":"fileserver/src/handlers.rs:270-272,281-283,361-363 - Same pattern for extracting modified time from metadata repeated three times. FIX: Extract to helper function get_modified_timestamp().","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:38.387262859+01:00","updated_at":"2025-12-29T09:14:56.732956376+01:00","closed_at":"2025-12-29T09:14:56.732956376+01:00"}
{"id":"workspace-rrl","title":"Frontend: stop 300ms /session/status polling (use SSE)","description":"frontend/lib/opencode-client.ts subscribeToEvents polls /session/status every 300ms, spamming the backend proxy (/session/:id/code/session/status). Replace with EventSource on /session/:id/code/event (SSE) with a slower polling fallback.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T12:38:58.638046+01:00","updated_at":"2025-12-17T12:40:15.434722+01:00","closed_at":"2025-12-17T12:40:15.434722+01:00"}
{"id":"workspace-rta","title":"Code Duplication: Cookie building logic duplicated across login, dev_login, and register handlers","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:13:53.683462822+01:00","updated_at":"2025-12-29T09:14:16.13806976+01:00","closed_at":"2025-12-29T09:14:16.13806976+01:00"}
{"id":"workspace-rys","title":"Idiomatic: Use ? operator consistently instead of explicit match on Result in handlers","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:14:09.954811468+01:00","updated_at":"2025-12-29T09:13:45.68168843+01:00","closed_at":"2025-12-29T09:13:45.68168843+01:00"}
{"id":"workspace-s02","title":"Config: Add agent.workdir to config.toml","description":"Add configurable working directory for the main agent in config.toml.\n\n## Configuration\n\n```toml\n[agent]\n# Working directory for the main agent (default: ~/workspace)\nworkdir = \"/home/dev/workspace\"\n\n# Default persona to use when none selected\ndefault_persona = \"govnr\"\n\n# Path to personas directory\npersonas_path = \"/home/dev/workspace/personas\"\n```\n\n## Implementation\n\n1. Add to `backend/src/config.rs`:\n```rust\n#[derive(Debug, Clone, Deserialize)]\npub struct AgentConfig {\n    pub workdir: Option\u003cPathBuf\u003e,\n    pub default_persona: Option\u003cString\u003e,\n    pub personas_path: Option\u003cPathBuf\u003e,\n}\n```\n\n2. Update session service to use configured workdir\n3. Pass workdir to container via environment variable\n4. Update entrypoint.sh to use AGENT_WORKDIR if set\n\n## Defaults\n- workdir: `~/workspace` (or `/home/dev/workspace` in container)\n- default_persona: `govnr`\n- personas_path: `{workdir}/personas`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T09:40:55.98753428+01:00","updated_at":"2025-12-29T09:04:26.785943843+01:00","closed_at":"2025-12-29T09:04:26.785943843+01:00"}
{"id":"workspace-s4q","title":"Add client-side message caching to reduce API calls","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T16:48:28.899253093+01:00","updated_at":"2025-12-17T16:48:33.379749807+01:00","closed_at":"2025-12-17T16:48:33.379749807+01:00"}
{"id":"workspace-tb6","title":"Integrate dgrm (Excalidraw) for diagramming","description":"Integrate dgrm (byteowlz Excalidraw wrapper) for visual diagramming within octo.\n\n## What is dgrm?\ndgrm is a byteowlz tool wrapping Excalidraw for creating and editing diagrams. It can be used by agents to generate visual diagrams.\n\n## Features\n\n### 1. Diagram Viewer/Editor\n- Embed Excalidraw canvas in octo UI\n- View agent-generated diagrams\n- User can edit and save diagrams\n- Export to PNG/SVG\n\n### 2. Agent Diagram Generation\n- Agent writes .excalidraw.json files\n- Or uses dgrm CLI to generate diagrams\n- Diagrams appear in A2UI canvas\n\n### 3. Diagram Types\n- Architecture diagrams\n- Flowcharts\n- Sequence diagrams\n- Entity relationship diagrams\n- Wireframes/mockups\n\n### 4. Integration Points\n- Skill: `.opencode/skill/diagramming/SKILL.md`\n- Tool: dgrm CLI available in container\n- Viewer: Excalidraw component in frontend\n\n## Implementation\n\n### Container\n- Install dgrm in container image\n- Add diagramming skill with examples\n- Configure artifact output path\n\n### Frontend\n- Add Excalidraw React component\n- Integrate with A2UI canvas\n- File type detection for .excalidraw files\n\n### Skill Definition\n```yaml\n---\nname: diagramming\ndescription: Create visual diagrams using Excalidraw format\n---\nUse dgrm to create diagrams. Output to ~/workspace/.artifacts/\nSupported: flowcharts, architecture, ERD, sequence diagrams\n```\n\n## Dependencies\n- workspace-6ot (A2UI support)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T09:41:40.499621982+01:00","updated_at":"2025-12-29T09:05:01.494412434+01:00","closed_at":"2025-12-29T09:05:01.494412434+01:00"}
{"id":"workspace-tcz","title":"Multi-container architecture with Traefik routing","description":"Implement dynamic container management: Traefik reverse proxy, ttyd for web PTY, internal networking, and Rust backend container orchestration","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-12T12:05:56.567949+01:00","updated_at":"2025-12-12T12:20:53.327652+01:00","closed_at":"2025-12-12T12:20:53.327652+01:00"}
{"id":"workspace-twx2","title":"Fix sent message reappearing in text input","description":"Fixed bug where the last sent message would reappear in the text input field after sending.\n\n## Root Cause\nThe draft save/restore logic had race conditions:\n1. Effect on session switch was saving messageInput to previous session, but due to React batching it could save stale values\n2. Unmount effect was also trying to save drafts, creating duplicate save paths\n\n## Fix\n- Simplified draft logic to only restore drafts when switching to a new session\n- Removed auto-save on session switch (was causing the bug)\n- Draft clearing now only happens explicitly in handleSend() via setDraft(sessionId, '')\n- This eliminates the race condition where sent message text was saved back to draft storage\n\n## Files Changed\n- frontend/apps/sessions/index.tsx","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-31T00:32:42.779463753+01:00","updated_at":"2025-12-31T00:32:56.438004699+01:00","closed_at":"2025-12-31T00:32:56.438004699+01:00"}
{"id":"workspace-u2y","title":"MEDIUM: Blocking I/O in async context (fileserver)","description":"fileserver/src/handlers.rs:230 - std::fs::read_dir is a blocking operation used in async handler. Blocks tokio runtime thread, reducing concurrency. FIX: Use tokio::fs::read_dir.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T23:45:09.690350255+01:00","updated_at":"2025-12-29T09:13:30.448533138+01:00","closed_at":"2025-12-29T09:13:30.448533138+01:00"}
{"id":"workspace-u35","title":"Security: Per-user UID isolation for container mounts","description":"Consider creating per-user system accounts on the server for stronger isolation between user data.\n\n**Current approach:**\n- All user directories owned by same UID (e.g., 1000)\n- Container escape could access all users' data\n\n**Enhanced approach:**\n- Each user gets a system account (user_alice, user_bob)\n- Directories owned by matching UID\n- Container runs with --user matching the owner\n- Container escape only exposes that user's data\n\n**Alternative - user namespaces:**\n- Use Podman's --userns=auto for UID remapping\n- No actual server accounts needed\n- Each container gets isolated UID range\n\n**Decision:** Not needed initially. Container isolation is the primary security boundary. Revisit if:\n- Service becomes public-facing with untrusted users\n- Compliance requires multi-tenancy isolation\n- Defense in depth becomes a priority","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-17T12:09:10.85621+01:00","updated_at":"2025-12-29T09:16:05.294472389+01:00","closed_at":"2025-12-29T09:16:05.294472389+01:00"}
{"id":"workspace-u7j","title":"Backend: Add readiness checks before marking session running","description":"Sessions are marked running after a fixed sleep without verifying opencode/ttyd ports are reachable, leading to frontend 502s (opencode proxy) and flaky terminal WS. Add readiness probes (opencode /session or /session/status, ttyd HTTP 200) and mark failed if they never come up.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T12:57:39.713819+01:00","updated_at":"2025-12-29T08:55:55.081302605+01:00","closed_at":"2025-12-29T08:55:55.081302605+01:00"}
{"id":"workspace-ulx","title":"LOW: Redundant canonicalization in fileserver","description":"fileserver/src/handlers.rs:142,152,461 - Root directory canonicalized multiple times in resolve_path and upload_file. Involves filesystem syscalls that could be cached. FIX: Cache canonical_root in AppState.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:34.463711775+01:00","updated_at":"2025-12-29T09:15:50.075596389+01:00","closed_at":"2025-12-29T09:15:50.075596389+01:00"}
{"id":"workspace-unw","title":"Layout forced before page fully loaded causing flash of unstyled content","description":"Layout was forced before the page was fully loaded. If stylesheets are not yet loaded this may cause a flash of unstyled content. Occurs at index.js:1147","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-15T16:24:03.307830107+01:00","updated_at":"2025-12-15T17:44:01.987419911+01:00","closed_at":"2025-12-15T17:44:01.987419911+01:00"}
{"id":"workspace-upf","title":"Agent runtime status + scaffolding integration (byt)","description":"Add accurate agent runtime status/availability + session context metadata. Integrate scaffolding options via byt (copy template/git) and support standardized SKILL.md format with minimal overlap between tools.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T11:59:26.131034164+01:00","updated_at":"2025-12-26T13:25:26.152573259+01:00","closed_at":"2025-12-26T13:25:26.152573259+01:00"}
{"id":"workspace-ur0","title":"Add file upload, download, and multi-select to FileTreeView","description":"Full file management: (1) Upload files button with multi-file support, (2) New folder creation, (3) Context menu with download/delete options, (4) Multi-select via Ctrl/Cmd+click, (5) Bulk download as ZIP, (6) Bulk delete, (7) Selection info bar","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-17T20:40:58.559344+01:00","updated_at":"2025-12-17T20:41:10.384519+01:00","closed_at":"2025-12-17T20:41:10.384519+01:00"}
{"id":"workspace-ut8u","title":"Load chat messages from disk for viewing history","description":"Currently can only see session list but cannot read the actual chat messages from previous sessions. Need to add API endpoint and UI to load and display chat message content from OpenCode's storage files.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-30T04:21:41.761418206+01:00","updated_at":"2025-12-30T04:57:03.880474127+01:00","closed_at":"2025-12-30T04:57:03.880474127+01:00"}
{"id":"workspace-v0y","title":"MEDIUM: Duplicate session query boilerplate","description":"backend/src/session/repository.rs:22-28,54-61,74-81,93-100,112-119,132-140 - Same column list repeated in every SELECT query. Column changes require updating multiple locations. FIX: Define column list as const SESSION_COLUMNS.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:44:51.886593912+01:00","updated_at":"2025-12-29T09:08:12.734171168+01:00","closed_at":"2025-12-29T09:08:12.734171168+01:00"}
{"id":"workspace-vhvq","title":"Show busy agents in chat history sidebar","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T00:32:54.948030086+01:00","updated_at":"2025-12-31T00:33:33.114267039+01:00","closed_at":"2025-12-31T00:33:33.114267039+01:00"}
{"id":"workspace-vj3","title":"Implement invite code authentication system","description":"Replace OIDC with invite code + self-service registration. Users need valid invite code to register. JWT for session tokens. CLI for batch invite code generation. This is the V1 auth solution before OIDC.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T09:16:48.96812+01:00","updated_at":"2025-12-16T09:56:24.850761+01:00","closed_at":"2025-12-16T09:56:24.850761+01:00"}
{"id":"workspace-vj3.1","title":"Add invite_codes table to database schema","description":"Migration for invite_codes table: id, code (unique), created_by (user_id), used_by (nullable user_id), uses_remaining (int, for multi-use codes), expires_at (nullable), created_at, used_at (nullable). Index on code for fast lookup.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:01.006207+01:00","updated_at":"2025-12-16T09:27:20.935416+01:00","closed_at":"2025-12-16T09:27:20.935416+01:00","dependencies":[{"issue_id":"workspace-vj3.1","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:01.006826+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.2","title":"Implement invite code repository and service","description":"Rust repository: create_code, validate_code, consume_code, list_codes, revoke_code. Service layer with business logic: check expiry, check uses remaining, mark as used on registration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:03.219441+01:00","updated_at":"2025-12-16T09:29:17.001936+01:00","closed_at":"2025-12-16T09:29:17.001936+01:00","dependencies":[{"issue_id":"workspace-vj3.2","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:03.220138+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.3","title":"Add registration endpoint with invite code validation","description":"POST /auth/register: accepts username, email, password, invite_code. Validates invite code, creates user, consumes code. Returns JWT. Password hashing with argon2.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:04.758236+01:00","updated_at":"2025-12-16T09:31:27.817601+01:00","closed_at":"2025-12-16T09:31:27.817601+01:00","dependencies":[{"issue_id":"workspace-vj3.3","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:04.758809+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.4","title":"Implement JWT authentication flow","description":"PARTIAL: JWT generation (generate_dev_token) and validation already exist in auth middleware. Need to: (1) Rename/generalize generate_dev_token to generate_token, (2) Make login work in production mode against DB users, (3) Add proper user lookup from database.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:05.612452+01:00","updated_at":"2025-12-16T09:31:32.943665+01:00","closed_at":"2025-12-16T09:31:32.943665+01:00","dependencies":[{"issue_id":"workspace-vj3.4","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:05.613065+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.5","title":"Add admin API for invite code management","description":"Admin endpoints: POST /admin/invite-codes (create single), POST /admin/invite-codes/batch (create multiple), GET /admin/invite-codes (list all with usage stats), DELETE /admin/invite-codes/{id} (revoke).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:06.855179+01:00","updated_at":"2025-12-16T09:32:52.175637+01:00","closed_at":"2025-12-16T09:32:52.175637+01:00","dependencies":[{"issue_id":"workspace-vj3.5","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:06.855802+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.6","title":"Implement CLI for invite code batch generation","description":"CLI command: backend invite-codes generate --count N --uses-per-code M --expires-in DURATION. Output codes to stdout (one per line) or JSON. Also: list, revoke commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:09.032308+01:00","updated_at":"2025-12-16T09:35:31.125058+01:00","closed_at":"2025-12-16T09:35:31.125058+01:00","dependencies":[{"issue_id":"workspace-vj3.6","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:09.032963+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.7","title":"Build frontend registration page","description":"Registration form: username, email, password, confirm password, invite code field. Validation, error handling. Link from login page. Redirect to login on success.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:10.169142+01:00","updated_at":"2025-12-16T09:56:08.374849+01:00","closed_at":"2025-12-16T09:56:08.374849+01:00","dependencies":[{"issue_id":"workspace-vj3.7","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:10.169706+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vj3.8","title":"Update frontend login to use JWT auth","description":"Login form posts to /auth/login, stores JWT in httpOnly cookie or localStorage. Auth context/provider for React. Protected route wrapper. Logout clears token.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T09:17:11.913049+01:00","updated_at":"2025-12-16T09:56:13.484871+01:00","closed_at":"2025-12-16T09:56:13.484871+01:00","dependencies":[{"issue_id":"workspace-vj3.8","depends_on_id":"workspace-vj3","type":"parent-child","created_at":"2025-12-16T09:17:11.913676+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vkd","title":"pinning a chat in the sidebar does nothing","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T14:08:22.620523+01:00","updated_at":"2025-12-29T09:10:08.133730267+01:00","closed_at":"2025-12-29T09:10:08.133730267+01:00"}
{"id":"workspace-vqp","title":"Integrate EAVS for AI provider interception and virtual keys","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-16T12:02:31.858648+01:00","updated_at":"2025-12-29T09:13:10.152937395+01:00","closed_at":"2025-12-29T09:13:10.152937395+01:00"}
{"id":"workspace-vqp.1","title":"Add EAVS to container image (install/configure in Dockerfile)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:40.672499+01:00","updated_at":"2025-12-16T12:45:49.747334+01:00","closed_at":"2025-12-16T12:45:49.747335+01:00","dependencies":[{"issue_id":"workspace-vqp.1","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:40.673138+01:00","created_by":"tommyfalkowski"}],"comments":[{"id":1,"issue_id":"workspace-vqp.1","author":"tommyfalkowski","text":"Architecture changed: EAVS runs on host, not in container. Added to docker-compose.yml instead of Dockerfile.","created_at":"2025-12-16T20:09:27Z"}]}
{"id":"workspace-vqp.2","title":"Configure opencode to use EAVS as proxy endpoint","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:41.492566+01:00","updated_at":"2025-12-16T12:12:20.016537+01:00","closed_at":"2025-12-16T12:12:20.016537+01:00","dependencies":[{"issue_id":"workspace-vqp.2","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:41.493187+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vqp.3","title":"Backend API: Create virtual key when session starts","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:42.360272+01:00","updated_at":"2025-12-16T12:45:51.491486+01:00","closed_at":"2025-12-16T12:45:51.491486+01:00","dependencies":[{"issue_id":"workspace-vqp.3","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:42.360984+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vqp.4","title":"Backend API: Set budget/rate limits per user on virtual keys","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:43.062578+01:00","updated_at":"2025-12-16T12:45:52.741557+01:00","closed_at":"2025-12-16T12:45:52.741557+01:00","dependencies":[{"issue_id":"workspace-vqp.4","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:43.063222+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vqp.5","title":"Backend API: Revoke virtual key when session ends","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:43.798342+01:00","updated_at":"2025-12-16T12:45:53.446983+01:00","closed_at":"2025-12-16T12:45:53.446983+01:00","dependencies":[{"issue_id":"workspace-vqp.5","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:43.798829+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vqp.6","title":"Backend: Aggregate usage/cost data from EAVS per session/user","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:44.483434+01:00","updated_at":"2025-12-29T09:13:05.080151111+01:00","closed_at":"2025-12-29T09:13:05.080151111+01:00","dependencies":[{"issue_id":"workspace-vqp.6","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:44.484079+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vqp.7","title":"EAVS config: Configure upstream providers (env vars for API keys)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:02:45.482913+01:00","updated_at":"2025-12-16T12:12:34.436171+01:00","closed_at":"2025-12-16T12:12:34.436171+01:00","dependencies":[{"issue_id":"workspace-vqp.7","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:45.483545+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vqp.8","title":"EAVS logging: Stream logs to backend for monitoring/analytics","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:02:46.699871+01:00","updated_at":"2025-12-29T09:13:15.221932438+01:00","closed_at":"2025-12-29T09:13:15.221932438+01:00","dependencies":[{"issue_id":"workspace-vqp.8","depends_on_id":"workspace-vqp","type":"parent-child","created_at":"2025-12-16T12:02:46.70051+01:00","created_by":"tommyfalkowski"}]}
{"id":"workspace-vrc","title":"HIGH: Repeated error-to-ApiError conversion logic (duplication)","description":"backend/src/api/handlers.rs:126-135,240-246,296-304,319-329,343-349,363-369,383-389 - Same error-to-ApiError conversion logic repeated 7+ times with string-based error matching. FIX: Create centralized impl From\u003canyhow::Error\u003e for ApiError using downcast_ref for type checking.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-15T23:44:39.14898581+01:00","updated_at":"2025-12-16T06:09:38.12144499+01:00","closed_at":"2025-12-16T06:09:38.12144499+01:00"}
{"id":"workspace-vvt","title":"Optimize message polling frequency","description":"Current polling is fixed at 500ms which may be too aggressive or too slow.\n\nTasks:\n- Implement adaptive polling: faster when messages are coming in, slower when idle\n- Consider using exponential backoff when no changes detected\n- Add metrics/logging to measure polling efficiency\n- Test impact on server load with multiple concurrent users\n- Consider WebSocket as alternative to SSE for bidirectional communication","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T09:59:11.625398+01:00","updated_at":"2025-12-17T16:37:11.044788717+01:00","closed_at":"2025-12-17T16:37:11.044788717+01:00"}
{"id":"workspace-w1x","title":"Idiomatic: Use Cow\u003cstr\u003e for paths that may or may not be owned to reduce allocations","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:14:18.864078993+01:00","updated_at":"2025-12-29T09:13:40.605139449+01:00","closed_at":"2025-12-29T09:13:40.605139449+01:00"}
{"id":"workspace-w9x","title":"Correctness: Session 2-second sleep before marking running is arbitrary and may not reflect actual readiness","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:14:40.203847228+01:00","updated_at":"2025-12-29T09:10:43.674486252+01:00","closed_at":"2025-12-29T09:10:43.674486252+01:00"}
{"id":"workspace-waa","title":"Performance: HTTP client created per-request in proxy_request instead of being reused","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T21:13:41.302314064+01:00","updated_at":"2025-12-17T16:17:42.824401856+01:00","closed_at":"2025-12-17T16:17:42.824401856+01:00"}
{"id":"workspace-wgv5","title":"Add context window gauge to chat UI","description":"Added a context window gauge component to display token usage in the chat UI.\n\n## Changes\n- New ContextWindowGauge component in frontend/apps/sessions/index.tsx\n- Desktop: Shows gauge icon, progress bar, and percentage in top-right of chat header\n- Mobile: Compact full-width progress bar directly below tabs (no icon, no gaps)\n- Color coding: green (normal), yellow (\u003e70%), red (\u003e90%)\n- Hover tooltip shows detailed token counts\n- Only visible when there are tokens to display\n\n## Implementation\n- Calculates total tokens from assistant message metadata (input + output tokens)\n- Uses maxTokens of 200K as default context window size\n- Responsive design with compact prop for mobile layout","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-31T00:30:49.884880771+01:00","updated_at":"2025-12-31T00:31:02.37712808+01:00","closed_at":"2025-12-31T00:31:02.3771311+01:00"}
{"id":"workspace-wix","title":"HIGH: Path traversal TOCTOU vulnerability in fileserver","description":"fileserver/src/handlers.rs:121-161 - The resolve_path function has a Time-Of-Check-Time-Of-Use (TOCTOU) vulnerability. Path validation can be bypassed between check and file operation via symlink manipulation. FIX: Build path component-by-component rejecting parent traversal, verify against canonical root.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T23:44:28.754442959+01:00","updated_at":"2025-12-16T06:08:52.583100506+01:00","closed_at":"2025-12-16T06:08:52.583100506+01:00"}
{"id":"workspace-wmr3","title":"Multi-workspace session resume: start opencode for history session's workspace","description":"When user sends a message to a history-only session, automatically start opencode in that session's workspace directory. This enables resuming conversations from any workspace without manual workspace switching.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-30T09:12:08.220100155+01:00","updated_at":"2025-12-30T09:20:32.251791586+01:00","closed_at":"2025-12-30T09:20:32.251791586+01:00"}
{"id":"workspace-wrv","title":"Add WebSocket endpoint for file change notifications","description":"Add WebSocket support to fileserver for real-time file change notifications. Required by dgrmr for live canvas updates when AI edits markdown files.\n\n**Endpoint:** `/ws/watch?path=\u003cdirectory\u003e`\n\n**Events to emit:**\n- `file_created`: { path, type: 'file' }\n- `file_modified`: { path, type: 'file' }\n- `file_deleted`: { path, type: 'file' }\n- `dir_created`: { path, type: 'directory' }\n- `dir_deleted`: { path, type: 'directory' }\n\n**Implementation notes:**\n- Use `notify` crate for filesystem watching\n- Debounce rapid changes (100-500ms)\n- Support filtering by file extension (e.g., only .md files)\n- Handle reconnection gracefully on client side\n\n**Example client usage:**\n```typescript\nconst ws = new WebSocket('ws://localhost:41821/ws/watch?path=docs\u0026ext=.md');\nws.onmessage = (event) =\u003e {\n  const { type, path } = JSON.parse(event.data);\n  if (type === 'file_modified') {\n    reloadFile(path);\n  }\n};\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-25T22:55:53.737437+01:00","updated_at":"2025-12-25T23:54:30.055605235+01:00","closed_at":"2025-12-25T23:54:30.055605235+01:00"}
{"id":"workspace-wslo","title":"Workdir picker when starting chat","description":"When persona has workspace_mode=ask, show directory picker before creating session. Let user choose from recent projects or browse filesystem.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T12:50:44.805766666+01:00","updated_at":"2025-12-29T15:18:15.29537989+01:00","closed_at":"2025-12-29T15:18:15.29537989+01:00"}
{"id":"workspace-wss","title":"CRITICAL: Hardcoded default JWT secret in auth config","description":"backend/src/auth/config.rs:30 - The default JWT secret 'dev-secret-change-in-production' is hardcoded and will be used if not overridden. If deployed to production without explicit configuration, tokens can be forged by anyone. FIX: Remove default secret, make jwt_secret required when dev_mode: false, fail startup if not configured.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-15T23:44:16.567845116+01:00","updated_at":"2025-12-16T06:08:13.641857298+01:00","closed_at":"2025-12-16T06:08:13.641857298+01:00"}
{"id":"workspace-wtbk","title":"Remove bottom stop button from chat input","description":"Removed the redundant stop button from the bottom chat input area.\n\n## Changes\n- Modified chat input in frontend/apps/sessions/index.tsx\n- Send button is now always shown (previously toggled between Send/Stop)\n- Send button is disabled when agent is working (chatState === 'sending')\n- Stop functionality remains available via top working indicator banner and double-Escape shortcut\n\n## Rationale\n- Reduces UI clutter - one stop button at the top is sufficient\n- Cleaner interface with consistent Send button placement","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-31T00:31:47.405730135+01:00","updated_at":"2025-12-31T00:32:01.192934254+01:00","closed_at":"2025-12-31T00:32:01.192934254+01:00"}
{"id":"workspace-wyv","title":"MEDIUM: Unnecessary clone of Session in spawned task","description":"backend/src/session/service.rs:115-116 - self.clone() and session.clone() used to move into spawned task. FIX: Consider using Arc for session if cloning is expensive, or extract only needed fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T23:45:01.85768136+01:00","updated_at":"2025-12-29T09:08:49.607013827+01:00","closed_at":"2025-12-29T09:08:49.607013827+01:00"}
{"id":"workspace-x24","title":"Add ttyd for web terminal to Dockerfiles","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-12T12:05:34.928191+01:00","updated_at":"2025-12-12T12:07:14.030661+01:00","closed_at":"2025-12-12T12:07:14.030661+01:00"}
{"id":"workspace-x74g","title":"Server-side syntax highlighting in fileserver","description":"Add syntect-based syntax highlighting to the Rust fileserver. Client requests /file?highlight=true and receives pre-highlighted HTML. This eliminates the heavy SyntaxHighlighter JS library on mobile, making file previews instant on all devices. Steps: 1) Add syntect crate to fileserver 2) Create highlight endpoint 3) Update frontend PreviewView to use server-rendered HTML","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T19:46:31.549567923+01:00","updated_at":"2025-12-28T19:49:01.860633581+01:00","closed_at":"2025-12-28T19:49:01.860633581+01:00"}
{"id":"workspace-x7gm","title":"Shared Projects: Multi-user access to same project/workspace","description":"Enable multiple platform users to access the same project/workspace with proper isolation.\n\n## Design\n\n### Core Concept\n- A **Project** is a workspace/directory that can be shared between multiple users\n- Each project gets its own Linux user (e.g., `octo_proj_myproject`) for filesystem isolation\n- Platform users are granted access to projects via group membership or ACLs\n\n### Data Model\n\n```sql\n-- Projects table\nCREATE TABLE projects (\n    id TEXT PRIMARY KEY,\n    name TEXT NOT NULL,\n    path TEXT NOT NULL UNIQUE,       -- Workspace path\n    linux_user TEXT,                 -- Linux user for this project (null if single-user)\n    owner_id TEXT NOT NULL,          -- Platform user who owns the project\n    created_at TEXT NOT NULL,\n    updated_at TEXT NOT NULL,\n    FOREIGN KEY (owner_id) REFERENCES users(id)\n);\n\n-- Project memberships\nCREATE TABLE project_members (\n    project_id TEXT NOT NULL,\n    user_id TEXT NOT NULL,\n    role TEXT NOT NULL DEFAULT 'member' CHECK (role IN ('owner', 'admin', 'member', 'viewer')),\n    added_at TEXT NOT NULL,\n    added_by TEXT,\n    PRIMARY KEY (project_id, user_id),\n    FOREIGN KEY (project_id) REFERENCES projects(id),\n    FOREIGN KEY (user_id) REFERENCES users(id)\n);\n```\n\n### Access Control\n\n1. **Owner**: Full control, can add/remove members, delete project\n2. **Admin**: Can add/remove members (except owner), manage sessions\n3. **Member**: Can start sessions, view history, run agents\n4. **Viewer**: Read-only access to history, cannot start sessions\n\n### Linux User Isolation\n\n```\nSingle User (no project):\n  Platform user 'alice' -\u003e Linux user 'octo_alice'\n  \nShared Project:\n  Project 'myapp' -\u003e Linux user 'octo_proj_myapp'\n  Platform users 'alice', 'bob' -\u003e both run as 'octo_proj_myapp'\n```\n\n### Session Handling\n\n- When starting a session for a shared project, use the project's Linux user\n- All members see the same conversation history (stored under project user)\n- Concurrent sessions by different members are supported (each gets own opencode instance)\n\n### Migration Path\n\n1. Existing sessions continue to work (user-based isolation)\n2. New `/projects` API for creating/managing shared projects\n3. Frontend adds project management UI\n4. Gradually migrate workspaces to projects as needed\n","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-30T14:35:25.875308925+01:00","updated_at":"2025-12-30T14:35:25.875308925+01:00"}
{"id":"workspace-x7gm.1","title":"Add projects and project_members tables to database","description":"Create migrations for projects and project_members tables as defined in the epic.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T14:35:35.75838038+01:00","updated_at":"2025-12-30T14:35:35.75838038+01:00","dependencies":[{"issue_id":"workspace-x7gm.1","depends_on_id":"workspace-x7gm","type":"parent-child","created_at":"2025-12-30T14:35:35.759126348+01:00","created_by":"wismut"}]}
{"id":"workspace-x7gm.2","title":"Implement Project service and repository","description":"Create ProjectRepository and ProjectService for CRUD operations on projects and memberships.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T14:35:46.325466093+01:00","updated_at":"2025-12-30T14:35:46.325466093+01:00","dependencies":[{"issue_id":"workspace-x7gm.2","depends_on_id":"workspace-x7gm","type":"parent-child","created_at":"2025-12-30T14:35:46.326099181+01:00","created_by":"wismut"}]}
{"id":"workspace-x7gm.3","title":"Add project management API endpoints","description":"API endpoints:\n- POST /projects - Create project\n- GET /projects - List user's projects\n- GET /projects/{id} - Get project details\n- PUT /projects/{id} - Update project\n- DELETE /projects/{id} - Delete project\n- POST /projects/{id}/members - Add member\n- DELETE /projects/{id}/members/{user_id} - Remove member","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T14:35:57.602326717+01:00","updated_at":"2025-12-30T14:35:57.602326717+01:00","dependencies":[{"issue_id":"workspace-x7gm.3","depends_on_id":"workspace-x7gm","type":"parent-child","created_at":"2025-12-30T14:35:57.602912295+01:00","created_by":"wismut"}]}
{"id":"workspace-x7gm.4","title":"Update AgentBackend to support project-based sessions","description":"Modify LocalBackend and ContainerBackend to:\n1. Check if workspace path belongs to a project\n2. Use project's Linux user instead of platform user's Linux user\n3. Store session data under project user's directory","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T14:36:07.583769674+01:00","updated_at":"2025-12-30T14:36:07.583769674+01:00","dependencies":[{"issue_id":"workspace-x7gm.4","depends_on_id":"workspace-x7gm","type":"parent-child","created_at":"2025-12-30T14:36:07.584390263+01:00","created_by":"wismut"}]}
{"id":"workspace-x7gm.5","title":"Frontend: Project management UI","description":"Add UI for:\n- Creating and managing projects\n- Inviting users to projects\n- Switching between personal workspaces and shared projects","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T14:36:17.263376395+01:00","updated_at":"2025-12-30T14:36:17.263376395+01:00","dependencies":[{"issue_id":"workspace-x7gm.5","depends_on_id":"workspace-x7gm","type":"parent-child","created_at":"2025-12-30T14:36:17.264012324+01:00","created_by":"wismut"}]}
{"id":"workspace-xba","title":"Frontend: Model switcher component","description":"Add model selection dropdown for Light Coding and Terminal Terminator modes.\n\nLocation: Chat header area, next to session title\n\nUI:\n\n Session Title          [claude-sonnet ]  []  \n\n\nDropdown options:\n- claude-sonnet-4 (default)\n- claude-opus-4\n- gpt-4o\n- gpt-4o-mini\n- (other configured models)\n\nBehavior:\n- Only visible in Light Coding and Terminal Terminator modes\n- Selection persists per session (stored in opencode session)\n- Or: global preference stored in user profile\n- Changing model affects next message, not history\n\nImplementation:\n1. Fetch available models from backend/config\n2. Store selected model in session or user state\n3. Pass model to opencode API calls\n4. Show current model in dropdown\n\nCheck opencode API for model selection:\n- May be per-session config\n- May need to restart session with different model\n- Or may support mid-session model change","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T23:49:29.88685+01:00","updated_at":"2025-12-29T09:12:19.412500461+01:00","closed_at":"2025-12-29T09:12:19.412500461+01:00"}
{"id":"workspace-y074","title":"Agent/Persona Management UI","description":"Create UI for managing opencode agents with AI-assisted agent builder sidebar. Personas become thin UI wrappers (name, color, avatar, default_workdir, workspace_mode) that reference opencode agents by agent_id.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-29T12:49:57.259189978+01:00","updated_at":"2025-12-29T15:18:15.296170358+01:00","closed_at":"2025-12-29T15:18:15.296170358+01:00"}
{"id":"workspace-y9p","title":"Performance: Invite code batch creation runs N sequential DB queries instead of batch insert","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-16T21:13:44.556605416+01:00","updated_at":"2025-12-29T09:14:21.217182701+01:00","closed_at":"2025-12-29T09:14:21.217182701+01:00"}
{"id":"workspace-ycc","title":"LOW: Repeated string allocations in error mapping","description":"backend/src/api/handlers.rs:126-135,240-246,296-304,319-329 - Error messages converted to String multiple times with .to_string() calls then pattern matched. FIX: Match on error types directly rather than string contents.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-15T23:45:20.477266345+01:00","updated_at":"2025-12-18T16:52:24.323647661+01:00","closed_at":"2025-12-18T16:52:24.323647661+01:00"}
{"id":"workspace-zl6","title":"Security: Logout does not include Secure flag conditional like login does","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T21:13:24.585213452+01:00","updated_at":"2025-12-29T09:11:34.41771479+01:00","closed_at":"2025-12-29T09:11:34.41771479+01:00"}
{"id":"workspace-zln","title":"Add persona info to session/chat model","description":"Store persona_name in session. Backend should read persona.toml from session's persona_path and include name/description/avatar/color in session response.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T12:26:42.969377221+01:00","updated_at":"2025-12-28T12:37:43.293347298+01:00","closed_at":"2025-12-28T12:37:43.293347298+01:00"}
{"id":"workspace-ztq","title":"Terminal WebSocket connection failure to localhost:41822","description":"Terminal WebSocket connection failure to ws://localhost:41822/. Connection interrupted while loading.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-15T16:24:04.618788729+01:00","updated_at":"2025-12-15T17:43:29.377411979+01:00","closed_at":"2025-12-15T17:43:29.377411979+01:00"}
